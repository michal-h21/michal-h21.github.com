<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title>Files and Directories</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<!-- html,th4,family,sections+,xhtml --> 
<meta name="src" content="tex4ht-c.tex" /> 
<meta name="date" content="2014-07-21 21:39:00" /> 
<link rel="stylesheet" type="text/css" href="tex4ht-c.css" /> 
</head><body 
>
    <!--l. 12993--><div class="crosslinks"><p class="noindent">[<a 
 href="tex4ht-cCh16.html" >next</a>] [<a 
 href="tex4ht-cCh14.html" >prev</a>] [<a 
 href="tex4ht-cCh14.html#tailtex4ht-cCh14.html" >prev-tail</a>] [<a 
 href="#tailtex4ht-cCh15.html">tail</a>] [<a 
 href="tex4ht-c.html#tex4ht-cCh15.html" >up</a>] </p></div>
    <h2 class="ChapterHead">Chapter                                 15<br /><a 
 href="tex4ht-c.html#QQ2-31-201"  name="QQ1-31-201">Files                                 and
Directories</a></h2><div class="TableOfContents"><span class="SectionToc" >&#x00A0;&#x00A0;&#x00A0;15.1&#x00A0;<a 
 href="#QQ1-31-202"  name="QQ2-31-202">Environment File (tex4ht.env)</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-203"  name="QQ2-31-203">General</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-204"  name="QQ2-31-204">For
Dos</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-205"  name="QQ2-31-205">Get  Script</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-206"  name="QQ2-31-206">Search  Env  File</a></span><br /><span class="SectionToc" >&#x00A0;&#x00A0;&#x00A0;15.2&#x00A0;<a 
 href="#QQ1-31-207"  name="QQ2-31-207">Locating  the  TFM
Fonts</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-208"  name="QQ2-31-208">Command Line Options</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-209"  name="QQ2-31-209">The Search</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-210"  name="QQ2-31-210">Get Font Env
Variables</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-211"  name="QQ2-31-211">Cache Directories</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-212"  name="QQ2-31-212">Default Built-In During Compilation</a></span><br /><span class="SectionToc" >&#x00A0;&#x00A0;&#x00A0;15.3&#x00A0;<a 
 href="#QQ1-31-213"  name="QQ2-31-213">Htf
Font Files</a></span><br /><span class="SectionToc" >&#x00A0;&#x00A0;&#x00A0;15.4&#x00A0;<a 
 href="#QQ1-31-214"  name="QQ2-31-214">External File Cache</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-215"  name="QQ2-31-215">Search File in Aux Cache from dot
directories</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-216"  name="QQ2-31-216">Store New Auxiliary Cache</a></span><br /><span class="SectionToc" >&#x00A0;&#x00A0;&#x00A0;15.5&#x00A0;<a 
 href="#QQ1-31-217"  name="QQ2-31-217">Export TEX4HTFONTSET
for kpathsea</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-218"  name="QQ2-31-218">Background</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-219"  name="QQ2-31-219">Collect Information</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-220"  name="QQ2-31-220">Appending a
Segment</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-221"  name="QQ2-31-221">Recording TEX4HTFONTSET</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-222"  name="QQ2-31-222">Debugging info</a></span><br /><span class="SectionToc" >&#x00A0;&#x00A0;&#x00A0;15.6&#x00A0;<a 
 href="#QQ1-31-223"  name="QQ2-31-223">Searching
with KPATHSEA</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-224"  name="QQ2-31-224">kpathsea vs kpse-find-file</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-225"  name="QQ2-31-225">HTF Fonts</a></span><br /><span class="SectionToc" >&#x00A0;&#x00A0;&#x00A0;15.7&#x00A0;<a 
 href="#QQ1-31-226"  name="QQ2-31-226">Searching
Utilities</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-227"  name="QQ2-31-227">Search Files Listed in Environment File</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-228"  name="QQ2-31-228">Search in Current
Directory and Specified Directory</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-229"  name="QQ2-31-229">Search in SubDirectories</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-230"  name="QQ2-31-230">dirent</a></span><br /><span class="SubSectionToc" >&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 href="#QQ1-31-231"  name="QQ2-31-231">Try
to Open Path-Named File</a></span><br />
    </div>
    <h3 class="SectionHead">15.1 <a 
 href="tex4ht-c.html#QQ2-31-202"  name="QQ1-31-202">Environment File (tex4ht.env)</a></h3>
<!--l. 13003--><p class="noindent" >
</p><ol type="1" >
<li>Try the file given by the -e switch of tex4ht command. </li>
<li>Search the current directory for one (i.e., open &#8221;tex4ht.env&#8221;). </li>
<li>Search the program&#8217;s directory (dos/w32) </li>
<li>Home directory (&#8216;<span 
class="cmtt-10">~&#8216; unix; \&#8216;</span>&#8217;C:&#8217; dos/w32) </li>
<li>Compiled directory within ENVFILE </li></ol>
<!--l. 13012--><p class="indent" >    First character is a flag character to be consistent with command line options. Undefined flags signal comment
lines.
</p><!--l. 13019--><p class="indent" >    Search along the path: command line file <span 
class="cmsy-10">&rarr; </span>work directory <span 
class="cmsy-10">&rarr; </span>home directory <span 
class="cmsy-10">&rarr; </span>system file.
</p>
      <!--l. 13024--><p class="indent" ><a 
 name="PrTx202001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx14021"><span 
class="cmtt-10">get</span>&#x00A0;<span 
class="cmtt-10">.env</span>&#x00A0;<span 
class="cmtt-10">directory</span>&#x00A0;<span 
class="cmtt-10">from</span>&#x00A0;<span 
class="cmtt-10">com</span>&#x00A0;<span 
class="cmtt-10">ln</span></a><a 
 name="PrTx202002"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">tex4ht_env_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">p+2;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13041--><p class="noindent" ><a 
 href="tex4ht-cCh13.html#PrTx188037"  name="PrTx202003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10015"><span 
class="cmtt-10">main&#8217;s</span>&#x00A0;<span 
class="cmtt-10">vars</span></a><a 
 name="PrTx202004"  href="#PrTx213016"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">char*</span>&#x00A0;<span 
class="cmtt-10">tex4ht_env_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">char*</span>&#x00A0;<span 
class="cmtt-10">dos_env_file</span>&#x00A0;<span 
class="cmtt-10">=</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#if</span>&#x00A0;<span 
class="cmtt-10">defined(__MSDOS__)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx202005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx204001"><span 
class="cmtt-10">get dos env file</span></a><a 
 name="PrTx202006"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#if</span>&#x00A0;<span 
class="cmtt-10">!defined(__MSDOS__)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 13044--><p class="noindent" >In dos we can&#8217;t have file names consisted only of the extension &#8216;<span 
class="cmtt-10">.tex4ht</span>&#8217;, let alone the length of the
extension.
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-203"  name="QQ1-31-203">General</a></h3>
           <!--l. 13057--><p class="noindent" ><a 
 href="tex4ht-cCh14.html#PrTx195001"  name="PrTx203001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10007"><span 
class="cmtt-10">vars</span></a><a 
 name="PrTx203002"  href="#PrTx206018"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">BOOL</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">FALSE;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13061--><p class="noindent" ><a 
 name="PrTx203003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx14067"><span 
class="cmtt-10">trace</span>&#x00A0;<span 
class="cmtt-10">env</span>&#x00A0;<span 
class="cmtt-10">search</span></a><a 
 name="PrTx203004"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">TRUE;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13076--><p class="noindent" ><a 
 name="PrTx203005"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx11005"><span 
class="cmtt-10">find</span>&#x00A0;<span 
class="cmtt-10">tex4ht.env</span></a><a 
 name="PrTx203006"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">str[PATH_MAX],</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*TEX4HTENV;</span>

      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx203007"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx203023"><span 
class="cmtt-10">env file from command switch</span></a><a 
 name="PrTx203008"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx203009"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx203031"><span 
class="cmtt-10">env file at work dir</span></a><a 
 name="PrTx203010"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!dot_file</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx203011"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx203035"><span 
class="cmtt-10">TEX4HTENV env</span></a><a 
 name="PrTx203012"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx203013"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx203025"><span 
class="cmtt-10">env file at root dir</span></a><a 
 name="PrTx203014"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx203015"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx203033"><span 
class="cmtt-10">ENVFILE env</span></a><a 
 name="PrTx203016"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx203017"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx203029"><span 
class="cmtt-10">env from prog dir</span></a><a 
 name="PrTx203018"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx203019"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx223007"><span 
class="cmtt-10">kpathsea env file</span></a><a 
 name="PrTx203020"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!dot_file</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;<span 
class="cmtt-10">bad_in_file(</span><a 
 name="PrTx203021"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx203041"><span 
class="cmtt-10">warn 1</span></a><a 
 name="PrTx203022"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">);</span>&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">/*</span>&#x00A0;<span 
class="cmtt-10">give</span>&#x00A0;<span 
class="cmtt-10">up</span>&#x00A0;<span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">no</span>&#x00A0;<span 
class="cmtt-10">tex4ht.env</span>&#x00A0;<span 
class="cmtt-10">*/</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13087--><p class="noindent" ><a 
 name="PrTx203023"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx203007"><span 
class="cmtt-10">env</span>&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">from</span>&#x00A0;<span 
class="cmtt-10">command</span>&#x00A0;<span 
class="cmtt-10">switch</span></a><a 
 name="PrTx203024"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">tex4ht_env_file</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("-e:</span>&#x00A0;<span 
class="cmtt-10">%s?\n",</span>&#x00A0;<span 
class="cmtt-10">tex4ht_env_file);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">dot_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">tex4ht_env_file?</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">f_open_pathed_filename(</span>&#x00A0;<span 
class="cmtt-10">tex4ht_env_file,</span>&#x00A0;<span 
class="cmtt-10">READ_TEXT_FLAGS</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">:</span>&#x00A0;<span 
class="cmtt-10">NULL;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13114--><p class="noindent" ><a 
 name="PrTx203025"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx203013"><span 
class="cmtt-10">env</span>&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">at</span>&#x00A0;<span 
class="cmtt-10">root</span>&#x00A0;<span 
class="cmtt-10">dir</span></a><a 
 name="PrTx203026"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!dot_file</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">HOME_DIR</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">sprintf(str,</span><a 
 name="PrTx203027"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx203039"><span 
class="cmtt-10">"s/tex4ht.env"</span></a><a 
 name="PrTx203028"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">,</span>&#x00A0;<span 
class="cmtt-10">HOME_DIR);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("%s?\n",</span>&#x00A0;<span 
class="cmtt-10">str);</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">dot_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open(str,READ_TEXT_FLAGS);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">DOS_WIN32</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!dot_file</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">HOME_DIR</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">sprintf(str,"%s/.tex4ht",</span>&#x00A0;<span 
class="cmtt-10">HOME_DIR);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("%s?\n",</span>&#x00A0;<span 
class="cmtt-10">str);</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">dot_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open(str,READ_TEXT_FLAGS);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#if</span>&#x00A0;<span 
class="cmtt-10">defined(__MSDOS__)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!dot_file</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("%s?\n",</span>&#x00A0;<span 
class="cmtt-10">"C:/tex4ht.env");</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">dot_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open("C:/tex4ht.env",READ_TEXT_FLAGS);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13124--><p class="noindent" ><a 
 name="PrTx203029"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx203017"><span 
class="cmtt-10">env</span>&#x00A0;<span 
class="cmtt-10">from</span>&#x00A0;<span 
class="cmtt-10">prog</span>&#x00A0;<span 
class="cmtt-10">dir</span></a><a 
 name="PrTx203030"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!dot_file</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">dos_env_file){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("%s?\n",</span>&#x00A0;<span 
class="cmtt-10">dos_env_file);</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">dot_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open(</span>&#x00A0;<span 
class="cmtt-10">dos_env_file,</span>&#x00A0;<span 
class="cmtt-10">READ_TEXT_FLAGS</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13139--><p class="noindent" ><a 
 name="PrTx203031"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx203009"><span 
class="cmtt-10">env</span>&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">at</span>&#x00A0;<span 
class="cmtt-10">work</span>&#x00A0;<span 
class="cmtt-10">dir</span></a><a 
 name="PrTx203032"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!dot_file</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("%s?\n",</span>&#x00A0;<span 
class="cmtt-10">"tex4ht.env");</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">dot_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open("tex4ht.env",</span>&#x00A0;<span 
class="cmtt-10">READ_TEXT_FLAGS);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">DOS_WIN32</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!dot_file</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("%s?\n",</span>&#x00A0;<span 
class="cmtt-10">".tex4ht");</span>&#x00A0;<span 
class="cmtt-10">}</span>

      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">dot_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open(".tex4ht",</span>&#x00A0;<span 
class="cmtt-10">READ_TEXT_FLAGS);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dot_file</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">printf("(%s)\n",</span>&#x00A0;<span 
class="cmtt-10">".tex4ht");</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13153--><p class="noindent" ><a 
 name="PrTx203033"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx203015"><span 
class="cmtt-10">ENVFILE</span>&#x00A0;<span 
class="cmtt-10">env</span></a><a 
 name="PrTx203034"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">ENVFILE</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!dot_file</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("ENVFILE:</span>&#x00A0;<span 
class="cmtt-10">%s?\n",</span>&#x00A0;<span 
class="cmtt-10">ENVFILE);</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">dot_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open_pathed_filename(</span>&#x00A0;<span 
class="cmtt-10">ENVFILE,READ_TEXT_FLAGS);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#else</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("tex4ht</span>&#x00A0;<span 
class="cmtt-10">compiled</span>&#x00A0;<span 
class="cmtt-10">without</span>&#x00A0;<span 
class="cmtt-10">ENVFILE\n");</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13165--><p class="noindent" ><a 
 name="PrTx203035"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx203011"><span 
class="cmtt-10">TEX4HTENV</span>&#x00A0;<span 
class="cmtt-10">env</span></a><a 
 name="PrTx203036"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">TEX4HTENV</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">getenv("TEX4HTENV");</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">TEX4HTENV</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("TEX4HTENV:</span>&#x00A0;<span 
class="cmtt-10">%s?\n",</span>&#x00A0;<span 
class="cmtt-10">TEX4HTENV);</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">dot_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open_pathed_filename(TEX4HTENV,READ_TEXT_FLAGS);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("getenv(\"TEX4HTENV\")=\n");</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13171--><p class="noindent" ><a 
 href="tex4ht-cCh11.html#PrTx166001"  name="PrTx203037"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx3009"><span 
class="cmtt-10">h-defines</span></a><a 
 name="PrTx203038"  href="#PrTx209014"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">ENVFILE</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13180--><p class="noindent" ><a 
 name="PrTx203039"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx203027"><span 
class="cmtt-10">"s/tex4ht.env"</span></a><a 
 name="PrTx203040"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#if</span>&#x00A0;<span 
class="cmtt-10">defined(__DJGPP__)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">is_forward_slash(HOME_DIR)?</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">"%s/tex4ht.env"</span>&#x00A0;<span 
class="cmtt-10">:</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">"%s\\tex4ht.env"</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#else</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">"%s/tex4ht.env"</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13190--><p class="noindent" ><a 
 name="PrTx203041"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx203021"><span 
class="cmtt-10">warn</span>&#x00A0;<span 
class="cmtt-10">1</span></a><a 
 name="PrTx203042"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">DOS_WIN32</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">"tex4ht.env"</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#else</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">"tex4ht.env</span>&#x00A0;<span 
class="cmtt-10">|</span>&#x00A0;<span 
class="cmtt-10">.tex4ht"</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-204"  name="QQ1-31-204">For Dos</a></h3>
<!--l. 13199--><p class="noindent" >One last remark about the source: I have implemented a routine that changes the functionality of
searching for tex4ht.env a bit. DOS organises programs differently than Unix; it is convention to place the
program and all related files, including configuration files, in a dedicated directory. In addition, DOS
(being single-user) doesn&#8217;t have home directories. Knowing this, the best way to find the tex4ht.env file
is:

</p><!--l. 13207--><p class="indent" >
</p><ol type="1" >
<li>Search the current directory for one (i.e., open &#8221;tex4ht.env&#8221;). </li>
<li>Search the program&#8217;s directory </li>
<li>Give up (no point in checking the root directory). </li></ol>
<!--l. 13213--><p class="indent" >    Under DOS, argv[0] usually includes the full path to the program - even if it wasn&#8217;t typed in. This can be used
to find the program&#8217;s own directory, and hence the configuration file. I&#8217;ve implemented this already as
follows:
</p>
      <!--l. 13220--><p class="indent" ><a 
 name="PrTx204001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx202005"><span 
class="cmtt-10">get</span>&#x00A0;<span 
class="cmtt-10">dos</span>&#x00A0;<span 
class="cmtt-10">env</span>&#x00A0;<span 
class="cmtt-10">file</span></a><a 
 name="PrTx204002"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">get_env_dir(argv[0])</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13226--><p class="noindent" ><a 
 href="tex4ht-cCh14.html#PrTx194029"  name="PrTx204003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10011"><span 
class="cmtt-10">functions</span></a><a 
 name="PrTx204004"  href="#PrTx205004"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#if</span>&#x00A0;<span 
class="cmtt-10">defined(__MSDOS__)</span>
      <br /><!--x-->&#x00A0;<a 
 name="PrTx204005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx204007"><span 
class="cmtt-10">get tex4ht.env in dos</span></a><a 
 name="PrTx204006"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13249--><p class="noindent" ><a 
 name="PrTx204007"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx204005"><span 
class="cmtt-10">get</span>&#x00A0;<span 
class="cmtt-10">tex4ht.env</span>&#x00A0;<span 
class="cmtt-10">in</span>&#x00A0;<span 
class="cmtt-10">dos</span></a><a 
 name="PrTx204008"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">*get_env_dir</span><strong><span 
class="cmtt-10">(</span></strong><span 
class="cmtt-10">progname)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*progname</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">;{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">i;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*p;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(!</span>&#x00A0;<span 
class="cmtt-10">progname</span>&#x00A0;<span 
class="cmtt-10">||</span>&#x00A0;<span 
class="cmtt-10">!</span>&#x00A0;<span 
class="cmtt-10">*progname)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">NULL;</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<i>&#x00A0;<span 
class="cmtt-10">Safety</span>&#x00A0;</i>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">i</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">progname);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">(progname[--i]</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">dir_path_slash(progname)</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(i</span>&#x00A0;<span 
class="cmtt-10">&#x003E;</span>&#x00A0;<span 
class="cmtt-10">0)</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">;</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<i><span 
class="cmtt-10">Search</span>&#x00A0;<span 
class="cmtt-10">for</span>&#x00A0;<span 
class="cmtt-10">dir</span></i>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(i</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">0)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">NULL;</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<i><span 
class="cmtt-10">Not</span>&#x00A0;<span 
class="cmtt-10">found?</span>&#x00A0;<span 
class="cmtt-10">Give</span>&#x00A0;<span 
class="cmtt-10">up</span></i>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">malloc(i+12);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(p</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">NULL)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">NULL;</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<i><span 
class="cmtt-10">Space</span>&#x00A0;<span 
class="cmtt-10">for</span>&#x00A0;<span 
class="cmtt-10">new</span>&#x00A0;<span 
class="cmtt-10">extention</span>&#x00A0;<span 
class="cmtt-10">after</span>&#x00A0;<span 
class="cmtt-10">dot</span></i>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">strncpy(p,</span>&#x00A0;<span 
class="cmtt-10">progname,</span>&#x00A0;<span 
class="cmtt-10">i+1);</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<i><span 
class="cmtt-10">Copy</span>&#x00A0;<span 
class="cmtt-10">up</span>&#x00A0;<span 
class="cmtt-10">to</span>&#x00A0;<span 
class="cmtt-10">slash</span></i>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">&amp;p[i+1],</span>&#x00A0;<span 
class="cmtt-10">"tex4ht.env");</span>&#x00A0;<i><span 
class="cmtt-10">Append</span>&#x00A0;<span 
class="cmtt-10">new</span>&#x00A0;<span 
class="cmtt-10">extention</span></i>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">p;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 13251--><p class="noindent" >The 12 above is for accomodating <span 
class="cmtt-10">tex4ht.env</span>.
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-205"  name="QQ1-31-205">Get Script</a></h3>
<!--l. 13261--><p class="noindent" >Options
</p><!--l. 13263--><p class="indent" >
</p><dl > <dt>s</dt><dd>
Block of lines starting with the same character: s (set format of script commands), e.g., &#8216;<span 
class="cmtt-10">s--- needs ---</span>
<span 
class="cmtt-10">%%1.idv[%%2] ==&#x003E; %%3 ---</span>&#8217; </dd><dt>b</dt><dd>
Begin-of-characters/end-of-figures comment, e.g., &#8216;<span 
class="cmtt-10">b--- characters ---</span>&#8217; </dd><dt>g</dt><dd>
Gif extension, e.g., &#8216;<span 
class="cmtt-10">g.gif</span>&#8217; </dd><dt>a</dt><dd>
Font alias, e.g., &#8216;<span 
class="cmtt-10">acmtex cmtt</span>&#8217; </dd><dt>t</dt><dd>
Directory of tfm fonts, e.g., &#8216;<span 
class="cmtt-10">t/n/candy/0/tex/teTeX/texmf/fonts/tfm/!</span>&#8217; </dd><dt>i</dt><dd>
Directory of htf fonts, e.g., &#8216;<span 
class="cmtt-10">i/n/gold/5/gurari/tex4ht.dir/ i/n/gold/5/gurari/tex4ht.dir/ht-fonts/iso88591/!</span>&#8217;.
</dd></dl>
<!--l. 13279--><p class="indent" >    Priority (the easier to change, the higher in priority).

</p><!--l. 13281--><p class="indent" >
</p><ul >
<li>Command line </li>
<li>Environment File </li>
<li>Hard coded in program </li></ul>
      <!--l. 13289--><p class="indent" ><a 
 href="tex4ht-cCh14.html#PrTx194027"  name="PrTx205001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10009"><span 
class="cmtt-10">header functions</span></a><a 
 name="PrTx205002"  href="#PrTx206002"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">char*</span>&#x00A0;<span 
class="cmtt-10">get_script(</span>&#x00A0;<span 
class="cmtt-10">ARG_III(char</span>&#x00A0;<span 
class="cmtt-10">*,</span>&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*,</span>&#x00A0;<span 
class="cmtt-10">int)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13310--><p class="noindent" ><a 
 href="#PrTx204003"  name="PrTx205003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10011"><span 
class="cmtt-10">functions</span></a><a 
 name="PrTx205004"  href="#PrTx206004"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">char*</span>&#x00A0;<span 
class="cmtt-10">get_script</span><strong><span 
class="cmtt-10">(</span></strong><span 
class="cmtt-10">name,</span>&#x00A0;<span 
class="cmtt-10">inln,x)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;<span 
class="cmtt-10">name</span><strong><span 
class="cmtt-10">;</span></strong>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;<span 
class="cmtt-10">inln</span><strong><span 
class="cmtt-10">;</span></strong>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">x</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">;{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!name</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">str[256],</span>&#x00A0;<span 
class="cmtt-10">*ch;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fseek(dot_file,</span>&#x00A0;<span 
class="cmtt-10">0L,</span>&#x00A0;<a 
 name="PrTx205005"  href="tex4ht-cCh11.html#PrTx160055"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="tex4ht-cCh2.html#PrTx25013"><span 
class="cmtt-10">abs file addr</span></a><a 
 name="PrTx205006"  href="#PrTx215004"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">search_dot_file(</span>&#x00A0;<span 
class="cmtt-10">x</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx205007"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx205009"><span 
class="cmtt-10">read x-script from dot file</span></a><a 
 name="PrTx205008"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">{(IGNORED)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">str,</span>&#x00A0;<span 
class="cmtt-10">inln);</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">m_alloc(char,</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">str)+2);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">ch,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">str);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">ch;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}else</span>&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">name;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 13312--><p class="noindent" >We allocate extra character for possible addition of &#8216;<span 
class="cmtt-10">%</span>&#8217; at end of string.
</p>
      <!--l. 13326--><p class="indent" ><a 
 name="PrTx205009"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx205007"><span 
class="cmtt-10">read</span>&#x00A0;<span 
class="cmtt-10">x-script</span>&#x00A0;<span 
class="cmtt-10">from</span>&#x00A0;<span 
class="cmtt-10">dot</span>&#x00A0;<span 
class="cmtt-10">file</span></a><a 
 name="PrTx205010"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">str;</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">str[254]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">do{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">int_ch;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while((*(ch++)</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(char)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(int_ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">getc(dot_file))</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\n&#8217;){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">int_ch</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">EOF</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">*(ch-1)=&#8217;\n&#8217;;</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">break;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">str[254]</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">warn_i_int(33,</span>&#x00A0;<span 
class="cmtt-10">x);</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">break;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}while(</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">getc(dot_file)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">x</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">*ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 13328--><p class="noindent" >The &#8216;<span 
class="cmtt-10">if( *(ch-1) == EOF ){...}</span>&#8217; is for the case that the last line not terminates with a return.
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-206"  name="QQ1-31-206">Search Env File</a></h3>
           <!--l. 13339--><p class="noindent" ><a 
 href="#PrTx205001"  name="PrTx206001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10009"><span 
class="cmtt-10">header functions</span></a><a 
 name="PrTx206002"  href="#PrTx210004"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">BOOL</span>&#x00A0;<span 
class="cmtt-10">search_dot_file(</span>&#x00A0;<span 
class="cmtt-10">ARG_I(</span>&#x00A0;<span 
class="cmtt-10">int)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13359--><p class="noindent" ><a 
 href="#PrTx205003"  name="PrTx206003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10011"><span 
class="cmtt-10">functions</span></a><a 
 name="PrTx206004"  href="#PrTx210006"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">BOOL</span>&#x00A0;<span 
class="cmtt-10">search_dot_file</span><strong><span 
class="cmtt-10">(</span></strong>&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">ch</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">;{</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">chr;</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">TRUE</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">chr</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">getc(dot_file);</span>

      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">chr</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">TRUE;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">chr</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;&#x003C;&#8217;</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx206005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx206007"><span 
class="cmtt-10">skip non -c env segments</span></a><a 
 name="PrTx206006"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">continue;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">chr</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;\n&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">continue;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">do</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">chr</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">EOF</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">FALSE;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">(chr</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">getc(dot_file))</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\n&#8217;</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13382--><p class="noindent" ><a 
 name="PrTx206007"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx206005"><span 
class="cmtt-10">skip</span>&#x00A0;<span 
class="cmtt-10">non</span>&#x00A0;<span 
class="cmtt-10">-c</span>&#x00A0;<span 
class="cmtt-10">env</span>&#x00A0;<span 
class="cmtt-10">segments</span></a><a 
 name="PrTx206008"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">match[256];</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">i;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">for(</span>&#x00A0;<span 
class="cmtt-10">i</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">0;</span>&#x00A0;<span 
class="cmtt-10">(chr</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\n&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(chr</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">EOF</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">;</span>&#x00A0;<span 
class="cmtt-10">i++){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">chr</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">getc(dot_file);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">match[i]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(U_CHAR)</span>&#x00A0;<span 
class="cmtt-10">chr;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">match[i-1]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">match[0]</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">BOOL</span>&#x00A0;<span 
class="cmtt-10">env_skip;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">for(</span>&#x00A0;<span 
class="cmtt-10">i</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(match[i]</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;&#x003E;&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(match[i]</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\n&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(match[i]</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">EOF</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">i++){}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">match[i]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;&#x003E;&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">match[i]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx206009"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx206021"><span 
class="cmtt-10">env-skip = skip segment match[1]</span></a><a 
 name="PrTx206010"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">env_skip</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx206011"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx206013"><span 
class="cmtt-10">skip env segment</span></a><a 
 name="PrTx206012"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13405--><p class="noindent" ><a 
 name="PrTx206013"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx206011"><span 
class="cmtt-10">skip</span>&#x00A0;<span 
class="cmtt-10">env</span>&#x00A0;<span 
class="cmtt-10">segment</span></a><a 
 name="PrTx206014"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">cur_block[90];</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">BOOL</span>&#x00A0;<span 
class="cmtt-10">status;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_block,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">match);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">status</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">FALSE;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">!status</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(chr</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">EOF)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">chr</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;x&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">for(</span>&#x00A0;<span 
class="cmtt-10">i</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">0;</span>&#x00A0;<span 
class="cmtt-10">(chr</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\n&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(chr</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">EOF</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">;</span>&#x00A0;<span 
class="cmtt-10">i++){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">chr</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">getc(dot_file);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">match[i]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(U_CHAR)</span>&#x00A0;<span 
class="cmtt-10">chr;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">match[i-1]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">for(i=0;</span>&#x00A0;<span 
class="cmtt-10">match[i]!=&#8217;\0&#8217;;</span>&#x00A0;<span 
class="cmtt-10">i++){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">match[i]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;&#x003E;&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">break;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(match[0]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;&#x003C;&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(match[1]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(match[i]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;&#x003E;&#8217;)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">match[i]=&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">status</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">eq_str(match+2,</span>&#x00A0;<span 
class="cmtt-10">cur_block);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;<span 
class="cmtt-10">status</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">FALSE;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13416--><p class="noindent" ><a 
 href="tex4ht-cCh11.html#PrTx177029"  name="PrTx206015"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10003"><span 
class="cmtt-10">defines</span></a><a 
 name="PrTx206016"  href="#PrTx208006"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">env_c_rec{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">*option;</span>

      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">env_c_rec</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*next;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">};</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13421--><p class="noindent" ><a 
 href="#PrTx203001"  name="PrTx206017"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10007"><span 
class="cmtt-10">vars</span></a><a 
 name="PrTx206018"  href="#PrTx208004"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">env_c_rec</span>&#x00A0;<span 
class="cmtt-10">*envChoice</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;<span 
class="cmtt-10">env_c_rec*)</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13430--><p class="noindent" ><a 
 name="PrTx206019"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx14019"><span 
class="cmtt-10">env</span>&#x00A0;<span 
class="cmtt-10">blocks</span>&#x00A0;<span 
class="cmtt-10">selector</span></a><a 
 name="PrTx206020"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">env_c_rec</span>&#x00A0;<span 
class="cmtt-10">*temp</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;<span 
class="cmtt-10">env_c_rec*)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">m_alloc(struct</span>&#x00A0;<span 
class="cmtt-10">env_c_rec,</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">1);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">temp-&#x003E;option</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">p+2;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">temp-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">envChoice;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">envChoice</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">temp;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13441--><p class="noindent" ><a 
 name="PrTx206021"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx206009"><span 
class="cmtt-10">env-skip</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">skip</span>&#x00A0;<span 
class="cmtt-10">segment</span>&#x00A0;<span 
class="cmtt-10">match[1]</span></a><a 
 name="PrTx206022"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">envChoice</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;<span 
class="cmtt-10">env_c_rec*)</span>&#x00A0;<span 
class="cmtt-10">0</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">env_skip</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">!eq_str(match,</span>&#x00A0;<span 
class="cmtt-10">"default"</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">env_c_rec</span>&#x00A0;<span 
class="cmtt-10">*p;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">env_skip</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">TRUE;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">for(</span>&#x00A0;<span 
class="cmtt-10">p=envChoice;</span>&#x00A0;<span 
class="cmtt-10">p!=(struct</span>&#x00A0;<span 
class="cmtt-10">env_c_rec*)</span>&#x00A0;<span 
class="cmtt-10">0</span>&#x00A0;<span 
class="cmtt-10">;</span>&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">p-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">eq_str(match,</span>&#x00A0;<span 
class="cmtt-10">p-&#x003E;option</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">env_skip</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">FALSE;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SectionHead">15.2 <a 
 href="tex4ht-c.html#QQ2-31-207"  name="QQ1-31-207">Locating the TFM Fonts</a></h3>
<!--l. 13453--><p class="noindent" >Flag &#8216;t&#8217; identifies font directories. Command line (can be multiple) <span 
class="cmsy-10">&rarr; </span>work directory <span 
class="cmsy-10">&rarr; </span>dot file <span 
class="cmsy-10">&rarr; </span>system
directory.
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-208"  name="QQ1-31-208">Command Line Options</a></h3>
<!--l. 13464--><p class="noindent" >
</p><ul >
<li>Specifying multiple directories is possible; paths are separated with &#8217;:&#8217; under Unix, &#8217;;&#8217; under DOS. (This isn&#8217;t really
important perhaps, but it seems a nice feature).
<!--l. 13469--><p class="indent" >    Instead of concatenated directories we allow multiple ones.
</p><!--l. 13471--><p class="noindent" ></p></li>
<li>If a path specification ends in a &#8217;!&#8217;, it&#8217;s subdirectories are searched too, else only the specified dir is searched. (This
is the way many TeX installations seem to do it, too). </li></ul>
      <!--l. 13480--><p class="indent" ><a 
 name="PrTx208001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx14041"><span 
class="cmtt-10">get</span>&#x00A0;<span 
class="cmtt-10">tfm</span>&#x00A0;<span 
class="cmtt-10">font</span>&#x00A0;<span 
class="cmtt-10">dir</span>&#x00A0;<span 
class="cmtt-10">from</span>&#x00A0;<span 
class="cmtt-10">com</span>&#x00A0;<span 
class="cmtt-10">ln</span></a><a 
 name="PrTx208002"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">com_dir(p);</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">fontdir[fontdir_count++]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">p+2;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 13482--><p class="noindent" >The &#8216;<span 
class="cmtt-10">access</span>&#8217; function returns 0 if the path is fine; -1 for error.
</p>
      <!--l. 13489--><p class="indent" ><a 
 href="#PrTx206017"  name="PrTx208003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10007"><span 
class="cmtt-10">vars</span></a><a 
 name="PrTx208004"  href="#PrTx211010"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*fontdir[MAXFDIRS];</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">fontdir_count</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 13491--><p class="noindent" >What the use of the following? Do we wants to make it h-defines.
</p>
      <!--l. 13497--><p class="indent" ><a 
 href="#PrTx206015"  name="PrTx208005"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10003"><span 
class="cmtt-10">defines</span></a><a 
 name="PrTx208006"  href="#PrTx229014"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">MAXFDIRS</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#define</span>&#x00A0;<span 
class="cmtt-10">MAXFDIRS</span>&#x00A0;<span 
class="cmtt-10">100</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 13499--><p class="noindent" >Also, check how many directories and fonts are used. &#8216;<span 
class="cmtt-10">tex4ht.log</span>&#8217; claims 55 fonts with 255 as limit.
</p>

    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-209"  name="QQ1-31-209">The Search</a></h3>
<!--l. 13507--><p class="noindent" > <span 
class="cmtt-10">struct cache_font_rec *cur_cache_font; </span>?
</p>
      <!--l. 13528--><p class="indent" ><a 
 name="PrTx209001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh10.html#PrTx137003"><span 
class="cmtt-10">search</span>&#x00A0;<span 
class="cmtt-10">dirs</span>&#x00A0;<span 
class="cmtt-10">for</span>&#x00A0;<span 
class="cmtt-10">font</span></a><a 
 name="PrTx209002"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<i>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">i;</span>&#x00A0;</i>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">font_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">NULL;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">sprintf(file_name,</span>&#x00A0;<span 
class="cmtt-10">"%s.tfm",</span>&#x00A0;<span 
class="cmtt-10">new_font_name);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx209003"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx223023"><span 
class="cmtt-10">if kpathsea tfm files else</span></a><a 
 name="PrTx209004"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx209005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx211001"><span 
class="cmtt-10">search font in cache dirs</span></a><a 
 name="PrTx209006"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!font_file</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">i;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">for(</span>&#x00A0;<span 
class="cmtt-10">i</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">fontdir_count;</span>&#x00A0;<span 
class="cmtt-10">i--;</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(font_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">search_file_base(file_name,</span>&#x00A0;<span 
class="cmtt-10">fontdir[i],</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">READ_BIN_FLAGS,</span>&#x00A0;<span 
class="cmtt-10">tfm_dirs))</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">NULL</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">break;</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!font_file</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">font_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open(file_name,</span>&#x00A0;<span 
class="cmtt-10">READ_BIN_FLAGS);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!font_file</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">dot_file</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">font_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">search_in_dot_file(</span>&#x00A0;<span 
class="cmtt-10">&#8217;t&#8217;,</span>&#x00A0;<span 
class="cmtt-10">file_name,</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">READ_BIN_FLAGS,</span>&#x00A0;<span 
class="cmtt-10">tfm_dirs);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx209007"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx209011"><span 
class="cmtt-10">search TFMDIR</span></a><a 
 name="PrTx209008"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx209009"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx223027"><span 
class="cmtt-10">endif kpathsea tfm files</span></a><a 
 name="PrTx209010"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 13534--><p class="noindent" >KPATHSEA has a database LS-R which corresponds to a &#8216;<span 
class="cmtt-10">ls -R *</span>&#8217; listing of files and the directories including
them. This allow for a quick search of files within the image of the directory stored within the database, instead of
live search in the directories themselve which consume disk access time.
</p>
      <!--l. 13547--><p class="indent" ><a 
 name="PrTx209011"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx209007"><span 
class="cmtt-10">search</span>&#x00A0;<span 
class="cmtt-10">TFMDIR</span></a><a 
 name="PrTx209012"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">TFMDIR</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!font_file</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">font_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">search_file_base(file_name,</span>&#x00A0;<span 
class="cmtt-10">TFMDIR,</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">READ_BIN_FLAGS,</span>&#x00A0;<span 
class="cmtt-10">tfm_dirs);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13553--><p class="noindent" ><a 
 href="#PrTx203037"  name="PrTx209013"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx3009"><span 
class="cmtt-10">h-defines</span></a><a 
 name="PrTx209014"  href="#PrTx213026"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">TFMDIR</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-210"  name="QQ1-31-210">Get Font Env Variables</a></h3>
<!--l. 13560--><p class="noindent" >The environment variables, if defined, hold a sequence of directory names. Each directory name can be an
absolute address, or relative to the home directory (signaled by the prefix &#8216;<span 
class="cmtt-10">~</span>&#8217;). The directories must be
separated by a distinguished character, which must also act as delimiter at the start and the end of the
string.
</p>
      <!--l. 13570--><p class="indent" ><a 
 name="PrTx210001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh2.html#PrTx28013"><span 
class="cmtt-10">check</span>&#x00A0;<span 
class="cmtt-10">env</span>&#x00A0;<span 
class="cmtt-10">font</span>&#x00A0;<span 
class="cmtt-10">variables</span></a><a 
 name="PrTx210002"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">tfm_dirs</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">get_env_var("TEX4HTTFM");</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">htf_dirs</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">get_env_var("TEX4HTHTF");</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13579--><p class="noindent" ><a 
 href="#PrTx206001"  name="PrTx210003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10009"><span 
class="cmtt-10">header functions</span></a><a 
 name="PrTx210004"  href="#PrTx213020"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">env_var_rec</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;<span 
class="cmtt-10">get_env_var(</span>&#x00A0;<span 
class="cmtt-10">ARG_I(const</span>&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;-_-_-</span>

           </p><!--l. 13609--><p class="noindent" ><a 
 href="#PrTx206003"  name="PrTx210005"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10011"><span 
class="cmtt-10">functions</span></a><a 
 name="PrTx210006"  href="#PrTx213022"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">env_var_rec</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;<span 
class="cmtt-10">get_env_var</span><strong><span 
class="cmtt-10">(</span></strong>&#x00A0;<span 
class="cmtt-10">env_var</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">*env_var</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">;{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*TEX4HTTFM,</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*from;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">env_var_rec</span>&#x00A0;<span 
class="cmtt-10">*tfm_dirs,</span>&#x00A0;<span 
class="cmtt-10">*p;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">env_var_len;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">tfm_dirs</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">env_var_rec</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">TEX4HTTFM</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">getenv(</span>&#x00A0;<span 
class="cmtt-10">env_var</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">TEX4HTTFM</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">env_var_len</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">TEX4HTTFM);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">*TEX4HTTFM</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">*(TEX4HTTFM</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">env_var_len</span>&#x00A0;<span 
class="cmtt-10">-</span>&#x00A0;<span 
class="cmtt-10">1</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">from</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">TEX4HTTFM</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">env_var_len</span>&#x00A0;<span 
class="cmtt-10">-</span>&#x00A0;<span 
class="cmtt-10">1;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*from</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">do{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">from--;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">*from</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">*TEX4HTTFM</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;<span 
class="cmtt-10">base;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*from</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">base</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">from</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">1;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx210007"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx210013"><span 
class="cmtt-10">verify env var dir</span></a><a 
 name="PrTx210008"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">base</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx210009"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx210011"><span 
class="cmtt-10">add env var dir</span></a><a 
 name="PrTx210010"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">while</span>&#x00A0;<span 
class="cmtt-10">(from</span>&#x00A0;<span 
class="cmtt-10">&#x003E;</span>&#x00A0;<span 
class="cmtt-10">TEX4HTTFM</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">warn_i_str2(</span>&#x00A0;<span 
class="cmtt-10">49,</span>&#x00A0;<span 
class="cmtt-10">env_var,</span>&#x00A0;<span 
class="cmtt-10">TEX4HTTFM);</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">tfm_dirs;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 13611--><p class="noindent" >We preseve the order of the directories founnd in the environment variables.
</p>
      <!--l. 13620--><p class="indent" ><a 
 name="PrTx210011"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx210009"><span 
class="cmtt-10">add</span>&#x00A0;<span 
class="cmtt-10">env</span>&#x00A0;<span 
class="cmtt-10">var</span>&#x00A0;<span 
class="cmtt-10">dir</span></a><a 
 name="PrTx210012"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">m_alloc(struct</span>&#x00A0;<span 
class="cmtt-10">env_var_rec,</span>&#x00A0;<span 
class="cmtt-10">1);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">p-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">tfm_dirs;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">p-&#x003E;base</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">base;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">tfm_dirs</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">p;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13640--><p class="noindent" ><a 
 name="PrTx210013"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx210007"><span 
class="cmtt-10">verify</span>&#x00A0;<span 
class="cmtt-10">env</span>&#x00A0;<span 
class="cmtt-10">var</span>&#x00A0;<span 
class="cmtt-10">dir</span></a><a 
 name="PrTx210014"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*str;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">*(from+1)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;~&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">HOME_DIR</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">str</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">m_alloc(char,</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">HOME_DIR)+strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">base));</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">sprintf(str,"%s%s",</span>&#x00A0;<span 
class="cmtt-10">HOME_DIR,</span>&#x00A0;<span 
class="cmtt-10">base+1);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">access(str,F_OK)</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">warn_i_str2(49,</span>&#x00A0;<span 
class="cmtt-10">env_var,</span>&#x00A0;<span 
class="cmtt-10">str);</span>&#x00A0;<span 
class="cmtt-10">base</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">NULL;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">free((void</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">str);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">access(base,F_OK)</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">warn_i_str2(49,</span>&#x00A0;<span 
class="cmtt-10">env_var,</span>&#x00A0;<span 
class="cmtt-10">base);</span>&#x00A0;<span 
class="cmtt-10">base</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">NULL;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">access(base,F_OK)</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">warn_i_str2(49,</span>&#x00A0;<span 
class="cmtt-10">env_var,</span>&#x00A0;<span 
class="cmtt-10">base);</span>&#x00A0;<span 
class="cmtt-10">base</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">NULL;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>

           </p><!--l. 13650--><p class="noindent" ><a 
 href="tex4ht-cCh12.html#PrTx183001"  name="PrTx210015"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh2.html#PrTx28003"><span 
class="cmtt-10">scan</span>&#x00A0;<span 
class="cmtt-10">fonts</span>&#x00A0;<span 
class="cmtt-10">vars</span></a><a 
 name="PrTx210016"  href="#PrTx221004"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">env_var_rec</span>&#x00A0;<span 
class="cmtt-10">*tfm_dirs;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">env_var_rec</span>&#x00A0;<span 
class="cmtt-10">*htf_dirs;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13655--><p class="noindent" ><a 
 href="tex4ht-cCh12.html#PrTx183009"  name="PrTx210017"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10005"><span 
class="cmtt-10">types</span></a><a 
 name="PrTx210018"  href="#PrTx211014"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">env_var_rec{</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">char*</span>&#x00A0;<span 
class="cmtt-10">base;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">env_var_rec</span>&#x00A0;<span 
class="cmtt-10">*next;</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">};</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-211"  name="QQ1-31-211">Cache Directories</a></h3>
           <!--l. 13673--><p class="noindent" ><a 
 name="PrTx211001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx209005"><span 
class="cmtt-10">search</span>&#x00A0;<span 
class="cmtt-10">font</span>&#x00A0;<span 
class="cmtt-10">in</span>&#x00A0;<span 
class="cmtt-10">cache</span>&#x00A0;<span 
class="cmtt-10">dirs</span></a><a 
 name="PrTx211002"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">for(</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cache_font;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_cache_font;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_cache_font</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(font_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">search_file(file_name,</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;dir,</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">READ_BIN_FLAGS))</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">NULL)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">break;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13707--><p class="noindent" ><a 
 name="PrTx211003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx228021"><span 
class="cmtt-10">put dir in cache</span></a><a 
 name="PrTx211004"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">found;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">found</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">FALSE;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">for(</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cache_font;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_cache_font;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_cache_font</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;<span 
class="cmtt-10">found</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">found</span>&#x00A0;<span 
class="cmtt-10">||</span>&#x00A0;<span 
class="cmtt-10">eq_str(cur_cache_font-&#x003E;dir,</span>&#x00A0;<span 
class="cmtt-10">dir</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">found</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">break;</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!found</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_cache_font</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">m_alloc(struct</span>&#x00A0;<span 
class="cmtt-10">cache_font_rec,</span>&#x00A0;<span 
class="cmtt-10">1);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx211005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx214001"><span 
class="cmtt-10">init new cache list</span></a><a 
 name="PrTx211006"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;dir</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">m_alloc(char,</span>&#x00A0;<span 
class="cmtt-10">n+1);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;dir,</span>&#x00A0;<span 
class="cmtt-10">dir);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!cache_font</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cache_font;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cache_font</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">gt_str(cache_font-&#x003E;dir,</span>&#x00A0;<span 
class="cmtt-10">dir)</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cache_font;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cache_font</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">cache_font_rec</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">after_cache_font;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">after_cache_font</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cache_font;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">after_cache_font-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">gt_str(after_cache_font-&#x003E;next-&#x003E;dir,</span>&#x00A0;<span 
class="cmtt-10">dir)</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;<span 
class="cmtt-10">break;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">after_cache_font</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">after_cache_font-&#x003E;next;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">after_cache_font-&#x003E;next;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">after_cache_font-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13718--><p class="noindent" ><a 
 href="tex4ht-cCh11.html#PrTx159013"  name="PrTx211007"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh2.html#PrTx28029"><span 
class="cmtt-10">free</span>&#x00A0;<span 
class="cmtt-10">html</span>&#x00A0;<span 
class="cmtt-10">font</span>&#x00A0;<span 
class="cmtt-10">memory</span></a><a 
 name="PrTx211008"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">(cur_cache_font</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cache_font)</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;<span 
class="cmtt-10">cache_font_rec</span>&#x00A0;<span 
class="cmtt-10">*)0</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cache_font</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cache_font-&#x003E;next;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">free((void</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;dir</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">free((void</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font</span>&#x00A0;<span 
class="cmtt-10">);</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>

      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13723--><p class="noindent" ><a 
 href="#PrTx208003"  name="PrTx211009"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10007"><span 
class="cmtt-10">vars</span></a><a 
 name="PrTx211010"  href="#PrTx216012"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">cache_font_rec</span>&#x00A0;<span 
class="cmtt-10">*cache_font,</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*cur_cache_font;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13728--><p class="noindent" ><a 
 href="tex4ht-cCh11.html#PrTx159011"  name="PrTx211011"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh2.html#PrTx28011"><span 
class="cmtt-10">init</span>&#x00A0;<span 
class="cmtt-10">scan</span>&#x00A0;<span 
class="cmtt-10">fonts</span>&#x00A0;<span 
class="cmtt-10">vars</span></a><a 
 name="PrTx211012"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">cache_font</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;<span 
class="cmtt-10">cache_font_rec</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">cur_cache_font</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;<span 
class="cmtt-10">cache_font_rec</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13736--><p class="noindent" ><a 
 href="#PrTx210017"  name="PrTx211013"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10005"><span 
class="cmtt-10">types</span></a><a 
 name="PrTx211014"  href="#PrTx213014"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">cache_font_rec{</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">char*</span>&#x00A0;<span 
class="cmtt-10">dir;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">cache_file_rec</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;<span 
class="cmtt-10">cache_file;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">cache_font_rec*</span>&#x00A0;<span 
class="cmtt-10">next;</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">};</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">cache_file_rec{</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">cache_file_rec*</span>&#x00A0;<span 
class="cmtt-10">next;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file;</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">};</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-212"  name="QQ1-31-212">Default Built-In During Compilation</a></h3>
<!--l. 13742--><p class="noindent" >On my HP the standard TeX fonts are in the directory <a 
 href="/usr/local/tex/lib/texmf/fonts/public/cm/tfm/" >/usr/local/tex/lib/texmf/fonts/public/cm/tfm/</a>, and the
standard latex fonts are in <a 
 href="/usr/local/tex/lib/texmf/fonts/public/latex/tfm/" >/usr/local/tex/lib/texmf/fonts/public/latex/tfm/</a>, on my SUN the directory is
???.
</p><!--l. 13753--><p class="indent" >    We also might want to put the current directory in.
</p><!--l. 13758--><p class="indent" >    The function &#8216;<span 
class="cmtt-10">int access(const U_CHAR *pathname, int mode)</span>&#8217;, and the mode &#8216;<span 
class="cmtt-10">F_OK</span>&#8217; that tests for the
existence of file, are defined in the following directory. The function returns 0 if ok and -1 on error
.
</p><!--l. 13762--><p class="indent" >    Where access comes from in dos? in <span 
class="cmtt-10">&#x003C;io.h&#x003E;</span>
</p>
      <!--l. 13783--><p class="indent" ><a 
 href="tex4ht-cCh1.html#PrTx8001"  name="PrTx212001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx3023"><span 
class="cmtt-10">h-include</span></a><a 
 name="PrTx212002"  href="#PrTx223002"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">F_OK</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">DOS_WIN32</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#define</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">F_OK</span>&#x00A0;<span 
class="cmtt-10">0</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<i>&#x00A0;<span 
class="cmtt-10">does</span>&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">exist</span>&#x00A0;</i>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">DOS_WIN32</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#define</span>&#x00A0;<span 
class="cmtt-10">HAVE_UNISTD_H</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">HAVE_IO_H</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#include</span>&#x00A0;<span 
class="cmtt-10">&#x003C;io.h&#x003E;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">HAVE_UNISTD_H</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#include</span>&#x00A0;<span 
class="cmtt-10">&#x003C;unistd.h&#x003E;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SectionHead">15.3 <a 
 href="tex4ht-c.html#QQ2-31-213"  name="QQ1-31-213">Htf Font Files</a></h3>
<!--l. 13790--><p class="noindent" >Search along the path: command line switch &#8217;i&#8217; directory <span 
class="cmsy-10">&rarr; </span>work directory <span 
class="cmsy-10">&rarr; </span>directories specified in tex4ht.env
(switch &#8217;i&#8217; and aliased &#8217;a&#8217;) <span 
class="cmsy-10">&rarr; </span>system directory specified in HTFDIR. [<a 
 href="tex4ht-c32.html"  name="tex4ht-c32.html" >more</a>]
</p>
      <!--l. 13831--><p class="indent" ><a 
 name="PrTx213001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh11.html#PrTx157031"><span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">.htf</span>&#x00A0;<span 
class="cmtt-10">file</span></a><a 
 name="PrTx213002"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">name[256];</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">sprintf(name,</span>&#x00A0;<span 
class="cmtt-10">"%s.htf",</span>&#x00A0;<span 
class="cmtt-10">new_font_name);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx213003"  href="tex4ht-cCh12.html#PrTx181007"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx213007"><span 
class="cmtt-10">search file in htf locations</span></a><a 
 name="PrTx213004"  href="tex4ht-cCh16.html#PrTx235004"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<a 
 name="PrTx213005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="tex4ht-cCh10.html#PrTx128039"><span 
class="cmtt-10">check name decomposition</span></a><a 
 name="PrTx213006"><span 
class="cmtt-10">.&#x003E;</span></a>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13846--><p class="noindent" ><a 
 name="PrTx213007"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh12.html#PrTx181007"><span 
class="cmtt-10">search</span>&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">in</span>&#x00A0;<span 
class="cmtt-10">htf</span>&#x00A0;<span 
class="cmtt-10">locations</span></a><a 
 name="PrTx213008"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">NULL;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx213009"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx213023"><span 
class="cmtt-10">search htf font along cmd switches</span></a><a 
 name="PrTx213010"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!file</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">((file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open(name,</span>&#x00A0;<span 
class="cmtt-10">READ_TEXT_FLAGS))</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">NULL)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">dot_file</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">search_in_dot_file(</span>&#x00A0;<span 
class="cmtt-10">&#8217;i&#8217;,</span>&#x00A0;<span 
class="cmtt-10">name,</span>&#x00A0;<span 
class="cmtt-10">READ_TEXT_FLAGS,</span>&#x00A0;<span 
class="cmtt-10">htf_dirs);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">HTFDIR</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!file</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">search_file_base(name,</span>&#x00A0;<span 
class="cmtt-10">HTFDIR,</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">READ_TEXT_FLAGS,</span>&#x00A0;<span 
class="cmtt-10">htf_dirs);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx213011"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx225005"><span 
class="cmtt-10">file = kpathsea .htf file</span></a><a 
 name="PrTx213012"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13854--><p class="noindent" ><a 
 href="#PrTx211013"  name="PrTx213013"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10005"><span 
class="cmtt-10">types</span></a><a 
 name="PrTx213014"  href="tex4ht-cCh16.html#PrTx236002"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">htf_com_rec{</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">char*</span>&#x00A0;<span 
class="cmtt-10">name;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">htf_com_rec*</span>&#x00A0;<span 
class="cmtt-10">next;</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">};</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13858--><p class="noindent" ><a 
 href="#PrTx202003"  name="PrTx213015"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10015"><span 
class="cmtt-10">main&#8217;s</span>&#x00A0;<span 
class="cmtt-10">vars</span></a><a 
 name="PrTx213016"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">htf_com_rec*</span>&#x00A0;<span 
class="cmtt-10">htf_font_dir</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;<span 
class="cmtt-10">htf_com_rec</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13875--><p class="noindent" ><a 
 name="PrTx213017"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx14031"><span 
class="cmtt-10">get</span>&#x00A0;<span 
class="cmtt-10">htf</span>&#x00A0;<span 
class="cmtt-10">font</span>&#x00A0;<span 
class="cmtt-10">dir</span>&#x00A0;<span 
class="cmtt-10">from</span>&#x00A0;<span 
class="cmtt-10">com</span>&#x00A0;<span 
class="cmtt-10">ln</span></a><a 
 name="PrTx213018"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">com_dir(p);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">htf_com_rec</span>&#x00A0;<span 
class="cmtt-10">*q,</span>&#x00A0;<span 
class="cmtt-10">*t;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">q</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">m_alloc(</span>&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">htf_com_rec,</span>&#x00A0;<span 
class="cmtt-10">1);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">q-&#x003E;name</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">p+2;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">q-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;<span 
class="cmtt-10">htf_com_rec</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">htf_font_dir</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">t</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">htf_font_dir;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">t-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">t</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">t-&#x003E;next;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">t-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">q;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">htf_font_dir</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">q;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13882--><p class="noindent" ><a 
 href="#PrTx210003"  name="PrTx213019"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10009"><span 
class="cmtt-10">header functions</span></a><a 
 name="PrTx213020"  href="#PrTx220002"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">void</span>&#x00A0;<span 
class="cmtt-10">com_dir(</span>&#x00A0;<span 
class="cmtt-10">ARG_I(char*)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13893--><p class="noindent" ><a 
 href="#PrTx210005"  name="PrTx213021"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10011"><span 
class="cmtt-10">functions</span></a><a 
 name="PrTx213022"  href="#PrTx220004"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">void</span>&#x00A0;<span 
class="cmtt-10">com_dir</span><strong><span 
class="cmtt-10">(</span></strong><span 
class="cmtt-10">p)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">char*</span>&#x00A0;<span 
class="cmtt-10">p</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">;{</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">i;</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">str[256];</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">str,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">p+2</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">i</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">str)</span>&#x00A0;<span 
class="cmtt-10">-</span>&#x00A0;<span 
class="cmtt-10">1;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">str[i]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;!&#8217;</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">str[i]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>

      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13917--><p class="noindent" ><a 
 name="PrTx213023"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx213009"><span 
class="cmtt-10">search</span>&#x00A0;<span 
class="cmtt-10">htf</span>&#x00A0;<span 
class="cmtt-10">font</span>&#x00A0;<span 
class="cmtt-10">along</span>&#x00A0;<span 
class="cmtt-10">cmd</span>&#x00A0;<span 
class="cmtt-10">switches</span></a><a 
 name="PrTx213024"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">htf_com_rec</span>&#x00A0;<span 
class="cmtt-10">*p;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">htf_font_dir;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">search_file_base(name,</span>&#x00A0;<span 
class="cmtt-10">p-&#x003E;name,</span>&#x00A0;<span 
class="cmtt-10">READ_TEXT_FLAGS,</span>&#x00A0;<span 
class="cmtt-10">htf_dirs);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">tex4ht_fls</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">TRUE;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">break;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">p-&#x003E;next;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13925--><p class="noindent" ><a 
 href="#PrTx209013"  name="PrTx213025"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx3009"><span 
class="cmtt-10">h-defines</span></a><a 
 name="PrTx213026"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">HTFDIR</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 13927--><p class="noindent" >Example &#8216;  <span 
class="cmtt-10">#define HTFDIR "/n/gold/5/gurari/tex4ht-fonts.dir/"</span>&#8217;
</p>
    <h3 class="SectionHead">15.4 <a 
 href="tex4ht-c.html#QQ2-31-214"  name="QQ1-31-214">External File Cache</a></h3>
           <!--l. 13943--><p class="noindent" ><a 
 name="PrTx214001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx211005"><span 
class="cmtt-10">init</span>&#x00A0;<span 
class="cmtt-10">new</span>&#x00A0;<span 
class="cmtt-10">cache</span>&#x00A0;<span 
class="cmtt-10">list</span></a><a 
 name="PrTx214002"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;cache_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;<span 
class="cmtt-10">cache_file_rec</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13967--><p class="noindent" ><a 
 name="PrTx214003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx228023"><span 
class="cmtt-10">store filename in cache</span></a><a 
 name="PrTx214004"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">cache_file_rec</span>&#x00A0;<span 
class="cmtt-10">*file_rec,</span>&#x00A0;<span 
class="cmtt-10">*prev_file_rec;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">prev_file_rec</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;<span 
class="cmtt-10">cache_file_rec</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file_rec</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;cache_file;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">file_rec</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!gt_str(name,file_rec-&#x003E;file)</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">break;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">prev_file_rec</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">file_rec;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file_rec</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">file_rec-&#x003E;next;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">cache_file_rec</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;<span 
class="cmtt-10">file_entry;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">BOOL</span>&#x00A0;<span 
class="cmtt-10">flag;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">flag</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">TRUE;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">file_rec</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">eq_str(name,file_rec-&#x003E;file)</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">flag</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">FALSE;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">flag</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx214005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx214007"><span 
class="cmtt-10">insert file name</span></a><a 
 name="PrTx214006"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 13984--><p class="noindent" ><a 
 name="PrTx214007"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx214005"><span 
class="cmtt-10">insert</span>&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">name</span></a><a 
 name="PrTx214008"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">file_entry</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">m_alloc(struct</span>&#x00A0;<span 
class="cmtt-10">cache_file_rec,</span>&#x00A0;<span 
class="cmtt-10">1);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">file_entry-&#x003E;file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">m_alloc(char,</span>&#x00A0;<span 
class="cmtt-10">strlen(name)+1);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">file_entry-&#x003E;file,</span>&#x00A0;<span 
class="cmtt-10">name);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;cache_file</span>&#x00A0;<span 
class="cmtt-10">){</span>

      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;cache_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">file_entry;</span>
      <br /><!--x-->&#x00A0;&#x00A0;<span 
class="cmtt-10">file_entry-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;<span 
class="cmtt-10">cache_file_rec</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!prev_file_rec</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file_entry-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;cache_file;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;cache_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">file_entry;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file_entry-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">prev_file_rec-&#x003E;next;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">prev_file_rec-&#x003E;next</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">file_entry;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-215"  name="QQ1-31-215">Search File in Aux Cache from dot directories</a></h3>
<!--l. 13994--><p class="noindent" >The cache file holds directory names and file names. Directory names are preceded by a space, and file names start
at column one.
</p><div class="Verbatim"><span 
class="cmtt-10">&#x00A0;/usr/local/share/texmf/tex4ht/ht-fonts/iso8859/1/ae</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">ae.htf</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">aecsc.htf</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;/usr/local/share/texmf/tex4ht/ht-fonts/iso8859/1/cm</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">cmcsc.htf</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">cmr.htf</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;/usr/local/share/texmf/tex4ht/ht-fonts/unicode/cm</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">cmmi.htf</span><span 
class="cmtt-10">&#x00A0;</span>
<br /></div>
<!--l. 14009--><p class="indent" >    We traverse the auxiliary cache file, recording on the way the last found directory. Upon finding a match on file
name, we check the last recorded directory against the directories mentioned in the environment file. If a match is
found also there, we open the appropriate file.
</p>
      <!--l. 14031--><p class="indent" ><a 
 name="PrTx215001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx227005"><span 
class="cmtt-10">search font in cache files</span></a><a 
 name="PrTx215002"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">cache_dir[256],</span>&#x00A0;<span 
class="cmtt-10">dot_dir[256],</span>&#x00A0;<span 
class="cmtt-10">*p,</span>&#x00A0;<span 
class="cmtt-10">*q;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">BOOL</span>&#x00A0;<span 
class="cmtt-10">flag;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">n,</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">ch;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fseek(cache_files,</span>&#x00A0;<span 
class="cmtt-10">0L,</span>&#x00A0;<a 
 name="PrTx215003"  href="#PrTx205005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="tex4ht-cCh2.html#PrTx25013"><span 
class="cmtt-10">abs file addr</span></a><a 
 name="PrTx215004"  href="#PrTx215022"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">getc(cache_files);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">while</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">EOF</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;</span>&#x00A0;<span 
class="cmtt-10">&#8217;</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;<a 
 name="PrTx215005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx215013"><span 
class="cmtt-10">cache-dir = cache record</span></a><a 
 name="PrTx215006"><span 
class="cmtt-10">.&#x003E;</span></a>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;<a 
 name="PrTx215007"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx215017"><span 
class="cmtt-10">flag = (file == cache record)</span></a><a 
 name="PrTx215008"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">flag</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx215009"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx215019"><span 
class="cmtt-10">flag = (cache-dir == env-dir)</span></a><a 
 name="PrTx215010"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">flag</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<a 
 name="PrTx215011"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx215025"><span 
class="cmtt-10">open file and, if success, return</span></a><a 
 name="PrTx215012"><span 
class="cmtt-10">.&#x003E;</span></a>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">EOF</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">getc(cache_files);</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14043--><p class="noindent" ><a 
 name="PrTx215013"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx215005"><span 
class="cmtt-10">cache-dir</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cache</span>&#x00A0;<span 
class="cmtt-10">record</span></a><a 
 name="PrTx215014"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">q</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cache_dir;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">do</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*(q++)</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">getc(cache_files);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">(ch</span>&#x00A0;<span 
class="cmtt-10">!=&#8217;\n&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(ch</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">EOF)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">*(q-1</span>&#x00A0;<span 
class="cmtt-10">-</span>&#x00A0;<span 
class="cmtt-10">(*(q-2)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<a 
 name="PrTx215015"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx229011"><span 
class="cmtt-10">directory &#8217;/&#8217;</span></a><a 
 name="PrTx215016"  href="#PrTx215024"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">DOS_WIN32</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">-</span>&#x00A0;<span 
class="cmtt-10">(*(q-2)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;)</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>

           </p><!--l. 14054--><p class="noindent" ><a 
 name="PrTx215017"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx215007"><span 
class="cmtt-10">flag</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(file</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">cache</span>&#x00A0;<span 
class="cmtt-10">record)</span></a><a 
 name="PrTx215018"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">name;</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">flag</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">FALSE;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">*(p++)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">getc(cache_files);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(*(p-1)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">((ch</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;\n&#8217;)</span>&#x00A0;<span 
class="cmtt-10">||</span>&#x00A0;<span 
class="cmtt-10">(ch</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">EOF))</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">flag</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">TRUE;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">else{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">(ch</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\n&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(ch</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">EOF)</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">getc(cache_files);</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14080--><p class="noindent" ><a 
 name="PrTx215019"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx215009"><span 
class="cmtt-10">flag</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(cache-dir</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">env-dir)</span></a><a 
 name="PrTx215020"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">flag</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">FALSE;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fseek(dot_file,</span>&#x00A0;<span 
class="cmtt-10">0L,</span>&#x00A0;<a 
 name="PrTx215021"  href="#PrTx215003"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="tex4ht-cCh2.html#PrTx25013"><span 
class="cmtt-10">abs file addr</span></a><a 
 name="PrTx215022"  href="#PrTx216018"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">search_dot_file(</span>&#x00A0;<span 
class="cmtt-10">typ</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">!flag</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*q,</span>&#x00A0;<span 
class="cmtt-10">save_ch;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">n,</span>&#x00A0;<span 
class="cmtt-10">m;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">q</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">dot_dir;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">do</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*(q++)</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">getc(dot_file);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">(ch</span>&#x00A0;<span 
class="cmtt-10">!=&#8217;\n&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(ch</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">EOF)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">flag</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">*(q</span>&#x00A0;<span 
class="cmtt-10">-</span>&#x00A0;<span 
class="cmtt-10">2)</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;!&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">q</span>&#x00A0;<span 
class="cmtt-10">-=</span>&#x00A0;<span 
class="cmtt-10">(flag?</span>&#x00A0;<span 
class="cmtt-10">2</span>&#x00A0;<span 
class="cmtt-10">:</span>&#x00A0;<span 
class="cmtt-10">1);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*(q</span>&#x00A0;<span 
class="cmtt-10">-</span>&#x00A0;<span 
class="cmtt-10">(*(q-1)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<a 
 name="PrTx215023"  href="#PrTx215015"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx229011"><span 
class="cmtt-10">directory &#8217;/&#8217;</span></a><a 
 name="PrTx215024"  href="#PrTx229006"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">DOS_WIN32</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">-</span>&#x00A0;<span 
class="cmtt-10">(*(q-1)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;)</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(n</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">dot_dir))</span>&#x00A0;<span 
class="cmtt-10">&#x003E;</span>&#x00A0;<span 
class="cmtt-10">(m</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">cache_dir))</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">flag</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">FALSE;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">save_ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">*(cache_dir</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">n);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*(cache_dir</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">n)</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">flag</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">eq_str(dot_dir,cache_dir)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">flag</span>&#x00A0;<span 
class="cmtt-10">||</span>&#x00A0;<span 
class="cmtt-10">(m</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">n)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*(cache_dir</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">n)</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">save_ch;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14087--><p class="noindent" ><a 
 name="PrTx215025"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx215011"><span 
class="cmtt-10">open</span>&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">and,</span>&#x00A0;<span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">success,</span>&#x00A0;<span 
class="cmtt-10">return</span></a><a 
 name="PrTx215026"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">n</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">cache_dir);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">cache_dir[n]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">dir_path_slash(cache_dir);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">cache_dir[n+1]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcat((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">cache_dir,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">name);</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14095--><p class="noindent" ><a 
 name="PrTx215027"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx215027"><span 
class="cmtt-10">BROKEN</span></a><a 
 name="PrTx215028"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open(cache_dir,flags))</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">NULL</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">warn_i_str(</span>&#x00A0;<span 
class="cmtt-10">47,</span>&#x00A0;<span 
class="cmtt-10">cache_dir);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">file;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-216"  name="QQ1-31-216">Store New Auxiliary Cache</a></h3>
           <!--l. 14117--><p class="noindent" ><a 
 name="PrTx216001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh2.html#PrTx28027"><span 
class="cmtt-10">set</span>&#x00A0;<span 
class="cmtt-10">new</span>&#x00A0;<span 
class="cmtt-10">cache</span>&#x00A0;<span 
class="cmtt-10">file</span></a><a 
 name="PrTx216002"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">tex4ht_fls</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">FILE</span>&#x00A0;<span 
class="cmtt-10">*in_file,</span>&#x00A0;<span 
class="cmtt-10">*out_file;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">temp_file[256];</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx216003"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx216009"><span 
class="cmtt-10">set temp file</span></a><a 
 name="PrTx216004"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx216005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx216037"><span 
class="cmtt-10">backup cache file</span></a><a 
 name="PrTx216006"><span 
class="cmtt-10">.&#x003E;</span></a>

      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(out_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">fopen(tex4ht_fls_name,</span>&#x00A0;<span 
class="cmtt-10">WRITE_TEXT_FLAGS))</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">NULL</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">bad_in_file(tex4ht_fls_name);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(in_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">fopen(temp_file,</span>&#x00A0;<span 
class="cmtt-10">READ_TEXT_FLAGS))</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">NULL</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx216007"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx216039"><span 
class="cmtt-10">output into new cache</span></a><a 
 name="PrTx216008"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fclose(in_file);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fclose(out_file);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14129--><p class="noindent" ><a 
 name="PrTx216009"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx216003"><span 
class="cmtt-10">set</span>&#x00A0;<span 
class="cmtt-10">temp</span>&#x00A0;<span 
class="cmtt-10">file</span></a><a 
 name="PrTx216010"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">temp_file,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">job_name);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">temp_file[job_name_n]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">temp_file[job_name_n-1]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;p&#8217;;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">temp_file[job_name_n-2]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;m&#8217;;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">temp_file[job_name_n-3]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;t&#8217;;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14142--><p class="noindent" ><a 
 href="#PrTx211009"  name="PrTx216011"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10007"><span 
class="cmtt-10">vars</span></a><a 
 name="PrTx216012"  href="#PrTx216032"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">BOOL</span>&#x00A0;<span 
class="cmtt-10">tex4ht_fls</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">FALSE;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">*tex4ht_fls_name</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14150--><p class="noindent" ><a 
 name="PrTx216013"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx216013"><span 
class="cmtt-10">cat /</span></a><a 
 name="PrTx216014"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#if</span>&#x00A0;<span 
class="cmtt-10">defined(DOS_WIN32)</span>&#x00A0;<span 
class="cmtt-10">||</span>&#x00A0;<span 
class="cmtt-10">defined(__DJGPP__)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(is_forward_slash(files_cache)?</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">"/"</span>&#x00A0;<span 
class="cmtt-10">:</span>&#x00A0;<span 
class="cmtt-10">"\\"</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#else</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">"/"</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14168--><p class="noindent" ><a 
 name="PrTx216015"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh2.html#PrTx28007"><span 
class="cmtt-10">get</span>&#x00A0;<span 
class="cmtt-10">dir</span>&#x00A0;<span 
class="cmtt-10">of</span>&#x00A0;<span 
class="cmtt-10">tex4ht.fls</span></a><a 
 name="PrTx216016"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*p;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!tex4ht_fls_name</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">tex4ht_fls_name</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">files_cache;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fseek(dot_file,</span>&#x00A0;<span 
class="cmtt-10">0L,</span>&#x00A0;<a 
 name="PrTx216017"  href="#PrTx215021"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="tex4ht-cCh2.html#PrTx25013"><span 
class="cmtt-10">abs file addr</span></a><a 
 name="PrTx216018"  href="#PrTx219022"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">search_dot_file(</span>&#x00A0;<span 
class="cmtt-10">&#8217;l&#8217;</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">do</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*(p++)</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">getc(dot_file);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">(ch</span>&#x00A0;<span 
class="cmtt-10">!=&#8217;\n&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(ch</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">EOF)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p--;</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">p,</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">getenv("TEX4HTWR")?</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">"~~/tex4ht.fls"</span>&#x00A0;<span 
class="cmtt-10">:</span>&#x00A0;<span 
class="cmtt-10">"tex4ht.fls");</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx216019"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx216021"><span 
class="cmtt-10">relative tex4ht.fls addr</span></a><a 
 name="PrTx216020"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14175--><p class="noindent" ><a 
 name="PrTx216021"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx216019"><span 
class="cmtt-10">relative</span>&#x00A0;<span 
class="cmtt-10">tex4ht.fls</span>&#x00A0;<span 
class="cmtt-10">addr</span></a><a 
 name="PrTx216022"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">*tex4ht_fls_name</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;~&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">tex4ht_fls_name</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">abs_addr(tex4ht_fls_name,getenv("TEX4HTWR"));</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14190--><p class="noindent" ><a 
 name="PrTx216023"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx216023"><span 
class="cmtt-10">relative tex4ht.fls addrNO</span></a><a 
 name="PrTx216024"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">*tex4ht_fls_name</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;~&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx216025"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx216029"><span 
class="cmtt-10">fls temp var</span></a><a 
 name="PrTx216026"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">HOME_DIR</span>&#x00A0;<span 
class="cmtt-10">){</span>

      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">p,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">tex4ht_fls_name+1);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">sprintf(files_cache,"%s%s",</span>&#x00A0;<span 
class="cmtt-10">HOME_DIR,</span>&#x00A0;<span 
class="cmtt-10">p);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">files_cache,</span>&#x00A0;<span 
class="cmtt-10">"tex4ht.fls");</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">tex4ht_fls_name</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">files_cache;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14194--><p class="noindent" ><a 
 name="PrTx216027"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh2.html#PrTx28005"><span 
class="cmtt-10">fls</span>&#x00A0;<span 
class="cmtt-10">var</span></a><a 
 name="PrTx216028"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">files_cache[PATH_MAX];</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14198--><p class="noindent" ><a 
 name="PrTx216029"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx216025"><span 
class="cmtt-10">fls</span>&#x00A0;<span 
class="cmtt-10">temp</span>&#x00A0;<span 
class="cmtt-10">var</span></a><a 
 name="PrTx216030"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">p[PATH_MAX];</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14202--><p class="noindent" ><a 
 href="#PrTx216011"  name="PrTx216031"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10007"><span 
class="cmtt-10">vars</span></a><a 
 name="PrTx216032"  href="#PrTx216060"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*HOME_DIR;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14206--><p class="noindent" ><a 
 href="tex4ht-cCh14.html#PrTx195025"  name="PrTx216033"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10025"><span 
class="cmtt-10">main&#8217;s</span>&#x00A0;<span 
class="cmtt-10">init</span></a><a 
 name="PrTx216034"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">HOME_DIR</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">getenv("HOME");</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 14208--><p class="noindent" >We might want more than one version of &#8216;<span 
class="cmtt-10">tex4ht.fls</span>&#8217;, for different combinations of subtrees of htf
fonts.
</p>
      <!--l. 14215--><p class="indent" ><a 
 name="PrTx216035"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx14033"><span 
class="cmtt-10">get</span>&#x00A0;<span 
class="cmtt-10">tex4ht.fls</span>&#x00A0;<span 
class="cmtt-10">from</span>&#x00A0;<span 
class="cmtt-10">com</span>&#x00A0;<span 
class="cmtt-10">ln</span></a><a 
 name="PrTx216036"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">tex4ht_fls_name</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">p+2;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14232--><p class="noindent" ><a 
 name="PrTx216037"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx216005"><span 
class="cmtt-10">backup</span>&#x00A0;<span 
class="cmtt-10">cache</span>&#x00A0;<span 
class="cmtt-10">file</span></a><a 
 name="PrTx216038"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(out_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">fopen(temp_file,</span>&#x00A0;<span 
class="cmtt-10">WRITE_TEXT_FLAGS))</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">NULL</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">bad_in_file(temp_file);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(in_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">fopen(tex4ht_fls_name,</span>&#x00A0;<span 
class="cmtt-10">READ_TEXT_FLAGS))</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">NULL</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">ch;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">(ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">getc(in_file))</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">EOF</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">putc(</span>&#x00A0;<span 
class="cmtt-10">ch,</span>&#x00A0;<span 
class="cmtt-10">out_file</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fclose(in_file);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fclose(out_file);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14262--><p class="noindent" ><a 
 name="PrTx216039"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx216007"><span 
class="cmtt-10">output</span>&#x00A0;<span 
class="cmtt-10">into</span>&#x00A0;<span 
class="cmtt-10">new</span>&#x00A0;<span 
class="cmtt-10">cache</span></a><a 
 name="PrTx216040"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">dir[255],</span>&#x00A0;<span 
class="cmtt-10">prev_dir[255],</span>&#x00A0;<span 
class="cmtt-10">file[255],</span>&#x00A0;<span 
class="cmtt-10">*p;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">ch;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">BOOL</span>&#x00A0;<span 
class="cmtt-10">is_dir;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">cache_file_rec</span>&#x00A0;<span 
class="cmtt-10">*file_rec,</span>&#x00A0;<span 
class="cmtt-10">*prev_file_rec;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">cur_cache_font</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cache_font;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;n&#8217;;</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">prev_dir[0]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">EOF</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">getc(in_file);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">is_dir</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(ch</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;</span>&#x00A0;<span 
class="cmtt-10">&#8217;);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">is_dir?</span>&#x00A0;<span 
class="cmtt-10">dir</span>&#x00A0;<span 
class="cmtt-10">:</span>&#x00A0;<span 
class="cmtt-10">file;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\n&#8217;</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">EOF</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">break;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;</span>&#x00A0;<span 
class="cmtt-10">&#8217;</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;<span 
class="cmtt-10">*p++</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">ch;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">getc(in_file);</span>

      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">is_dir</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(dir[0]</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx216041"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx216047"><span 
class="cmtt-10">output smaller internal directories</span></a><a 
 name="PrTx216042"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fprintf(out_file,"</span>&#x00A0;<span 
class="cmtt-10">%s\n",</span>&#x00A0;<span 
class="cmtt-10">dir);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">prev_dir,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">dir);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!is_dir</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(file[0]</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx216043"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx216053"><span 
class="cmtt-10">output smaller internal files</span></a><a 
 name="PrTx216044"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fprintf(out_file,"%s\n",</span>&#x00A0;<span 
class="cmtt-10">file);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<a 
 name="PrTx216045"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx216055"><span 
class="cmtt-10">output remainder of internal cache</span></a><a 
 name="PrTx216046"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14272--><p class="noindent" ><a 
 name="PrTx216047"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx216041"><span 
class="cmtt-10">output</span>&#x00A0;<span 
class="cmtt-10">smaller</span>&#x00A0;<span 
class="cmtt-10">internal</span>&#x00A0;<span 
class="cmtt-10">directories</span></a><a 
 name="PrTx216048"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;<span 
class="cmtt-10">cache_font_rec</span>&#x00A0;<span 
class="cmtt-10">*)0</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">gt_str(dir,cur_cache_font-&#x003E;dir)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx216049"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx216051"><span 
class="cmtt-10">cache directory in external memory</span></a><a 
 name="PrTx216050"  href="#PrTx216058"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">break;</span>
      <br /><!--x-->&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_cache_font</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;next;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14290--><p class="noindent" ><a 
 name="PrTx216051"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx216049"><span 
class="cmtt-10">cache</span>&#x00A0;<span 
class="cmtt-10">directory</span>&#x00A0;<span 
class="cmtt-10">in</span>&#x00A0;<span 
class="cmtt-10">external</span>&#x00A0;<span 
class="cmtt-10">memory</span></a><a 
 name="PrTx216052"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">file_rec</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;cache_file;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">file_rec</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!eq_str(</span>&#x00A0;<span 
class="cmtt-10">prev_dir,</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;dir)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fprintf(out_file,</span>&#x00A0;<span 
class="cmtt-10">"</span>&#x00A0;<span 
class="cmtt-10">%s\n",</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;dir);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">prev_dir,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">dir);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;cache_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;<span 
class="cmtt-10">cache_file_rec</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">file_rec</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">prev_file_rec</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">file_rec;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file_rec</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">file_rec-&#x003E;next;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fprintf(out_file,</span>&#x00A0;<span 
class="cmtt-10">"%s\n",</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">prev_file_rec-&#x003E;file);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">free((void</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">prev_file_rec</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14311--><p class="noindent" ><a 
 name="PrTx216053"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx216043"><span 
class="cmtt-10">output</span>&#x00A0;<span 
class="cmtt-10">smaller</span>&#x00A0;<span 
class="cmtt-10">internal</span>&#x00A0;<span 
class="cmtt-10">files</span></a><a 
 name="PrTx216054"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;<span 
class="cmtt-10">cache_font_rec</span>&#x00A0;<span 
class="cmtt-10">*)0</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">eq_str(dir,cur_cache_font-&#x003E;dir)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file_rec</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;cache_file;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">file_rec</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">gt_str(file_rec-&#x003E;file,file)</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">break;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">gt_str(file,file_rec-&#x003E;file)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fprintf(out_file,</span>&#x00A0;<span 
class="cmtt-10">"%s\n",</span>&#x00A0;<span 
class="cmtt-10">file_rec-&#x003E;file);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">prev_file_rec</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">file_rec;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file_rec</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">file_rec-&#x003E;next;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">free((void</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">prev_file_rec</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;cache_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">file_rec;</span>
      <br /><!--x-->&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>

           </p><!--l. 14320--><p class="noindent" ><a 
 name="PrTx216055"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx216045"><span 
class="cmtt-10">output</span>&#x00A0;<span 
class="cmtt-10">remainder</span>&#x00A0;<span 
class="cmtt-10">of</span>&#x00A0;<span 
class="cmtt-10">internal</span>&#x00A0;<span 
class="cmtt-10">cache</span></a><a 
 name="PrTx216056"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;<span 
class="cmtt-10">cache_font_rec</span>&#x00A0;<span 
class="cmtt-10">*)0</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx216057"  href="#PrTx216049"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx216051"><span 
class="cmtt-10">cache directory in external memory</span></a><a 
 name="PrTx216058"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cur_cache_font</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">cur_cache_font-&#x003E;next;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14333--><p class="noindent" ><a 
 href="#PrTx216031"  name="PrTx216059"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10007"><span 
class="cmtt-10">vars</span></a><a 
 name="PrTx216060"  href="#PrTx221002"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;<span 
class="cmtt-10">cache_files;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14337--><p class="noindent" ><a 
 name="PrTx216061"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh2.html#PrTx28009"><span 
class="cmtt-10">open</span>&#x00A0;<span 
class="cmtt-10">old</span>&#x00A0;<span 
class="cmtt-10">cache</span>&#x00A0;<span 
class="cmtt-10">file</span></a><a 
 name="PrTx216062"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">cache_files</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open(tex4ht_fls_name,</span>&#x00A0;<span 
class="cmtt-10">READ_BIN_FLAGS);</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14341--><p class="noindent" ><a 
 name="PrTx216063"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh2.html#PrTx28025"><span 
class="cmtt-10">close</span>&#x00A0;<span 
class="cmtt-10">old</span>&#x00A0;<span 
class="cmtt-10">cache</span>&#x00A0;<span 
class="cmtt-10">file</span></a><a 
 name="PrTx216064"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">cache_files</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">(FILE</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fclose(cache_files);</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SectionHead">15.5 <a 
 href="tex4ht-c.html#QQ2-31-217"  name="QQ1-31-217">Export TEX4HTFONTSET for kpathsea</a></h3>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-218"  name="QQ1-31-218">Background</a></h3>
<!--l. 14359--><p class="noindent" >A system call similar to &#8216;<span 
class="cmtt-10">TEX4HTFONTSET={...}; export TEX4HTFONTSET</span>&#8217; is issued for ordering searches of htf
fonts by kpathsea.
</p><!--l. 14363--><p class="indent" >    The system call assumes a pattern of the form &#8216;<span 
class="cmtt-10">.....%%12...</span>&#8217; in the argument -DTEX4HTFONTSET
provided to the compilation of tex4ht. If none is provided, a default pattern is assumed.
</p><!--l. 14367--><p class="indent" >    To allow also opposite order of search, the code should modify to answer also for patterns of the form
&#8216;<span 
class="cmtt-10">.....%%21...</span>&#8217;.
</p><div class="Verbatim"><span 
class="cmtt-10">The</span><span 
class="cmtt-10">&#x00A0;i-records</span><span 
class="cmtt-10">&#x00A0;(provided</span><span 
class="cmtt-10">&#x00A0;e.g.,</span><span 
class="cmtt-10">&#x00A0;in</span><span 
class="cmtt-10">&#x00A0;tex4ht.env)</span><span 
class="cmtt-10">&#x00A0;are</span><span 
class="cmtt-10">&#x00A0;assumed</span><span 
class="cmtt-10">&#x00A0;to</span><span 
class="cmtt-10">&#x00A0;refer</span><span 
class="cmtt-10">&#x00A0;to</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">paths</span><span 
class="cmtt-10">&#x00A0;relative</span><span 
class="cmtt-10">&#x00A0;to</span><span 
class="cmtt-10">&#x00A0;the</span><span 
class="cmtt-10">&#x00A0;ht-fonts</span><span 
class="cmtt-10">&#x00A0;directory.</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;If</span><span 
class="cmtt-10">&#x00A0;a</span><span 
class="cmtt-10">&#x00A0;record</span><span 
class="cmtt-10">&#x00A0;happens</span><span 
class="cmtt-10">&#x00A0;to</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">include</span><span 
class="cmtt-10">&#x00A0;the</span><span 
class="cmtt-10">&#x00A0;substring</span><span 
class="cmtt-10">&#x00A0;&#8216;/ht-fonts/&#8217;,</span><span 
class="cmtt-10">&#x00A0;then</span><span 
class="cmtt-10">&#x00A0;only</span><span 
class="cmtt-10">&#x00A0;the</span><span 
class="cmtt-10">&#x00A0;portion</span><span 
class="cmtt-10">&#x00A0;that</span><span 
class="cmtt-10">&#x00A0;follows</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">that</span><span 
class="cmtt-10">&#x00A0;substring</span><span 
class="cmtt-10">&#x00A0;is</span><span 
class="cmtt-10">&#x00A0;considered.</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">For</span><span 
class="cmtt-10">&#x00A0;instance,</span><span 
class="cmtt-10">&#x00A0;the</span><span 
class="cmtt-10">&#x00A0;records</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;i~/tex4ht.dir/ht-fonts/iso8859/1/!</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;i~/tex4ht.dir/ht-fonts/alias/!</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">are</span><span 
class="cmtt-10">&#x00A0;equivalent</span><span 
class="cmtt-10">&#x00A0;to</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;iiso8859/1</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;ialias</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">If</span><span 
class="cmtt-10">&#x00A0;i-records</span><span 
class="cmtt-10">&#x00A0;are</span><span 
class="cmtt-10">&#x00A0;not</span><span 
class="cmtt-10">&#x00A0;provided,</span><span 
class="cmtt-10">&#x00A0;a</span><span 
class="cmtt-10">&#x00A0;ht-like</span><span 
class="cmtt-10">&#x00A0;script</span><span 
class="cmtt-10">&#x00A0;may</span><span 
class="cmtt-10">&#x00A0;contain</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">a</span><span 
class="cmtt-10">&#x00A0;call</span><span 
class="cmtt-10">&#x00A0;similar</span><span 
class="cmtt-10">&#x00A0;to</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;test</span><span 
class="cmtt-10">&#x00A0;-z</span><span 
class="cmtt-10">&#x00A0;"$3"</span><span 
class="cmtt-10">&#x00A0;||</span><span 
class="cmtt-10">&#x00A0;TEX4HTFONTSET=$3;export</span><span 
class="cmtt-10">&#x00A0;TEX4HTFONTSET</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">on</span><span 
class="cmtt-10">&#x00A0;unix</span><span 
class="cmtt-10">&#x00A0;and</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;set</span><span 
class="cmtt-10">&#x00A0;TEX4HTFONTSET={%%12}</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">on</span><span 
class="cmtt-10">&#x00A0;windows.</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">In</span><span 
class="cmtt-10">&#x00A0;texmf.cnf:</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;TEX4HTFONTSET=iso8859/1,alias</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>

<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;TEX4HTFONTSET={iso8859/1,alias};</span><span 
class="cmtt-10">&#x00A0;export</span><span 
class="cmtt-10">&#x00A0;TEX4HTFONTSET</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;set</span><span 
class="cmtt-10">&#x00A0;TEX4HTFONTSET={iso8859/1,alias}</span><span 
class="cmtt-10">&#x00A0;</span>
<br /></div>
<!--l. 14408--><p class="indent" >    The user has two options of hand-made entries: i-records and exportation. Tex4ht assumes the following priority
schema:
</p><!--l. 14412--><p class="indent" >
</p><ol type="1" >
<li>Entries provided in i-records (e.g., within tex4ht.env) </li>
<li>Entries exported by TEX4HTFONTSET from scripts (e.g., in htlatex) </li>
<li>Entries hard wired in TEX4HTFONTSET within texmf.cnf (In such a case, i-records should not be provided. That
is, in the default setting, i-records should not be provided in tex4ht.env, within tex4ht.c, or over tex4ht.c (in the
ht... scripts). Users may add such records, but the default installations should not contain i-records.)
</li></ol>
<!--l. 14425--><p class="indent" >    xputenv() is a kpathsea routine for writing environment variables
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-219"  name="QQ1-31-219">Collect Information</a></h3>
           <!--l. 14460--><p class="noindent" ><a 
 name="PrTx219001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx11013"><span 
class="cmtt-10">export</span>&#x00A0;<span 
class="cmtt-10">TEX4HTFONTSET</span></a><a 
 name="PrTx219002"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">str</span>&#x00A0;<span 
class="cmtt-10">[256],</span>&#x00A0;<span 
class="cmtt-10">*export_str,</span>&#x00A0;<span 
class="cmtt-10">*postfix;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">export_str</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">m_alloc(char,</span>&#x00A0;<span 
class="cmtt-10">1);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*export_str</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx219003"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx219019"><span 
class="cmtt-10">set the exported list</span></a><a 
 name="PrTx219004"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str)</span>&#x00A0;<span 
class="cmtt-10">&#x003E;</span>&#x00A0;<span 
class="cmtt-10">0</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">str,</span>&#x00A0;<span 
class="cmtt-10">"%%12");</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">export_str</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">r_alloc((void</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str,</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str)</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">str)</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">1</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">postfix</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">str</span>&#x00A0;<span 
class="cmtt-10">-</span>&#x00A0;<span 
class="cmtt-10">1;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">*(++postfix)</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(*postfix==&#8217;%&#8217;)</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(*(postfix+1)==&#8217;%&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(*(postfix+2)==&#8217;1&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(*(postfix+3)==&#8217;2&#8217;)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*postfix=&#8217;\0&#8217;;</span>&#x00A0;<span 
class="cmtt-10">postfix</span>&#x00A0;<span 
class="cmtt-10">+=</span>&#x00A0;<span 
class="cmtt-10">4;</span>&#x00A0;<span 
class="cmtt-10">break;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str)</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">0</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx219005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx219013"><span 
class="cmtt-10">insert export into pattern</span></a><a 
 name="PrTx219006"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx219007"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx219015"><span 
class="cmtt-10">system call for export</span></a><a 
 name="PrTx219008"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx219009"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx221007"><span 
class="cmtt-10">recording TEX4HTFONTSET</span></a><a 
 name="PrTx219010"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">free((void</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx219011"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx222001"><span 
class="cmtt-10">debug info about TEX4HTFONTSET</span></a><a 
 name="PrTx219012"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14480--><p class="noindent" ><a 
 name="PrTx219013"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx219005"><span 
class="cmtt-10">insert</span>&#x00A0;<span 
class="cmtt-10">export</span>&#x00A0;<span 
class="cmtt-10">into</span>&#x00A0;<span 
class="cmtt-10">pattern</span></a><a 
 name="PrTx219014"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">*from_ch;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">i,</span>&#x00A0;<span 
class="cmtt-10">n,</span>&#x00A0;<span 
class="cmtt-10">m;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">n</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">str);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">m</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">from_ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">export_str</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">m;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">for(</span>&#x00A0;<span 
class="cmtt-10">i</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">0;</span>&#x00A0;<span 
class="cmtt-10">i&#x003C;=m;</span>&#x00A0;<span 
class="cmtt-10">i++){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*(from_ch</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">n)</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">*(from_ch);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">from_ch--;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">for(</span>&#x00A0;<span 
class="cmtt-10">i</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">0;</span>&#x00A0;<span 
class="cmtt-10">i&#x003C;n;</span>&#x00A0;<span 
class="cmtt-10">i++){</span>

      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">export_str[i]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">str[i];</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcat((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">postfix);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 14482--><p class="noindent" >An entry similar to the following one is assumed in texmf.cnf.
</p><div class="Verbatim"><span 
class="cmtt-10">TEX4HTINPUTS=.;$TEXMF/tex4ht/base//;$TEXMF/tex4ht/ht-fonts/{$TEX4HTFONTSET}//</span><span 
class="cmtt-10">&#x00A0;</span>
<br /></div>
      <!--l. 14505--><p class="indent" ><a 
 name="PrTx219015"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx219007"><span 
class="cmtt-10">system</span>&#x00A0;<span 
class="cmtt-10">call</span>&#x00A0;<span 
class="cmtt-10">for</span>&#x00A0;<span 
class="cmtt-10">export</span></a><a 
 name="PrTx219016"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;<span 
class="cmtt-10">q;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_htf_search</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*p,</span>&#x00A0;<span 
class="cmtt-10">*q;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx219017"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx222007"><span 
class="cmtt-10">trace TEX4HTFONTSET</span></a><a 
 name="PrTx219018"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">q</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">kpse_var_value(</span>&#x00A0;<span 
class="cmtt-10">"TEX4HTFONTSET"</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">q</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">xputenv("TEX4HTFONTSET",</span>&#x00A0;<span 
class="cmtt-10">export_str);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_htf_search</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("setting</span>&#x00A0;<span 
class="cmtt-10">TEX4HTFONTSET={%s}\n",</span>&#x00A0;<span 
class="cmtt-10">export_str);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_htf_search</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">warn_i_str(</span>&#x00A0;<span 
class="cmtt-10">50,</span>&#x00A0;<span 
class="cmtt-10">"TEX4HTFONTSET</span>&#x00A0;<span 
class="cmtt-10">for</span>&#x00A0;<span 
class="cmtt-10">kpathsea"</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 14512--><p class="noindent" >
</p><ul >
<li>in the directories stated within &#8216;-i&#8217; switches of the tex4ht command line </li>
<li>in the directories specified within &#8216;i&#8217; records of the env file </li>
<li>in a directory compiled into tex4ht during its compilation </li></ul>
      <!--l. 14548--><p class="indent" ><a 
 name="PrTx219019"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx219003"><span 
class="cmtt-10">set</span>&#x00A0;<span 
class="cmtt-10">the</span>&#x00A0;<span 
class="cmtt-10">exported</span>&#x00A0;<span 
class="cmtt-10">list</span></a><a 
 name="PrTx219020"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">htf_com_rec</span>&#x00A0;<span 
class="cmtt-10">*q;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">q</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">htf_font_dir;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">q</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">(struct</span>&#x00A0;<span 
class="cmtt-10">htf_com_rec</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">str,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">q-&#x003E;name);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">export_htf(</span>&#x00A0;<span 
class="cmtt-10">&amp;export_str,</span>&#x00A0;<span 
class="cmtt-10">str</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">q</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">q-&#x003E;next;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fseek(dot_file,</span>&#x00A0;<span 
class="cmtt-10">0L,</span>&#x00A0;<a 
 name="PrTx219021"  href="#PrTx216017"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="tex4ht-cCh2.html#PrTx25013"><span 
class="cmtt-10">abs file addr</span></a><a 
 name="PrTx219022"  href="#PrTx227008"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">while</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">search_dot_file(</span>&#x00A0;<span 
class="cmtt-10">&#8217;i&#8217;</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">ch;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">char*</span>&#x00A0;<span 
class="cmtt-10">p;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">str;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">do</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">getc(dot_file);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">EOF)</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;<span 
class="cmtt-10">*(p++)</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">ch;}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">(ch</span>&#x00A0;<span 
class="cmtt-10">!=&#8217;\n&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(ch</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">EOF)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">export_htf(</span>&#x00A0;<span 
class="cmtt-10">&amp;export_str,</span>&#x00A0;<span 
class="cmtt-10">str</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">HTFDIR</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">str,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">HTFDIR);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">export_htf(</span>&#x00A0;<span 
class="cmtt-10">&amp;export_str,</span>&#x00A0;<span 
class="cmtt-10">str</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>

      <br /><!--x-->&#x00A0;<a 
 name="PrTx219023"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx219025"><span 
class="cmtt-10">pre assigned TEX4HTFONTSET</span></a><a 
 name="PrTx219024"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14564--><p class="noindent" ><a 
 name="PrTx219025"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx219023"><span 
class="cmtt-10">pre</span>&#x00A0;<span 
class="cmtt-10">assigned</span>&#x00A0;<span 
class="cmtt-10">TEX4HTFONTSET</span></a><a 
 name="PrTx219026"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;<span 
class="cmtt-10">q;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">q</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">kpse_var_value(</span>&#x00A0;<span 
class="cmtt-10">"TEX4HTFONTSET"</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">q</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">q)</span>&#x00A0;<span 
class="cmtt-10">&#x003E;</span>&#x00A0;<span 
class="cmtt-10">0</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">export_str</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">r_alloc((void</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str,</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str)</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">q)</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">2);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str)</span>&#x00A0;<span 
class="cmtt-10">&#x003E;</span>&#x00A0;<span 
class="cmtt-10">0</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcat((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str,</span>&#x00A0;<span 
class="cmtt-10">",");</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcat((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">q);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-220"  name="QQ1-31-220">Appending a Segment</a></h3>
           <!--l. 14575--><p class="noindent" ><a 
 href="#PrTx213019"  name="PrTx220001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10009"><span 
class="cmtt-10">header functions</span></a><a 
 name="PrTx220002"  href="#PrTx227002"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">void</span>&#x00A0;<span 
class="cmtt-10">export_htf(</span>&#x00A0;<span 
class="cmtt-10">ARG_II(char**,</span>&#x00A0;<span 
class="cmtt-10">char[])</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14616--><p class="noindent" ><a 
 href="#PrTx213021"  name="PrTx220003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10011"><span 
class="cmtt-10">functions</span></a><a 
 name="PrTx220004"  href="#PrTx227004"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">void</span>&#x00A0;<span 
class="cmtt-10">export_htf</span><strong><span 
class="cmtt-10">(</span></strong><span 
class="cmtt-10">export_str,</span>&#x00A0;<span 
class="cmtt-10">str)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">char**</span>&#x00A0;<span 
class="cmtt-10">export_str</span>&#x00A0;<strong><span 
class="cmtt-10">;</span></strong>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">str[]</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">;{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">i;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">char*</span>&#x00A0;<span 
class="cmtt-10">p;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">BOOL</span>&#x00A0;<span 
class="cmtt-10">found;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">i</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">str)</span>&#x00A0;<span 
class="cmtt-10">-</span>&#x00A0;<span 
class="cmtt-10">1;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">(i&#x003E;=0)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(str[i]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;\n&#8217;)</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">str[i--]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">(i&#x003E;=0)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(str[i]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;</span>&#x00A0;<span 
class="cmtt-10">&#8217;)</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">str[i--]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(i&#x003E;=0)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(str[i]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;!&#8217;)</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">str[i--]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(i&#x003E;=0)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">((str[i]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;)</span>&#x00A0;<span 
class="cmtt-10">||</span>&#x00A0;<span 
class="cmtt-10">(str[i]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;\\&#8217;))</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">str[i--]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">i</span>&#x00A0;<span 
class="cmtt-10">-=</span>&#x00A0;<span 
class="cmtt-10">8;</span>&#x00A0;<span 
class="cmtt-10">found</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">FALSE;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">--i&#x003E;=0</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">((str[i]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;)</span>&#x00A0;<span 
class="cmtt-10">||</span>&#x00A0;<span 
class="cmtt-10">(str[i]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;\\&#8217;))</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(str[i+1]==</span>&#x00A0;<span 
class="cmtt-10">&#8217;h&#8217;)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(str[i+2]==&#8217;t&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(str[i+3]==&#8217;-&#8217;)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(str[i+4]==&#8217;f&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(str[i+5]==&#8217;o&#8217;)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(str[i+6]==&#8217;n&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(str[i+7]==&#8217;t&#8217;)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(str[i+8]==&#8217;s&#8217;)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">((str[i+9]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;)</span>&#x00A0;<span 
class="cmtt-10">||</span>&#x00A0;<span 
class="cmtt-10">(str[i+9]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;\\&#8217;))</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">str</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">i</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">10;</span>&#x00A0;<span 
class="cmtt-10">i=0;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">*p</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">str[i++]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">*(p++);</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">str[i]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">found</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">TRUE;</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">break;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">found</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*export_str</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">r_alloc((void</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">*export_str,</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">*export_str)</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">str)</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">2</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">*export_str)</span>&#x00A0;<span 
class="cmtt-10">&#x003E;</span>&#x00A0;<span 
class="cmtt-10">0</span>&#x00A0;<span 
class="cmtt-10">){</span>

      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcat((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">*export_str,</span>&#x00A0;<span 
class="cmtt-10">",");</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcat((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">*export_str,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">str);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-221"  name="QQ1-31-221">Recording TEX4HTFONTSET</a></h3>
<!--l. 14628--><p class="noindent" >Kpathsea ignores the under ht-fonts paths requests coming from tex4ht.c, exported like in
&#8216;<span 
class="cmtt-10">TEX4HTFONTSET={mozilla,iso8859/1,alias,unicode}</span>&#8217;. So tex4ht.c lets kpathsea find whatever path it likes, such
as
</p><div class="Verbatim"><span 
class="cmtt-10">/n/gold/5/gurari/tex4ht.dir/texmf/tex4ht/ht-fonts/iso8859/1/cm/cmr.htf</span><span 
class="cmtt-10">&#x00A0;</span>
<br /></div>
<!--l. 14636--><p class="indent" >    and then tex4ht.c tries to fix the path based on the information it collected for TEX4HTFONTSET,
</p><div class="Verbatim"><span 
class="cmtt-10">/n/gold/5/gurari/tex4ht.dir/texmf/tex4ht/ht-fonts/unicode/cm/cmr.htf</span><span 
class="cmtt-10">&#x00A0;</span>
<br /></div>
<!--l. 14644--><p class="indent" >    To that end, tex4ht.c breaks the first approximation to head &#8216;<span 
class="cmtt-10">.../ht-fonts/</span>&#8217; and tail &#8216;<span 
class="cmtt-10">....htf</span>&#8217;, while
removing the path segment &#8216;<span 
class="cmtt-10">iso8859</span>&#8217; just after &#8216;<span 
class="cmtt-10">ht-fonts/</span>&#8217;.
</p><!--l. 14648--><p class="indent" >    Then, tex4ht.c tries the intermediate path segments from &#8216;<span 
class="cmtt-10">TEX4HTFONTSET={mozilla,iso8859/1,alias,unicode}</span>&#8217;,
possibly with removing prefixes from tail.
</p>
      <!--l. 14658--><p class="indent" ><a 
 href="#PrTx216059"  name="PrTx221001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10007"><span 
class="cmtt-10">vars</span></a><a 
 name="PrTx221002"  href="#PrTx225002"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;<span 
class="cmtt-10">export_str_chars</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14665--><p class="noindent" ><a 
 href="#PrTx210015"  name="PrTx221003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh2.html#PrTx28003"><span 
class="cmtt-10">scan</span>&#x00A0;<span 
class="cmtt-10">fonts</span>&#x00A0;<span 
class="cmtt-10">vars</span></a><a 
 name="PrTx221004"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;<a 
 name="PrTx221005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx221009"><span 
class="cmtt-10">scan kpathsea vars</span></a><a 
 name="PrTx221006"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14677--><p class="noindent" ><a 
 name="PrTx221007"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx219009"><span 
class="cmtt-10">recording</span>&#x00A0;<span 
class="cmtt-10">TEX4HTFONTSET</span></a><a 
 name="PrTx221008"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">n;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">n</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">n</span>&#x00A0;<span 
class="cmtt-10">&#x003E;</span>&#x00A0;<span 
class="cmtt-10">0</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">export_str_chars</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">m_alloc(char,</span>&#x00A0;<span 
class="cmtt-10">n+1);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str_chars,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14683--><p class="noindent" ><a 
 name="PrTx221009"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx221005"><span 
class="cmtt-10">scan</span>&#x00A0;<span 
class="cmtt-10">kpathsea</span>&#x00A0;<span 
class="cmtt-10">vars</span></a><a 
 name="PrTx221010"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">cardinality=0;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">**</span>&#x00A0;<span 
class="cmtt-10">fontset=0;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14692--><p class="noindent" ><a 
 name="PrTx221011"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh2.html#PrTx28015"><span 
class="cmtt-10">start</span>&#x00A0;<span 
class="cmtt-10">loading</span>&#x00A0;<span 
class="cmtt-10">fonts</span></a><a 
 name="PrTx221012"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">export_str_chars</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx221013"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx221017"><span 
class="cmtt-10">decompose TEX4HTFONTSET</span></a><a 
 name="PrTx221014"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14703--><p class="noindent" ><a 
 href="tex4ht-cCh12.html#PrTx183003"  name="PrTx221015"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh2.html#PrTx28023"><span 
class="cmtt-10">end</span>&#x00A0;<span 
class="cmtt-10">loading</span>&#x00A0;<span 
class="cmtt-10">fonts</span></a><a 
 name="PrTx221016"  href="tex4ht-cCh16.html#PrTx240010"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;

      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">export_str_chars</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">free((void</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str_chars);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">free((void</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">fontset);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14723--><p class="noindent" ><a 
 name="PrTx221017"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx221013"><span 
class="cmtt-10">decompose</span>&#x00A0;<span 
class="cmtt-10">TEX4HTFONTSET</span></a><a 
 name="PrTx221018"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*p;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">n;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">cardinality</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">1;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str_chars;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">*p</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">*p</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;,&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">cardinality++;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p++;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">fontset</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">m_alloc(char</span>&#x00A0;<span 
class="cmtt-10">*,</span>&#x00A0;<span 
class="cmtt-10">cardinality);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">export_str_chars;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">fontset[0]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">p;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">n=1;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">*p</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">*p</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;,&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">fontset[n++]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">p+1;</span>&#x00A0;<span 
class="cmtt-10">*p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p++;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14733--><p class="noindent" ><a 
 name="PrTx221019"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx225007"><span 
class="cmtt-10">correct htfname</span></a><a 
 name="PrTx221020"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;<span 
class="cmtt-10">head,</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;<span 
class="cmtt-10">tail,</span>&#x00A0;<span 
class="cmtt-10">*p;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">n;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx221021"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx221025"><span 
class="cmtt-10">decompose htfname</span></a><a 
 name="PrTx221022"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">htfname</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">(U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx221023"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx221027"><span 
class="cmtt-10">try alternative htfname</span></a><a 
 name="PrTx221024"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14753--><p class="noindent" ><a 
 name="PrTx221025"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx221021"><span 
class="cmtt-10">decompose</span>&#x00A0;<span 
class="cmtt-10">htfname</span></a><a 
 name="PrTx221026"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">n</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">htfname);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">tail</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">head</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">m_alloc(char,</span>&#x00A0;<span 
class="cmtt-10">n+1);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">head,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">htfname);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">n&#x003E;11</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(*tail==&#8217;\\&#8217;)</span>&#x00A0;<span 
class="cmtt-10">||</span>&#x00A0;<span 
class="cmtt-10">(*tail==&#8217;/&#8217;)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(*tail</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">*(tail+9))</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(*(tail+1)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;h&#8217;)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(*(tail+2)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;t&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(*(tail+3)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;-&#8217;)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(*(tail+4)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;f&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(*(tail+5)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;o&#8217;)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(*(tail+6)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;n&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(*(tail+7)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;t&#8217;)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(*(tail+8)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;s&#8217;)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">tail</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">9;</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*(tail</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">10)</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">tail</span>&#x00A0;<span 
class="cmtt-10">+=</span>&#x00A0;<span 
class="cmtt-10">11;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">(*tail</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">*p)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(*tail</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;)</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">tail++;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">break;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">tail++;</span>&#x00A0;<span 
class="cmtt-10">n--;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14777--><p class="noindent" ><a 
 name="PrTx221027"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx221023"><span 
class="cmtt-10">try</span>&#x00A0;<span 
class="cmtt-10">alternative</span>&#x00A0;<span 
class="cmtt-10">htfname</span></a><a 
 name="PrTx221028"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">for(</span>&#x00A0;<span 
class="cmtt-10">n</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">0</span>&#x00A0;<span 
class="cmtt-10">;</span>&#x00A0;<span 
class="cmtt-10">(n</span>&#x00A0;<span 
class="cmtt-10">&#x003C;</span>&#x00A0;<span 
class="cmtt-10">cardinality)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">!htfname</span>&#x00A0;<span 
class="cmtt-10">;</span>&#x00A0;<span 
class="cmtt-10">n++){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">tail;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">*p</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>

      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;<span 
class="cmtt-10">s,</span>&#x00A0;<span 
class="cmtt-10">*nm;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">s</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">m_alloc(char,</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">head</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">+</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">fontset[n]</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">+</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">1);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">s,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">head);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcat((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">s,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">fontset[n]);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcat((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">s,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">p);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">nm</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">kpse_find_file</span>&#x00A0;<span 
class="cmtt-10">(s,</span>&#x00A0;<span 
class="cmtt-10">kpse_program_text_format,</span>&#x00A0;<span 
class="cmtt-10">0);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">free((void</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">s);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">nm</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">htfname</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">nm;</span>&#x00A0;<span 
class="cmtt-10">break;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p++;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">(*p</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\\&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(*p</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">(*p</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;)</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">p++;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-222"  name="QQ1-31-222">Debugging info</a></h3>
           <!--l. 14792--><p class="noindent" ><a 
 name="PrTx222001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx219011"><span 
class="cmtt-10">debug</span>&#x00A0;<span 
class="cmtt-10">info</span>&#x00A0;<span 
class="cmtt-10">about</span>&#x00A0;<span 
class="cmtt-10">TEX4HTFONTSET</span></a><a 
 name="PrTx222002"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_htf_search</span>&#x00A0;<span 
class="cmtt-10">||</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*p,</span>&#x00A0;<span 
class="cmtt-10">*q;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx222003"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx222005"><span 
class="cmtt-10">trace TEX4HTINPUTS</span></a><a 
 name="PrTx222004"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 14795--><p class="noindent" >NOTE: The following code, activated by -hV or -hF, stops tex4ht.c with and error under miktex/kpathse. The
execution arrives to &#8216;<span 
class="cmtt-10">kpse_find_file ( "texmf.cnf", kpse_cnf_format, 0);</span>&#8217; but does not print a
message in the line that follows. The problem probably was in <span 
class="cmtt-10">warn_i_str</span>. The code was modified
from
</p><div class="Verbatim"><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;static</span><span 
class="cmtt-10">&#x00A0;U_CHAR</span><span 
class="cmtt-10">&#x00A0;warning[]</span><span 
class="cmtt-10">&#x00A0;=</span><span 
class="cmtt-10">&#x00A0;"---</span><span 
class="cmtt-10">&#x00A0;warning</span><span 
class="cmtt-10">&#x00A0;---</span><span 
class="cmtt-10">&#x00A0;";</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;....</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;fprintf(stderr,"---</span><span 
class="cmtt-10">&#x00A0;warning</span><span 
class="cmtt-10">&#x00A0;---</span><span 
class="cmtt-10">&#x00A0;");</span><span 
class="cmtt-10">&#x00A0;</span>
<br /></div>
<!--l. 14808--><p class="indent" >    to
</p><div class="Verbatim"><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;fprintf(stderr,"---</span><span 
class="cmtt-10">&#x00A0;warning</span><span 
class="cmtt-10">&#x00A0;---</span><span 
class="cmtt-10">&#x00A0;");</span><span 
class="cmtt-10">&#x00A0;</span>
<br /></div>
<!--l. 14814--><p class="indent" >    with the assumption/hope that it will take care of the problem.
</p>
      <!--l. 14833--><p class="indent" ><a 
 name="PrTx222005"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx222003"><span 
class="cmtt-10">trace</span>&#x00A0;<span 
class="cmtt-10">TEX4HTINPUTS</span></a><a 
 name="PrTx222006"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">kpse_find_file</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">"texmf.cnf",</span>&#x00A0;<span 
class="cmtt-10">kpse_cnf_format,</span>&#x00A0;<span 
class="cmtt-10">0);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf(</span>&#x00A0;<span 
class="cmtt-10">"texmf.cnf</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">%s\n",</span>&#x00A0;<span 
class="cmtt-10">p);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;<span 
class="cmtt-10">warn_i_str(1,</span>&#x00A0;<span 
class="cmtt-10">"texmf.cnf"</span>&#x00A0;<span 
class="cmtt-10">);</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">kpse_var_value(</span>&#x00A0;<span 
class="cmtt-10">"TEX4HTINPUTS"</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("TEX4HTINPUTS</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">%s\n",</span>&#x00A0;<span 
class="cmtt-10">p);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">q</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">getenv("TEX4HTINPUTS");</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">q</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf(</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">"Environment</span>&#x00A0;<span 
class="cmtt-10">var</span>&#x00A0;<span 
class="cmtt-10">TEX4HTINPUTS:</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">%s\n",</span>&#x00A0;<span 
class="cmtt-10">q);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!p</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">!q</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf(</span>&#x00A0;<span 
class="cmtt-10">"Missing</span>&#x00A0;<span 
class="cmtt-10">TEX4HTINPUTS</span>&#x00A0;<span 
class="cmtt-10">for</span>&#x00A0;<span 
class="cmtt-10">kpathsea\n"</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>

           </p><!--l. 14851--><p class="noindent" ><a 
 name="PrTx222007"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx219017"><span 
class="cmtt-10">trace</span>&#x00A0;<span 
class="cmtt-10">TEX4HTFONTSET</span></a><a 
 name="PrTx222008"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">kpse_var_value(</span>&#x00A0;<span 
class="cmtt-10">"TEX4HTFONTSET"</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("given</span>&#x00A0;<span 
class="cmtt-10">TEX4HTFONTSET</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">%s\n",</span>&#x00A0;<span 
class="cmtt-10">p);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">q</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">getenv("TEX4HTFONTSET");</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">q</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf(</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">"Environmet</span>&#x00A0;<span 
class="cmtt-10">var</span>&#x00A0;<span 
class="cmtt-10">TEX4HTFONTSET:</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">%s\n",</span>&#x00A0;<span 
class="cmtt-10">q);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!p</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">!q</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf(</span>&#x00A0;<span 
class="cmtt-10">"Missing</span>&#x00A0;<span 
class="cmtt-10">TEX4HTFONTSET</span>&#x00A0;<span 
class="cmtt-10">for</span>&#x00A0;<span 
class="cmtt-10">kpathsea\n"</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SectionHead">15.6 <a 
 href="tex4ht-c.html#QQ2-31-223"  name="QQ1-31-223">Searching with KPATHSEA</a></h3>
<!--l. 14865--><p class="noindent" ><a 
 href="http://www.fptex.org/kpathsea/kpathsea_toc.html" >Kpathsea manual</a>
</p>
      <!--l. 14871--><p class="indent" ><a 
 href="#PrTx212001"  name="PrTx223001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx3023"><span 
class="cmtt-10">h-include</span></a><a 
 name="PrTx223002"  href="#PrTx229028"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<a 
 name="PrTx223003"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="tex4ht-cCh1.html#PrTx9001"><span 
class="cmtt-10">KPATHSEA h-include</span></a><a 
 name="PrTx223004"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14880--><p class="noindent" ><a 
 name="PrTx223005"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx14003"><span 
class="cmtt-10">kpathsea</span>&#x00A0;<span 
class="cmtt-10">arg</span>&#x00A0;<span 
class="cmtt-10">0</span></a><a 
 name="PrTx223006"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">kpse_set_program_name</span>&#x00A0;<span 
class="cmtt-10">(argv[0],</span>&#x00A0;<span 
class="cmtt-10">"tex4ht");</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14906--><p class="noindent" ><a 
 name="PrTx223007"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx203019"><span 
class="cmtt-10">kpathsea</span>&#x00A0;<span 
class="cmtt-10">env</span>&#x00A0;<span 
class="cmtt-10">file</span></a><a 
 name="PrTx223008"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!dot_file</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;<span 
class="cmtt-10">envfile;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">*arch,</span>&#x00A0;<span 
class="cmtt-10">*p,</span>&#x00A0;<span 
class="cmtt-10">str[256];</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx223009"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx223017"><span 
class="cmtt-10">arch = tail of SELFAUTOLOC</span></a><a 
 name="PrTx223010"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">envfile</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx223011"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx223019"><span 
class="cmtt-10">envfile = kpse-find-file architecture/tex4ht.env</span></a><a 
 name="PrTx223012"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">!envfile</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<a 
 name="PrTx223013"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx223021"><span 
class="cmtt-10">envfile = kpse-find-file tex4ht.env</span></a><a 
 name="PrTx223014"><span 
class="cmtt-10">.&#x003E;</span></a>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">!envfile</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<a 
 name="PrTx223015"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx224001"><span 
class="cmtt-10">envfile = kpathsea tex4ht.env</span></a><a 
 name="PrTx223016"><span 
class="cmtt-10">.&#x003E;</span></a>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">envfile</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">dot_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">kpse_open_file</span>&#x00A0;<span 
class="cmtt-10">(envfile,</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">kpse_program_text_format);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("(%s)\n",</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">envfile);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">kpse_var_value(</span>&#x00A0;<span 
class="cmtt-10">"TEX4HTINPUTS"</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">printf(</span>&#x00A0;<span 
class="cmtt-10">"TEX4HTINPUTS</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">%s\n",</span>&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">warn_i_str(</span>&#x00A0;<span 
class="cmtt-10">50,</span>&#x00A0;<span 
class="cmtt-10">"kpathsea</span>&#x00A0;<span 
class="cmtt-10">variable</span>&#x00A0;<span 
class="cmtt-10">TEX4HTINPUTS");</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 14908--><p class="noindent" >The location of tex4ht.c can be found from the kpathsea variable &#8216;SELFAUTOLOC = /n/gold/5/gurari/tex4ht.dir/bin/solaris&#8217;,
from which one can determine the architecture in use.
</p><div class="Verbatim"><span 
class="cmtt-10">&#x00A0;&#x003E;</span><span 
class="cmtt-10">&#x00A0;I</span><span 
class="cmtt-10">&#x00A0;still</span><span 
class="cmtt-10">&#x00A0;cannot</span><span 
class="cmtt-10">&#x00A0;catch</span><span 
class="cmtt-10">&#x00A0;why</span><span 
class="cmtt-10">&#x00A0;you</span><span 
class="cmtt-10">&#x00A0;need</span><span 
class="cmtt-10">&#x00A0;to</span><span 
class="cmtt-10">&#x00A0;determine</span><span 
class="cmtt-10">&#x00A0;the</span><span 
class="cmtt-10">&#x00A0;architecture,</span><span 
class="cmtt-10">&#x00A0;since</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;&#x003E;</span><span 
class="cmtt-10">&#x00A0;all</span><span 
class="cmtt-10">&#x00A0;stuff</span><span 
class="cmtt-10">&#x00A0;belongs</span><span 
class="cmtt-10">&#x00A0;to</span><span 
class="cmtt-10">&#x00A0;texmf</span><span 
class="cmtt-10">&#x00A0;tree</span><span 
class="cmtt-10">&#x00A0;which</span><span 
class="cmtt-10">&#x00A0;is</span><span 
class="cmtt-10">&#x00A0;always</span><span 
class="cmtt-10">&#x00A0;the</span><span 
class="cmtt-10">&#x00A0;same</span><span 
class="cmtt-10">&#x00A0;for</span><span 
class="cmtt-10">&#x00A0;all</span><span 
class="cmtt-10">&#x00A0;systems,</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;&#x003E;</span><span 
class="cmtt-10">&#x00A0;and</span><span 
class="cmtt-10">&#x00A0;tex4ht.env</span><span 
class="cmtt-10">&#x00A0;is</span><span 
class="cmtt-10">&#x00A0;found</span><span 
class="cmtt-10">&#x00A0;without</span><span 
class="cmtt-10">&#x00A0;problem.</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;&#x003E;</span><span 
class="cmtt-10">&#x00A0;And</span><span 
class="cmtt-10">&#x00A0;T4HTINPUTS=</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;should</span><span 
class="cmtt-10">&#x00A0;be</span><span 
class="cmtt-10">&#x00A0;set</span><span 
class="cmtt-10">&#x00A0;in</span><span 
class="cmtt-10">&#x00A0;texmf.cnf</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>

<br /><span 
class="cmtt-10">In</span><span 
class="cmtt-10">&#x00A0;case</span><span 
class="cmtt-10">&#x00A0;we</span><span 
class="cmtt-10">&#x00A0;have</span><span 
class="cmtt-10">&#x00A0;different</span><span 
class="cmtt-10">&#x00A0;tex4ht.env</span><span 
class="cmtt-10">&#x00A0;files</span><span 
class="cmtt-10">&#x00A0;for</span><span 
class="cmtt-10">&#x00A0;different</span><span 
class="cmtt-10">&#x00A0;architectures</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;/usr/TeX/texmf/tex4ht/base/i386-linux/tex4ht.env</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;/usr/TeX/texmf/tex4ht/base/win32/tex4ht.env</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">the</span><span 
class="cmtt-10">&#x00A0;SELFAUTOLOC</span><span 
class="cmtt-10">&#x00A0;provides</span><span 
class="cmtt-10">&#x00A0;us</span><span 
class="cmtt-10">&#x00A0;information</span><span 
class="cmtt-10">&#x00A0;about</span><span 
class="cmtt-10">&#x00A0;the</span><span 
class="cmtt-10">&#x00A0;architecture</span><span 
class="cmtt-10">&#x00A0;in</span><span 
class="cmtt-10">&#x00A0;use</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">by</span><span 
class="cmtt-10">&#x00A0;inspecting</span><span 
class="cmtt-10">&#x00A0;from</span><span 
class="cmtt-10">&#x00A0;what</span><span 
class="cmtt-10">&#x00A0;branch</span><span 
class="cmtt-10">&#x00A0;tex4ht.c</span><span 
class="cmtt-10">&#x00A0;comes</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;/usr/TeX/bin/i386-linux</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;/usr/TeX/bin/win32</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">Seems</span><span 
class="cmtt-10">&#x00A0;to</span><span 
class="cmtt-10">&#x00A0;me</span><span 
class="cmtt-10">&#x00A0;that</span><span 
class="cmtt-10">&#x00A0;this</span><span 
class="cmtt-10">&#x00A0;problem</span><span 
class="cmtt-10">&#x00A0;is</span><span 
class="cmtt-10">&#x00A0;solved</span><span 
class="cmtt-10">&#x00A0;now.</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span>
<br /></div>
      <!--l. 14944--><p class="indent" ><a 
 name="PrTx223017"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx223009"><span 
class="cmtt-10">arch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">tail</span>&#x00A0;<span 
class="cmtt-10">of</span>&#x00A0;<span 
class="cmtt-10">SELFAUTOLOC</span></a><a 
 name="PrTx223018"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">arch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">kpse_var_value(</span>&#x00A0;<span 
class="cmtt-10">"SELFAUTOLOC"</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">*p</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(*p</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;)</span>&#x00A0;<span 
class="cmtt-10">||</span>&#x00A0;<span 
class="cmtt-10">(*p</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;\\&#8217;)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">arch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">p;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p++;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14955--><p class="noindent" ><a 
 name="PrTx223019"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx223011"><span 
class="cmtt-10">envfile</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">kpse-find-file</span>&#x00A0;<span 
class="cmtt-10">architecture/tex4ht.env</span></a><a 
 name="PrTx223020"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">arch</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">sprintf(str,"%s%ctex4ht.env",</span>&#x00A0;<span 
class="cmtt-10">arch+1,</span>&#x00A0;<span 
class="cmtt-10">*arch);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("kpse_open_file</span>&#x00A0;<span 
class="cmtt-10">(\"%s\",</span>&#x00A0;<span 
class="cmtt-10">...)?\n",</span>&#x00A0;<span 
class="cmtt-10">str</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">envfile=</span>&#x00A0;<span 
class="cmtt-10">kpse_find_file</span>&#x00A0;<span 
class="cmtt-10">(str,</span>&#x00A0;<span 
class="cmtt-10">kpse_program_text_format,</span>&#x00A0;<span 
class="cmtt-10">0);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14963--><p class="noindent" ><a 
 name="PrTx223021"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx223013"><span 
class="cmtt-10">envfile</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">kpse-find-file</span>&#x00A0;<span 
class="cmtt-10">tex4ht.env</span></a><a 
 name="PrTx223022"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("kpse_open_file</span>&#x00A0;<span 
class="cmtt-10">(\"tex4ht.env\",</span>&#x00A0;<span 
class="cmtt-10">...)?\n");</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">envfile=</span>&#x00A0;<span 
class="cmtt-10">kpse_find_file</span>&#x00A0;<span 
class="cmtt-10">("tex4ht.env",</span>&#x00A0;<span 
class="cmtt-10">kpse_program_text_format,</span>&#x00A0;<span 
class="cmtt-10">0);</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14980--><p class="noindent" ><a 
 name="PrTx223023"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx209003"><span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">kpathsea</span>&#x00A0;<span 
class="cmtt-10">tfm</span>&#x00A0;<span 
class="cmtt-10">files</span>&#x00A0;<span 
class="cmtt-10">else</span></a><a 
 name="PrTx223024"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;<span 
class="cmtt-10">tfmfile;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">tfmfile</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">kpse_find_file</span>&#x00A0;<span 
class="cmtt-10">(file_name,</span>&#x00A0;<span 
class="cmtt-10">kpse_tfm_format,</span>&#x00A0;<span 
class="cmtt-10">0);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!tfmfile</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<a 
 name="PrTx223025"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx224005"><span 
class="cmtt-10">tfmfile = kpathsea tfm file</span></a><a 
 name="PrTx223026"><span 
class="cmtt-10">.&#x003E;</span></a>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">tfmfile</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("(%s)\n",</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">tfmfile);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">font_file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">kpse_open_file</span>&#x00A0;<span 
class="cmtt-10">(tfmfile,</span>&#x00A0;<span 
class="cmtt-10">kpse_tfm_format);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#else</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 14987--><p class="noindent" ><a 
 name="PrTx223027"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx209009"><span 
class="cmtt-10">endif</span>&#x00A0;<span 
class="cmtt-10">kpathsea</span>&#x00A0;<span 
class="cmtt-10">tfm</span>&#x00A0;<span 
class="cmtt-10">files</span></a><a 
 name="PrTx223028"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-224"  name="QQ1-31-224">kpathsea vs kpse-find-file</a></h3>

<!--l. 14997--><p class="noindent" >The &#8216;<span 
class="cmtt-10">kpsewhich</span>&#8217; utility can succeed where the <span 
class="cmtt-10">kpse_find_file </span>function fails, if the program is named something
other than &#8216;<span 
class="cmtt-10">tex4ht</span>&#8217;. Otherwise, we don&#8217;t find the &#8216;<span 
class="cmtt-10">TEX4HTINPUTS</span>&#8217; definition in &#8216;<span 
class="cmtt-10">texmf.cnf</span>&#8217;.
</p><!--l. 15002--><p class="indent" >    However, this is not yet enough to actually make the program work under an arbitrary name, because the
&#8216;<span 
class="cmtt-10">.htf</span>&#8217; lookups fail; we need to reset the Kpathsea progname. Other things to do, so let it stand. Bottom line is that
the program must be invoked as &#8216;<span 
class="cmtt-10">tex4ht</span>&#8217;.
</p>
      <!--l. 15021--><p class="indent" ><a 
 name="PrTx224001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx223015"><span 
class="cmtt-10">envfile</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">kpathsea</span>&#x00A0;<span 
class="cmtt-10">tex4ht.env</span></a><a 
 name="PrTx224002"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#define</span>&#x00A0;<span 
class="cmtt-10">KPSEWHICH_CMD</span>&#x00A0;<span 
class="cmtt-10">"kpsewhich</span>&#x00A0;<span 
class="cmtt-10">--progname=tex4ht</span>&#x00A0;<span 
class="cmtt-10">--format=othertext</span>&#x00A0;<span 
class="cmtt-10">tex4ht.env"</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">dump_env_search</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("system("</span>&#x00A0;<span 
class="cmtt-10">KPSEWHICH_CMD</span>&#x00A0;<span 
class="cmtt-10">")?\n");</span>&#x00A0;<span 
class="cmtt-10">/*</span>&#x00A0;<span 
class="cmtt-10">cpp</span>&#x00A0;<span 
class="cmtt-10">concatenation</span>&#x00A0;<span 
class="cmtt-10">*/</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">system(KPSEWHICH_CMD</span>&#x00A0;<span 
class="cmtt-10">"&#x003E;tex4ht.tmp")</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">0</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx224003"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx224009"><span 
class="cmtt-10">fileaddr = read tex4ht.tmp</span></a><a 
 name="PrTx224004"  href="#PrTx224008"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">envfile=</span>&#x00A0;<span 
class="cmtt-10">kpse_find_file</span>&#x00A0;<span 
class="cmtt-10">(fileaddr,</span>&#x00A0;<span 
class="cmtt-10">kpse_program_text_format,</span>&#x00A0;<span 
class="cmtt-10">0);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">envfile</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">warn_i_str(</span>&#x00A0;<span 
class="cmtt-10">50,</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">"search</span>&#x00A0;<span 
class="cmtt-10">support</span>&#x00A0;<span 
class="cmtt-10">for</span>&#x00A0;<span 
class="cmtt-10">kpse_find_file--using</span>&#x00A0;<span 
class="cmtt-10">kpsewhich</span>&#x00A0;<span 
class="cmtt-10">calls</span>&#x00A0;<span 
class="cmtt-10">instead");</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15032--><p class="noindent" ><a 
 name="PrTx224005"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx223025"><span 
class="cmtt-10">tfmfile</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">kpathsea</span>&#x00A0;<span 
class="cmtt-10">tfm</span>&#x00A0;<span 
class="cmtt-10">file</span></a><a 
 name="PrTx224006"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">s</span>&#x00A0;<span 
class="cmtt-10">[256];</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy(s,</span>&#x00A0;<span 
class="cmtt-10">"kpsewhich</span>&#x00A0;<span 
class="cmtt-10">");</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcat(s,</span>&#x00A0;<span 
class="cmtt-10">file_name);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcat(s,</span>&#x00A0;<span 
class="cmtt-10">"</span>&#x00A0;<span 
class="cmtt-10">&#x003E;</span>&#x00A0;<span 
class="cmtt-10">tex4ht.tmp</span>&#x00A0;<span 
class="cmtt-10">");</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">system(s)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">0</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx224007"  href="#PrTx224003"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx224009"><span 
class="cmtt-10">fileaddr = read tex4ht.tmp</span></a><a 
 name="PrTx224008"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">tfmfile</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">kpse_find_file</span>&#x00A0;<span 
class="cmtt-10">(fileaddr,</span>&#x00A0;<span 
class="cmtt-10">kpse_program_text_format,</span>&#x00A0;<span 
class="cmtt-10">0);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 15035--><p class="noindent" >Don&#8217;t know how to avoid the use of intermediate file: popen(...) and fork() are not stadard utilities. Also the
redirection <span 
class="cmtt-10">&#x003E; </span>might need to be changed, e.g., to <span 
class="cmtt-10">&#x003E;&amp;</span>.
</p>
      <!--l. 15050--><p class="indent" ><a 
 name="PrTx224009"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx224003"><span 
class="cmtt-10">fileaddr</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">read</span>&#x00A0;<span 
class="cmtt-10">tex4ht.tmp</span></a><a 
 name="PrTx224010"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">fileaddr</span>&#x00A0;<span 
class="cmtt-10">[256];</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">loc</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">0;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">f_open("tex4ht.tmp",</span>&#x00A0;<span 
class="cmtt-10">READ_TEXT_FLAGS);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">(fileaddr[loc]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">getc(file))</span>&#x00A0;<span 
class="cmtt-10">&#x003E;=0</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">fileaddr[loc]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;\n&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">fileaddr[loc]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>&#x00A0;<span 
class="cmtt-10">break;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">loc++;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fclose(file);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-225"  name="QQ1-31-225">HTF Fonts</a></h3>
           <!--l. 15061--><p class="noindent" ><a 
 href="#PrTx221001"  name="PrTx225001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10007"><span 
class="cmtt-10">vars</span></a><a 
 name="PrTx225002"  href="tex4ht-cCh16.html#PrTx233012"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">BOOL</span>&#x00A0;<span 
class="cmtt-10">dump_htf_search</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">FALSE;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15065--><p class="noindent" ><a 
 name="PrTx225003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx14059"><span 
class="cmtt-10">trace</span>&#x00A0;<span 
class="cmtt-10">htf</span>&#x00A0;<span 
class="cmtt-10">search</span></a><a 
 name="PrTx225004"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">dump_htf_search</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">TRUE;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15083--><p class="noindent" ><a 
 name="PrTx225005"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx213011"><span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">kpathsea</span>&#x00A0;<span 
class="cmtt-10">.htf</span>&#x00A0;<span 
class="cmtt-10">file</span></a><a 
 name="PrTx225006"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!file</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;<span 
class="cmtt-10">htfname;</span>

      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">htfname=</span>&#x00A0;<span 
class="cmtt-10">kpse_find_file</span>&#x00A0;<span 
class="cmtt-10">(name,</span>&#x00A0;<span 
class="cmtt-10">kpse_program_text_format,</span>&#x00A0;<span 
class="cmtt-10">0);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">htfname</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx225007"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx221019"><span 
class="cmtt-10">correct htfname</span></a><a 
 name="PrTx225008"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">htfname</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">printf("(%s)\n",</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">htfname);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file=</span>&#x00A0;<span 
class="cmtt-10">fopen(htfname,READ_TEXT_FLAGS);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 15085--><p class="noindent" >web2c/kpathsea version uses texmf.cnf with the following:
</p><div class="Verbatim"><span 
class="cmtt-10">TEX4HTFONTSET=alias,iso8859</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">TEX4HTINPUTS=.;$TEXMF/tex4ht/base//;$TEXMF/tex4ht/ht-fonts/{$TEX4HTFONTSET}//</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">T4HTINPUTS=.;$TEXMF/tex4ht/base//</span><span 
class="cmtt-10">&#x00A0;</span>
<br /></div>
<!--l. 15093--><p class="indent" >    We can check values of variables of kpathsea with code fragments of the following form.
</p><div class="Verbatim"><span 
class="cmtt-10">if(</span><span 
class="cmtt-10">&#x00A0;q</span><span 
class="cmtt-10">&#x00A0;=</span><span 
class="cmtt-10">&#x00A0;(U_CHAR</span><span 
class="cmtt-10">&#x00A0;*)</span><span 
class="cmtt-10">&#x00A0;kpse_var_value(</span><span 
class="cmtt-10">&#x00A0;"TEX4HTINPUTS"</span><span 
class="cmtt-10">&#x00A0;)</span><span 
class="cmtt-10">&#x00A0;){</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;(IGNORED)</span><span 
class="cmtt-10">&#x00A0;printf(</span><span 
class="cmtt-10">&#x00A0;"%s\n",</span><span 
class="cmtt-10">&#x00A0;q</span><span 
class="cmtt-10">&#x00A0;);</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">}</span><span 
class="cmtt-10">&#x00A0;</span>
<br /></div>
<!--l. 15106--><p class="indent" >    [<a 
 href="tex4ht-c33.html"  name="tex4ht-c33.html" >more</a>][<a 
 href="tex4ht-c34.html"  name="tex4ht-c34.html" >kpathsea note</a>] [<a 
 href="tex4ht-c35.html"  name="tex4ht-c35.html" >more</a>]
</p><!--l. 15152--><p class="indent" >    [<a 
 href="tex4ht-c36.html"  name="tex4ht-c36.html" >more</a>][<a 
 href="tex4ht-c37.html"  name="tex4ht-c37.html" >more</a>][<a 
 href="tex4ht-c38.html"  name="tex4ht-c38.html" >more</a>][<a 
 href="tex4ht-c39.html"  name="tex4ht-c39.html" >more</a>][<a 
 href="tex4ht-c40.html"  name="tex4ht-c40.html" >more</a>]
</p>
    <h3 class="SectionHead">15.7 <a 
 href="tex4ht-c.html#QQ2-31-226"  name="QQ1-31-226">Searching Utilities</a></h3>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-227"  name="QQ1-31-227">Search Files Listed in Environment File</a></h3>
<!--l. 15298--><p class="noindent" >The following is used for start searching files from directories mentioned in the dot file.
</p>
      <!--l. 15304--><p class="indent" ><a 
 href="#PrTx220001"  name="PrTx227001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10009"><span 
class="cmtt-10">header functions</span></a><a 
 name="PrTx227002"  href="#PrTx227010"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">search_in_dot_file(</span>&#x00A0;<span 
class="cmtt-10">ARG_IV(</span>&#x00A0;<span 
class="cmtt-10">int,</span>&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*,</span>&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*,</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">env_var_rec</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15338--><p class="noindent" ><a 
 href="#PrTx220003"  name="PrTx227003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10011"><span 
class="cmtt-10">functions</span></a><a 
 name="PrTx227004"  href="#PrTx227012"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">search_in_dot_file</span><strong><span 
class="cmtt-10">(</span></strong>&#x00A0;<span 
class="cmtt-10">typ,</span>&#x00A0;<span 
class="cmtt-10">name,</span>&#x00A0;<span 
class="cmtt-10">flags,</span>&#x00A0;<span 
class="cmtt-10">env_dirs)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">typ</span><strong><span 
class="cmtt-10">;</span></strong>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*name</span><strong><span 
class="cmtt-10">;</span></strong>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*flags</span><strong><span 
class="cmtt-10">;</span></strong>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">env_var_rec</span>&#x00A0;<span 
class="cmtt-10">*env_dirs</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">;{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*ch,</span>&#x00A0;<span 
class="cmtt-10">dir[256];</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;<span 
class="cmtt-10">file;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">cache_files</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">(FILE</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">0</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx227005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx215001"><span 
class="cmtt-10">search font in cache files</span></a><a 
 name="PrTx227006"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">fseek(dot_file,</span>&#x00A0;<span 
class="cmtt-10">0L,</span>&#x00A0;<a 
 name="PrTx227007"  href="#PrTx219021"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="tex4ht-cCh2.html#PrTx25013"><span 
class="cmtt-10">abs file addr</span></a><a 
 name="PrTx227008"  href="tex4ht-cCh17.html#PrTx254014"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">search_dot_file(</span>&#x00A0;<span 
class="cmtt-10">typ</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">dir;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while((*(ch++)</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">getc(dot_file))</span>&#x00A0;<span 
class="cmtt-10">&#x003E;</span>&#x00A0;<span 
class="cmtt-10">&#8217;</span>&#x00A0;<span 
class="cmtt-10">&#8217;);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(*(ch-1)</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">&#8217;\n&#8217;){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*(ch-1)</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">getc(dot_file);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*(ch-1)</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">search_file_base(name,</span>&#x00A0;<span 
class="cmtt-10">dir,</span>&#x00A0;<span 
class="cmtt-10">flags,</span>&#x00A0;<span 
class="cmtt-10">env_dirs);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">NULL</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">KPATHSEA</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">tex4ht_fls</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">TRUE;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">file;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">NULL;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15349--><p class="noindent" ><a 
 href="#PrTx227001"  name="PrTx227009"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10009"><span 
class="cmtt-10">header functions</span></a><a 
 name="PrTx227010"  href="#PrTx227014"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">search_file_base(</span>&#x00A0;<span 
class="cmtt-10">ARG_IV(</span>&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*,</span>&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*,</span>&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*,</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">env_var_rec</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15374--><p class="noindent" ><a 
 href="#PrTx227003"  name="PrTx227011"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10011"><span 
class="cmtt-10">functions</span></a><a 
 name="PrTx227012"  href="#PrTx227016"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">search_file_base</span><strong><span 
class="cmtt-10">(</span></strong>&#x00A0;<span 
class="cmtt-10">name,</span>&#x00A0;<span 
class="cmtt-10">dir,</span>&#x00A0;<span 
class="cmtt-10">flags,</span>&#x00A0;<span 
class="cmtt-10">env_dirs)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*name</span><strong><span 
class="cmtt-10">;</span></strong>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*dir</span><strong><span 
class="cmtt-10">;</span></strong>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*flags</span><strong><span 
class="cmtt-10">;</span></strong>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">env_var_rec</span>&#x00A0;<span 
class="cmtt-10">*env_dirs</span>
      <br /><!--x-->&#x00A0;

      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">;{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*p;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;<span 
class="cmtt-10">file;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">*dir</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;~&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">TRUE</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">abs_addr(dir,</span>&#x00A0;<span 
class="cmtt-10">env_dirs?</span>&#x00A0;<span 
class="cmtt-10">env_dirs-&#x003E;base</span>&#x00A0;<span 
class="cmtt-10">:</span>&#x00A0;<span 
class="cmtt-10">NULL);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">search_file(name,</span>&#x00A0;<span 
class="cmtt-10">p,</span>&#x00A0;<span 
class="cmtt-10">flags);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">free((void</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">p);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">||</span>&#x00A0;<span 
class="cmtt-10">!env_dirs</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">file;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">env_dirs</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">env_dirs-&#x003E;next;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">search_file(name,</span>&#x00A0;<span 
class="cmtt-10">dir,</span>&#x00A0;<span 
class="cmtt-10">flags);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">file;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15380--><p class="noindent" ><a 
 href="#PrTx227009"  name="PrTx227013"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10009"><span 
class="cmtt-10">header functions</span></a><a 
 name="PrTx227014"  href="#PrTx228002"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">abs_addr(</span>&#x00A0;<span 
class="cmtt-10">ARG_II(</span>&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*,</span>&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15407--><p class="noindent" ><a 
 href="#PrTx227011"  name="PrTx227015"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10011"><span 
class="cmtt-10">functions</span></a><a 
 name="PrTx227016"  href="#PrTx228004"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">*</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">abs_addr</span><strong><span 
class="cmtt-10">(</span></strong>&#x00A0;<span 
class="cmtt-10">dir,</span>&#x00A0;<span 
class="cmtt-10">base)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*dir</span><strong><span 
class="cmtt-10">;</span></strong>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*base</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">;{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">*p;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">m_alloc(char,</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen(</span>&#x00A0;<span 
class="cmtt-10">dir</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">+</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(base?</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen(</span>&#x00A0;<span 
class="cmtt-10">base</span>&#x00A0;<span 
class="cmtt-10">):0)</span>&#x00A0;<span 
class="cmtt-10">+</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">HOME_DIR</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">1</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*p</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(*(dir+1)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;~&#8217;)</span>&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>&#x00A0;<span 
class="cmtt-10">base</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">*base</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;~&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strct(p,</span>&#x00A0;<span 
class="cmtt-10">HOME_DIR);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strct(p,</span>&#x00A0;<span 
class="cmtt-10">base+1);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strct(p,</span>&#x00A0;<span 
class="cmtt-10">base);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strct(p,</span>&#x00A0;<span 
class="cmtt-10">dir+2);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strct(p,</span>&#x00A0;<span 
class="cmtt-10">HOME_DIR);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strct(p,</span>&#x00A0;<span 
class="cmtt-10">dir+1);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">p;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-228"  name="QQ1-31-228">Search in Current Directory and Specified Directory</a></h3>
<!--l. 15413--><p class="noindent" >If a path specification ends in a &#8217;!&#8217;, it&#8217;s subdirectories are searched too, else only the specified dir is searched. (This
is the way many TeX installations seem to do it, too).
</p>
      <!--l. 15421--><p class="indent" ><a 
 href="#PrTx227013"  name="PrTx228001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10009"><span 
class="cmtt-10">header functions</span></a><a 
 name="PrTx228002"  href="#PrTx228018"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;<span 
class="cmtt-10">search_file(</span>&#x00A0;<span 
class="cmtt-10">ARG_III(const</span>&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">*,</span>&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*,</span>&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15446--><p class="noindent" ><a 
 href="#PrTx227015"  name="PrTx228003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10011"><span 
class="cmtt-10">functions</span></a><a 
 name="PrTx228004"  href="#PrTx228020"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;

      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;<span 
class="cmtt-10">search_file</span><strong><span 
class="cmtt-10">(</span></strong>&#x00A0;<span 
class="cmtt-10">name,</span>&#x00A0;<span 
class="cmtt-10">dir,</span>&#x00A0;<span 
class="cmtt-10">flags</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*name</span><strong><span 
class="cmtt-10">;</span></strong>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*dir</span><strong><span 
class="cmtt-10">;</span></strong>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*flags</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">;{</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">file;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">str[256];</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">i;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">BOOL</span>&#x00A0;<span 
class="cmtt-10">subs;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx228005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx228013"><span 
class="cmtt-10">search file in cur dir</span></a><a 
 name="PrTx228006"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">str,</span>&#x00A0;<span 
class="cmtt-10">dir);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">i</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">str)</span>&#x00A0;<span 
class="cmtt-10">-</span>&#x00A0;<span 
class="cmtt-10">1;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">subs</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">str[i]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;!&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">subs</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">str[i]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">i++;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx228007"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx228011"><span 
class="cmtt-10">cat / if needed</span></a><a 
 name="PrTx228008"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx228009"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx228015"><span 
class="cmtt-10">search file in named dir</span></a><a 
 name="PrTx228010"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">str[i]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">subs?</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">search_file_ext(</span>&#x00A0;<span 
class="cmtt-10">name,</span>&#x00A0;<span 
class="cmtt-10">str,</span>&#x00A0;<span 
class="cmtt-10">flags):</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">FALSE;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15458--><p class="noindent" ><a 
 name="PrTx228011"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx228007"><span 
class="cmtt-10">cat</span>&#x00A0;<span 
class="cmtt-10">/</span>&#x00A0;<span 
class="cmtt-10">if</span>&#x00A0;<span 
class="cmtt-10">needed</span></a><a 
 name="PrTx228012"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strct(str,</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#if</span>&#x00A0;<span 
class="cmtt-10">defined(__DJGPP__)</span>
      <br /><!--x-->&#x00A0;&#x00A0;<span 
class="cmtt-10">((</span>&#x00A0;<span 
class="cmtt-10">dir[i-1]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;)</span>&#x00A0;<span 
class="cmtt-10">||</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">dir[i-1]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;\\&#8217;))</span>
      <br /><!--x-->&#x00A0;&#x00A0;<span 
class="cmtt-10">?</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">""</span>
      <br /><!--x-->&#x00A0;&#x00A0;<span 
class="cmtt-10">:</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">(is_forward_slash(dir)?</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">"/"</span>&#x00A0;<span 
class="cmtt-10">:</span>&#x00A0;<span 
class="cmtt-10">"\\"</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#else</span>
      <br /><!--x-->&#x00A0;&#x00A0;<span 
class="cmtt-10">(dir[i-1]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;)?</span>&#x00A0;<span 
class="cmtt-10">""</span>&#x00A0;<span 
class="cmtt-10">:</span>&#x00A0;<span 
class="cmtt-10">"/"</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15467--><p class="noindent" ><a 
 name="PrTx228013"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx228005"><span 
class="cmtt-10">search</span>&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">in</span>&#x00A0;<span 
class="cmtt-10">cur</span>&#x00A0;<span 
class="cmtt-10">dir</span></a><a 
 name="PrTx228014"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open(name,</span>&#x00A0;<span 
class="cmtt-10">flags))</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">NULL</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">file;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15474--><p class="noindent" ><a 
 name="PrTx228015"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx228009"><span 
class="cmtt-10">search</span>&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">in</span>&#x00A0;<span 
class="cmtt-10">named</span>&#x00A0;<span 
class="cmtt-10">dir</span></a><a 
 name="PrTx228016"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strct(str,name);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open(str,</span>&#x00A0;<span 
class="cmtt-10">flags))</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">NULL</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">str[i]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>&#x00A0;<span 
class="cmtt-10">add_to_cache(str,name,i);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">file;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15481--><p class="noindent" ><a 
 href="#PrTx228001"  name="PrTx228017"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10009"><span 
class="cmtt-10">header functions</span></a><a 
 name="PrTx228018"  href="#PrTx229002"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">void</span>&#x00A0;<span 
class="cmtt-10">add_to_cache(</span>&#x00A0;<span 
class="cmtt-10">ARG_III(const</span>&#x00A0;<span 
class="cmtt-10">char*,const</span>&#x00A0;<span 
class="cmtt-10">char*,int)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15494--><p class="noindent" ><a 
 href="#PrTx228003"  name="PrTx228019"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10011"><span 
class="cmtt-10">functions</span></a><a 
 name="PrTx228020"  href="#PrTx229004"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">void</span>&#x00A0;<span 
class="cmtt-10">add_to_cache</span><strong><span 
class="cmtt-10">(</span></strong><span 
class="cmtt-10">dir,name,n)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">char*</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">dir</span><strong><span 
class="cmtt-10">;</span></strong>&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">char*</span>&#x00A0;<span 
class="cmtt-10">name</span><strong><span 
class="cmtt-10">;</span></strong>&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;<span 
class="cmtt-10">n</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">;{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">cache_font_rec</span>&#x00A0;<span 
class="cmtt-10">*cur_cache_font;</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx228021"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx211003"><span 
class="cmtt-10">put dir in cache</span></a><a 
 name="PrTx228022"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx228023"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx214003"><span 
class="cmtt-10">store filename in cache</span></a><a 
 name="PrTx228024"><span 
class="cmtt-10">.&#x003E;</span></a>

      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-229"  name="QQ1-31-229">Search in SubDirectories</a></h3>
           <!--l. 15502--><p class="noindent" ><a 
 href="#PrTx228017"  name="PrTx229001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10009"><span 
class="cmtt-10">header functions</span></a><a 
 name="PrTx229002"  href="#PrTx229016"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;<span 
class="cmtt-10">search_file_ext(</span>&#x00A0;<span 
class="cmtt-10">ARG_III(const</span>&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;<span 
class="cmtt-10">*,</span>&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*,</span>&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15543--><p class="noindent" ><a 
 href="#PrTx228019"  name="PrTx229003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10011"><span 
class="cmtt-10">functions</span></a><a 
 name="PrTx229004"  href="#PrTx229018"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;<span 
class="cmtt-10">search_file_ext</span><strong><span 
class="cmtt-10">(</span></strong>&#x00A0;<span 
class="cmtt-10">name,</span>&#x00A0;<span 
class="cmtt-10">dir,</span>&#x00A0;<span 
class="cmtt-10">flags</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">char</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*name</span><strong><span 
class="cmtt-10">;</span></strong>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*dir</span><strong><span 
class="cmtt-10">;</span></strong>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*flags</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">;{</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">str[256];</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">file;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">int</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">n;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">n</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(int)</span>&#x00A0;<span 
class="cmtt-10">strlen(dir);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">sprintf(str,</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#if</span>&#x00A0;<span 
class="cmtt-10">defined(__DJGPP__)</span>
      <br /><!--x-->&#x00A0;&#x00A0;<span 
class="cmtt-10">((</span>&#x00A0;<span 
class="cmtt-10">dir[n-1]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;)</span>&#x00A0;<span 
class="cmtt-10">||</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">dir[n-1]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;\\&#8217;))</span>
      <br /><!--x-->&#x00A0;&#x00A0;<span 
class="cmtt-10">?</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">"%s%s"</span>
      <br /><!--x-->&#x00A0;&#x00A0;<span 
class="cmtt-10">:</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">(is_forward_slash(dir)?</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">"%s/%s"</span>&#x00A0;<span 
class="cmtt-10">:</span>&#x00A0;<span 
class="cmtt-10">"%s\\%s"</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#else</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(dir[n-1]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;)?</span>&#x00A0;<span 
class="cmtt-10">"%s%s"</span>&#x00A0;<span 
class="cmtt-10">:</span>&#x00A0;<span 
class="cmtt-10">"%s/%s"</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">,</span>&#x00A0;<span 
class="cmtt-10">dir,</span>&#x00A0;<span 
class="cmtt-10">name);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open(str,flags))</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">NULL</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">add_to_cache(dir,name,n);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">file;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(str[n]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<a 
 name="PrTx229005"  href="#PrTx215023"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx229011"><span 
class="cmtt-10">directory &#8217;/&#8217;</span></a><a 
 name="PrTx229006"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">DOS_WIN32</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">||</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">(str[n]</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">n++;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">str[n-1]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">&#8217;\0&#8217;;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">NOSUBDIR</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">WIN32</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx229007"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="tex4ht-cCh1.html#PrTx5021"><span 
class="cmtt-10">file = search WIN32 subdir (name,str)</span></a><a 
 name="PrTx229008"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#else</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx229009"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx229019"><span 
class="cmtt-10">file = search subdir (name,str)</span></a><a 
 name="PrTx229010"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">NULL;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 15548--><p class="noindent" >Searches in subdirectories require opendir, closedir, readir. I can&#8217;t find them for dos, so I disabled them
there.
</p><!--l. 15551--><p class="indent" >    On Windows/dos, both forward slash (<span 
class="cmtt-10">/</span>) and backslash (<span 
class="cmtt-10">\</span>) are used as path separator characters. In other
environments, it is the forward slash (<span 
class="cmtt-10">/</span>).
</p>
      <!--l. 15561--><p class="indent" ><a 
 name="PrTx229011"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx215015"><span 
class="cmtt-10">directory</span>&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;</span></a><a 
 name="PrTx229012"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#if</span>&#x00A0;<span 
class="cmtt-10">defined(__DJGPP__)</span>
      <br /><!--x-->&#x00A0;&#x00A0;<span 
class="cmtt-10">&#8217;\\&#8217;</span>

      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#else</span>
      <br /><!--x-->&#x00A0;&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15571--><p class="noindent" ><a 
 href="#PrTx208005"  name="PrTx229013"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10003"><span 
class="cmtt-10">defines</span></a><a 
 name="PrTx229014"  href="#PrTx229030"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#if</span>&#x00A0;<span 
class="cmtt-10">defined(__DJGPP__)</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#define</span>&#x00A0;<span 
class="cmtt-10">dir_path_slash(str)</span>&#x00A0;<span 
class="cmtt-10">(is_forward_slash(str)?</span>&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;</span>&#x00A0;<span 
class="cmtt-10">:</span>&#x00A0;<span 
class="cmtt-10">&#8217;\\&#8217;)</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#else</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#define</span>&#x00A0;<span 
class="cmtt-10">dir_path_slash(str)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15579--><p class="noindent" ><a 
 href="#PrTx229001"  name="PrTx229015"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10009"><span 
class="cmtt-10">header functions</span></a><a 
 name="PrTx229016"  href="#PrTx231002"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#if</span>&#x00A0;<span 
class="cmtt-10">defined(__DJGPP__)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">BOOL</span>&#x00A0;<span 
class="cmtt-10">is_forward_slash(</span>&#x00A0;<span 
class="cmtt-10">ARG_I(const</span>&#x00A0;<span 
class="cmtt-10">char*)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15591--><p class="noindent" ><a 
 href="#PrTx229003"  name="PrTx229017"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10011"><span 
class="cmtt-10">functions</span></a><a 
 name="PrTx229018"  href="#PrTx231004"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#if</span>&#x00A0;<span 
class="cmtt-10">defined(__DJGPP__)</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">BOOL</span>&#x00A0;<span 
class="cmtt-10">is_forward_slash</span><strong><span 
class="cmtt-10">(</span></strong><span 
class="cmtt-10">str)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">char*</span>&#x00A0;<span 
class="cmtt-10">str</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">;{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">*str</span>&#x00A0;<span 
class="cmtt-10">){</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">*(str++)</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;/&#8217;</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">TRUE;</span>&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">FALSE;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15607--><p class="noindent" ><a 
 name="PrTx229019"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx229009"><span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">search</span>&#x00A0;<span 
class="cmtt-10">subdir</span>&#x00A0;<span 
class="cmtt-10">(name,str)</span></a><a 
 name="PrTx229020"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">DIR</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*dp;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx229021"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx230013"><span 
class="cmtt-10">struct dirent</span></a><a 
 name="PrTx229022"><span 
class="cmtt-10">.&#x003E;</span></a>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">*dirp;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">STSTAT</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">buf;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(dp</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">opendir(</span>&#x00A0;<span 
class="cmtt-10">str</span>&#x00A0;<span 
class="cmtt-10">))</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">NULL</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">while(</span>&#x00A0;<span 
class="cmtt-10">(dirp</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">readdir(dp))</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">NULL</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">!eq_str(dirp-&#x003E;d_name,</span>&#x00A0;<span 
class="cmtt-10">".")</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">&amp;&amp;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">!eq_str(dirp-&#x003E;d_name,</span>&#x00A0;<span 
class="cmtt-10">"..")</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;<a 
 name="PrTx229023"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx229025"><span 
class="cmtt-10">reach into the subdirectory</span></a><a 
 name="PrTx229024"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(void)</span>&#x00A0;<span 
class="cmtt-10">closedir(dp);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15618--><p class="noindent" ><a 
 name="PrTx229025"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx229023"><span 
class="cmtt-10">reach</span>&#x00A0;<span 
class="cmtt-10">into</span>&#x00A0;<span 
class="cmtt-10">the</span>&#x00A0;<span 
class="cmtt-10">subdirectory</span></a><a 
 name="PrTx229026"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">strcpy((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">str+n,</span>&#x00A0;<span 
class="cmtt-10">(char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">dirp-&#x003E;d_name</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">str[n-1]</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">dir_path_slash(str);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">LSTAT(str,</span>&#x00A0;<span 
class="cmtt-10">&amp;buf)</span>&#x00A0;<span 
class="cmtt-10">&#x003E;=</span>&#x00A0;<span 
class="cmtt-10">0</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">S_ISDIR(</span>&#x00A0;<span 
class="cmtt-10">buf.st_mode</span>&#x00A0;<span 
class="cmtt-10">)</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">(file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">search_file_ext(name,</span>&#x00A0;<span 
class="cmtt-10">str,</span>&#x00A0;<span 
class="cmtt-10">flags))</span>&#x00A0;<span 
class="cmtt-10">!=</span>&#x00A0;<span 
class="cmtt-10">NULL</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(void)</span>&#x00A0;<span 
class="cmtt-10">closedir(dp);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">file;</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15624--><p class="noindent" ><a 
 href="#PrTx223001"  name="PrTx229027"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx3023"><span 
class="cmtt-10">h-include</span></a><a 
 name="PrTx229028"  href="#PrTx229034"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">DOS_WIN32</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#include</span>&#x00A0;<span 
class="cmtt-10">&#x003C;io.h&#x003E;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15642--><p class="noindent" ><a 
 href="#PrTx229013"  name="PrTx229029"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10003"><span 
class="cmtt-10">defines</span></a><a 
 name="PrTx229030"  href="#PrTx229032"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">S_ISDIR</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#define</span>&#x00A0;<span 
class="cmtt-10">S_ISDIR(M)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">(((M)</span>&#x00A0;<span 
class="cmtt-10">&amp;</span>&#x00A0;<span 
class="cmtt-10">_S_IFMT)==_S_IFDIR)</span>&#x00A0;&#x00A0;&#x00A0;<i>&#x00A0;<span 
class="cmtt-10">test</span>&#x00A0;<span 
class="cmtt-10">for</span>&#x00A0;<span 
class="cmtt-10">directory</span>&#x00A0;</i>

      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">_S_IFDIR</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#define</span>&#x00A0;<span 
class="cmtt-10">_S_IFDIR</span>&#x00A0;<span 
class="cmtt-10">S_IFDIR</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">_S_IFMT</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#define</span>&#x00A0;<span 
class="cmtt-10">_S_IFMT</span>&#x00A0;<span 
class="cmtt-10">S_IFMT</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 15645--><p class="noindent" >&#8216;lstat&#8217; returns info about the symbolic link, not the file referenced by the symbolic link as &#8216;stat&#8217; does
</p><!--l. 15648--><p class="indent" >    STSTAT is for &#8216;struct stat&#8217;, LSTAT is for the function. Don&#8217;t define STAT, aix&#8217;s <span 
class="cmtt-10">&#x003C;sys/dir.h&#x003E; </span>defines it as 1
(Peter Breitenlohner).
</p><div class="Verbatim"><span 
class="cmtt-10">1998-10-22</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;Eli</span><span 
class="cmtt-10">&#x00A0;Zaretskii</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;&#x003C;eliz@is.elta.co.il&#x003E;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;DJGPP:</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;(LSTAT):</span><span 
class="cmtt-10">&#x00A0;Define</span><span 
class="cmtt-10">&#x00A0;to</span><span 
class="cmtt-10">&#x00A0;stat</span><span 
class="cmtt-10">&#x00A0;for</span><span 
class="cmtt-10">&#x00A0;every</span><span 
class="cmtt-10">&#x00A0;system</span><span 
class="cmtt-10">&#x00A0;that</span><span 
class="cmtt-10">&#x00A0;doesn&#8217;t</span><span 
class="cmtt-10">&#x00A0;define</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;</span><span 
class="cmtt-10">&#x00A0;S_ISLNK.</span><span 
class="cmtt-10">&#x00A0;</span>
<br /></div>
      <!--l. 15667--><p class="indent" ><a 
 href="#PrTx229029"  name="PrTx229031"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10003"><span 
class="cmtt-10">defines</span></a><a 
 name="PrTx229032"  href="tex4ht-cCh16.html#PrTx233014"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#if</span>&#x00A0;<span 
class="cmtt-10">defined(DOS_WIN32)</span>&#x00A0;<span 
class="cmtt-10">||</span>&#x00A0;<span 
class="cmtt-10">!defined(S_ISLNK)</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#define</span>&#x00A0;<span 
class="cmtt-10">LSTAT</span>&#x00A0;<span 
class="cmtt-10">stat</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#else</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#define</span>&#x00A0;<span 
class="cmtt-10">LSTAT</span>&#x00A0;<span 
class="cmtt-10">lstat</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#define</span>&#x00A0;<span 
class="cmtt-10">STSTAT</span>&#x00A0;<span 
class="cmtt-10">stat</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15675--><p class="noindent" ><a 
 href="#PrTx229027"  name="PrTx229033"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx3023"><span 
class="cmtt-10">h-include</span></a><a 
 name="PrTx229034"  href="#PrTx230004"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#include</span>&#x00A0;<span 
class="cmtt-10">&#x003C;sys/stat.h&#x003E;</span>
      <br /><!--x-->&#x00A0;<i>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">stat</span>&#x00A0;<span 
class="cmtt-10">_IF_DIR</span>
      <br /><!--x-->&#x00A0;</i>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-230"  name="QQ1-31-230">dirent</a></h3>
<!--l. 15679--><p class="noindent" >readdir, opendir, closedir
</p>
      <!--l. 15686--><p class="indent" ><a 
 name="PrTx230001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx3019"><span 
class="cmtt-10">h-defines</span>&#x00A0;<span 
class="cmtt-10">DOS-WIN32</span></a><a 
 name="PrTx230002"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">DOS_WIN32</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#define</span>&#x00A0;<span 
class="cmtt-10">STRUCT_DIRENT</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15698--><p class="noindent" ><a 
 href="#PrTx229033"  name="PrTx230003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx3023"><span 
class="cmtt-10">h-include</span></a><a 
 name="PrTx230004"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">HAVE_DIRENT_H</span>
      <br /><!--x-->&#x00A0;<a 
 name="PrTx230005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx230009"><span 
class="cmtt-10">needs dirent.h</span></a><a 
 name="PrTx230006"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#else</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifndef</span>&#x00A0;<span 
class="cmtt-10">STRUCT_DIRENT</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#define</span>&#x00A0;<span 
class="cmtt-10">STRUCT_DIRECT</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;<a 
 name="PrTx230007"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx230011"><span 
class="cmtt-10">needs simulated dirent.h</span></a><a 
 name="PrTx230008"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15706--><p class="noindent" ><a 
 name="PrTx230009"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx230005"><span 
class="cmtt-10">needs</span>&#x00A0;<span 
class="cmtt-10">dirent.h</span></a><a 
 name="PrTx230010"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#include</span>&#x00A0;<span 
class="cmtt-10">&#x003C;dirent.h&#x003E;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15719--><p class="noindent" ><a 
 name="PrTx230011"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx230007"><span 
class="cmtt-10">needs</span>&#x00A0;<span 
class="cmtt-10">simulated</span>&#x00A0;<span 
class="cmtt-10">dirent.h</span></a><a 
 name="PrTx230012"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">HAVE_SYS_NDIR_H</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#include</span>&#x00A0;<span 
class="cmtt-10">&#x003C;sys/ndir.h&#x003E;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>

      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">HAVE_SYS_DIR_H</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#include</span>&#x00A0;<span 
class="cmtt-10">&#x003C;sys/dir.h&#x003E;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">HAVE_NDIR_H</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#include</span>&#x00A0;<span 
class="cmtt-10">&#x003C;ndir.h&#x003E;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15731--><p class="noindent" ><a 
 name="PrTx230013"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx229021"><span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">dirent</span></a><a 
 name="PrTx230014"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#ifdef</span>&#x00A0;<span 
class="cmtt-10">STRUCT_DIRECT</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">direct</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#else</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">struct</span>&#x00A0;<span 
class="cmtt-10">dirent</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#endif</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 15734--><p class="noindent" >[<a 
 href="tex4ht-c41.html"  name="tex4ht-c41.html" >more</a>]
</p>
    <h3 class="SubSectionHead"><a 
 href="#QQ2-31-231"  name="QQ1-31-231">Try to Open Path-Named File</a></h3>
           <!--l. 15801--><p class="noindent" ><a 
 href="#PrTx229015"  name="PrTx231001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10009"><span 
class="cmtt-10">header functions</span></a><a 
 name="PrTx231002"  href="tex4ht-cCh16.html#PrTx233002"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;<span 
class="cmtt-10">f_open_pathed_filename(</span>&#x00A0;<span 
class="cmtt-10">ARG_II(const</span>&#x00A0;<span 
class="cmtt-10">char*,const</span>&#x00A0;<span 
class="cmtt-10">char*)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 15821--><p class="noindent" ><a 
 href="#PrTx229017"  name="PrTx231003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-cCh1.html#PrTx10011"><span 
class="cmtt-10">functions</span></a><a 
 name="PrTx231004"  href="tex4ht-cCh16.html#PrTx233004"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;<span 
class="cmtt-10">f_open_pathed_filename</span><strong><span 
class="cmtt-10">(</span></strong>&#x00A0;<span 
class="cmtt-10">name,</span>&#x00A0;<span 
class="cmtt-10">flags</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">char*</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">name</span>&#x00A0;<strong><span 
class="cmtt-10">;</span></strong>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">const</span>&#x00A0;<span 
class="cmtt-10">char*</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">flags</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">;{</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">FILE*</span>&#x00A0;<span 
class="cmtt-10">file;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">U_CHAR</span>&#x00A0;<span 
class="cmtt-10">*str;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">NULL;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">*name</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">&#8217;~&#8217;</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">HOME_DIR</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">str</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">m_alloc(char,</span>&#x00A0;<span 
class="cmtt-10">strlen((char</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;<span 
class="cmtt-10">HOME_DIR)+strlen(name));</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(IGNORED)</span>&#x00A0;<span 
class="cmtt-10">sprintf(str,"%s%s",</span>&#x00A0;<span 
class="cmtt-10">HOME_DIR,</span>&#x00A0;<span 
class="cmtt-10">name+1);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open(str,flags);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">free((void</span>&#x00A0;<span 
class="cmtt-10">*)</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">str);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">f_open(</span>&#x00A0;<span 
class="cmtt-10">name,</span>&#x00A0;<span 
class="cmtt-10">flags</span>&#x00A0;<span 
class="cmtt-10">);</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">return</span>&#x00A0;<span 
class="cmtt-10">file;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>

</p>
    <!--l. 15825--><div class="crosslinks"><p class="noindent">[<a 
 href="tex4ht-cCh16.html" >next</a>] [<a 
 href="tex4ht-cCh14.html" >prev</a>] [<a 
 href="tex4ht-cCh14.html#tailtex4ht-cCh14.html" >prev-tail</a>] [<a 
 href="tex4ht-cCh15.html" >front</a>] [<a 
 href="tex4ht-c.html#tex4ht-cCh15.html" >up</a>] </p></div>
<!--l. 15825--><p class="indent" >    <a 
  name="tailtex4ht-cCh15.html"></a>   </p> 
</body></html> 
