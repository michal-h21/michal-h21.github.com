<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title>End</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<!-- html,th4,family,sections+,xhtml,next --> 
<meta name="src" content="tex4ht-4ht.tex" /> 
<meta name="date" content="2014-07-12 22:36:00" /> 
<link rel="stylesheet" type="text/css" href="tex4ht-4ht.css" /> 
<link rev="made" href="mailto:tex4ht@tug.org" /></head><body 
>
    <!--l. 5002--><div class="crosslinks"><p class="noindent">[<a 
 href="tex4ht-4htSu20.html" >next</a>] [<a 
 href="tex4ht-4htSu18.html" >prev</a>] [<a 
 href="tex4ht-4htSu18.html#tailtex4ht-4htSu18.html" >prev-tail</a>] [<a 
 href="#tailtex4ht-4htSu19.html">tail</a>] [<a 
 href="tex4ht-4htSe19.html#tex4ht-4htSu19.html" >up</a>] </p></div>
    <h3 class="SubSectionHead"><a 
 href="tex4ht-4htSe19.html#QQ2-56-48"  name="QQ1-56-48">End</a></h3>
           <!--l. 5013--><p class="noindent" ><a 
 href="tex4ht-4htSu18.html#PrTx47005"  name="PrTx48001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-4htPa3.html#PrTx4031"  name="QPrTx232"><span 
class="cmtt-10">latex</span>&#x00A0;<span 
class="cmtt-10">ltmiscen</span></a><a 
 name="PrTx48002"  href="#PrTx48020"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">\let\o:end:=\end</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\def\end#1{\choose:begin</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">{</span><a 
 name="PrTx48003"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx48005"><span 
class="cmtt-10">revised end</span></a><a 
 name="PrTx48004"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">}%</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">{\o:end:{#1}}}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 5032--><p class="noindent" ><a 
 name="PrTx48005"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx48003"  name="QPrTx233"><span 
class="cmtt-10">revised</span>&#x00A0;<span 
class="cmtt-10">end</span></a><a 
 name="PrTx48006"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">%\IgnoreIndent</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\ifvmode</span>&#x00A0;<a 
 name="PrTx48007"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="tex4ht-4htSu20.html#PrTx49005"><span 
class="cmtt-10">ignore par before hline in end</span></a><a 
 name="PrTx48008"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">\fi</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\csname</span>&#x00A0;<span 
class="cmtt-10">end#1\endcsname</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\@checkend{#1}%</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\aftergroup\recall:afterend</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\expandafter\endgroup\if@endpe\@doendpe\fi</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\ifx</span>&#x00A0;<span 
class="cmtt-10">\chk:pic\:UnDef</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx48009"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx48013"><span 
class="cmtt-10">after end of /end</span></a><a 
 name="PrTx48010"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">%</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx48011"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx48015"><span 
class="cmtt-10">check Everypar at end</span></a><a 
 name="PrTx48012"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">%</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\list:recall</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\else</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\let\chk:pic\:UnDef</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\fi</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\if@ignore\global\@ignorefalse\ignorespaces\fi</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 5040--><p class="noindent" >A &#8216;<span 
class="cmtt-10">\def\::temp{...}\HLet\end=\:temp</span>&#8217; is no good in cases like
</p><div class="Verbatim"><span 
class="cmtt-10">xxxxxxx</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">\begin{equation}</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">g(E)</span><span 
class="cmtt-10">&#x00A0;=</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">\fff{....\meaning\end}</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">\end{equation}</span><span 
class="cmtt-10">&#x00A0;</span>
<br /><span 
class="cmtt-10">yyyyyyyy</span><span 
class="cmtt-10">&#x00A0;</span>
<br /></div>
<!--l. 5049--><p class="indent" >    because the &#8216;<span 
class="cmtt-10">\end</span>&#8217; is within picture which brings the false part in &#8216;<span 
class="cmtt-10">\ifx \EndPicture\:UnDef \n:end:\else</span>
<span 
class="cmtt-10">\o:end:\fi</span>&#8217;.
</p><!--l. 5052--><p class="indent" >    The <span 
class="cmtt-10">\csname before:begin#1\endcsname </span>sends <span 
class="cmtt-10">\csname after:end#1\endcsname </span>to the end with <span 
class="cmtt-10">\csname</span>
<span 
class="cmtt-10">after:end\endcsname</span>. Hence, allowing to change or interrupt the delivery by redefining <span 
class="cmtt-10">\csname</span>
<span 
class="cmtt-10">after:end\endcsname </span>on the way.
</p>
      <!--l. 5061--><p class="indent" ><a 
 name="PrTx48013"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx48009"  name="QPrTx234"><span 
class="cmtt-10">after</span>&#x00A0;<span 
class="cmtt-10">end</span>&#x00A0;<span 
class="cmtt-10">of</span>&#x00A0;<span 
class="cmtt-10">/end</span></a><a 
 name="PrTx48014"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">\csname</span>&#x00A0;<span 
class="cmtt-10">after:end\endcsname</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\expandafter\let\csname</span>&#x00A0;<span 
class="cmtt-10">after:end\endcsname=\:UnDef</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 5071--><p class="noindent" ><a 
 name="PrTx48015"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx48011"  name="QPrTx235"><span 
class="cmtt-10">check</span>&#x00A0;<span 
class="cmtt-10">Everypar</span>&#x00A0;<span 
class="cmtt-10">at</span>&#x00A0;<span 
class="cmtt-10">end</span></a><a 
 name="PrTx48016"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">\PopStack\envn:list\:tempb</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\ifnum</span>&#x00A0;<span 
class="cmtt-10">\:tempb=\n:list</span>&#x00A0;<span 
class="cmtt-10">\else</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\def\:temp{#1}\def\:tempa{thebibliography}\ifx</span>&#x00A0;<span 
class="cmtt-10">\:temp\:tempa</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\else\:warning{\string\SaveEverypar&#8217;s:</span>&#x00A0;<span 
class="cmtt-10">\:tempb\space</span>&#x00A0;<span 
class="cmtt-10">at</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\string\begin{#1}</span>&#x00A0;<span 
class="cmtt-10">and</span>&#x00A0;<span 
class="cmtt-10">\n:list\space</span>&#x00A0;<span 
class="cmtt-10">\string\end{#1}}%</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\fi</span>&#x00A0;<span 
class="cmtt-10">\fi</span>
      <br /><!--x-->&#x00A0;-_-_-</span>

</p><!--l. 5073--><p class="noindent" >The <span 
class="cmtt-10">\thebibliography </span>contains a &#8216;<span 
class="cmtt-10">chapter*</span>&#8217; which is a problem here in case of cutoff because we get
&#8216;<span 
class="cmtt-10">\SaveEverypar....\HPage...\RecallEverypar....\EndHPage</span>&#8217;, where the hypertext also saves and recalls the
status. Hence, a partial overlap that would have forced a warning.
</p><!--l. 5082--><p class="indent" >    The <span 
class="cmtt-10">\RecallEverypar </span>must appear first because it sets the counter <span 
class="cmtt-10">\n:list</span>, the appropriate <span 
class="cmtt-10">\ht:everypar</span>
contents, and <span 
class="cmtt-10">\ShowIndent </span>or <span 
class="cmtt-10">\IgnoreIndent</span>.
</p><!--l. 5087--><p class="indent" >    The <span 
class="cmtt-10">\@doendpe </span>deals with piles of <span 
class="cmtt-10">\end</span>s. The &#8216;<span 
class="cmtt-10">\Protect\HtmlPar</span>&#8217; goes to the first paragraph outside the
pile.
</p>
      <!--l. 5095--><p class="indent" ><a 
 name="PrTx48017"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-4htSu18.html#PrTx47007"  name="QPrTx236"><span 
class="cmtt-10">recall</span>&#x00A0;<span 
class="cmtt-10">after</span>&#x00A0;<span 
class="cmtt-10">/end</span></a><a 
 name="PrTx48018"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">\ifhmode</span>&#x00A0;<span 
class="cmtt-10">\hfill\break\fi</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\RecallEverypar</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 5103--><p class="noindent" ><a 
 href="#PrTx48001"  name="PrTx48019"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-4htPa3.html#PrTx4031"  name="QPrTx237"><span 
class="cmtt-10">latex</span>&#x00A0;<span 
class="cmtt-10">ltmiscen</span></a><a 
 name="PrTx48020"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">\def\:tempc{\@endpetrue</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\def\par{\@restorepar\ht:everypar{\HtmlPar}\par\@endpefalse}%</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\ht:everypar{{\setbox\z@\lastbox}\IgnoreIndent\HtmlPar</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\ht:everypar{\HtmlPar}\@endpefalse}}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\HLet\@doendpe\:tempc</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 5109--><p class="noindent" >The <span 
class="cmtt-10">\hfill\break </span>is to help prevent losses of space separators.
</p><!--l. 5111--><p class="indent" >    We might get here leading empty paragrphs after an &#8216;<span 
class="cmtt-10">\end</span>&#8217;. Is there a way to remove them without a post
processor.
</p><!--l. 5115--><p class="indent" >    We can&#8217;t add grouping of the form &#8216;<span 
class="cmtt-10">\append:defI\begin{\bgroup}.......\pend:defI\end{\egroup}</span>&#8217; for
catching enclosed fonts because <span 
class="cmtt-10">\begin{...} </span>commands might include parametric subcommands like in
&#8216;<span 
class="cmtt-10">\begin{list}{default-label}{definitions}...\end{list}</span>&#8217;.
</p><!--l. 5122--><p class="indent" >    La<span class="TEX">T<span 
class="E">E</span>X</span> changes the meaning of &#8216;<span 
class="cmtt-10">\ht:everypar</span>&#8217; upon reaching &#8216;<span 
class="cmtt-10">\end</span>&#8217;. Hence, the
&#8216;<span 
class="cmtt-10">\ht:everypar{}\begin{...}...\end{...}</span>&#8217; does not let the effect of &#8216;<span 
class="cmtt-10">\ht:everypar</span>&#8217; through.

</p>
    <!--l. 5128--><div class="crosslinks"><p class="noindent">[<a 
 href="tex4ht-4htSu20.html" >next</a>] [<a 
 href="tex4ht-4htSu18.html" >prev</a>] [<a 
 href="tex4ht-4htSu18.html#tailtex4ht-4htSu18.html" >prev-tail</a>] [<a 
 href="tex4ht-4htSu19.html" >front</a>] [<a 
 href="tex4ht-4htSe19.html#tex4ht-4htSu19.html" >up</a>] </p></div>
<!--l. 5128--><p class="indent" >    <a 
  name="tailtex4ht-4htSu19.html"></a> </p> 
</body></html> 
