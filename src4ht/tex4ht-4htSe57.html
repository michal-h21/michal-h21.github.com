<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title>Floats, Inserts, and Captions</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<!-- html,th4,family,sections+,xhtml,next --> 
<meta name="src" content="tex4ht-4ht.tex" /> 
<meta name="date" content="2014-07-12 22:36:00" /> 
<link rel="stylesheet" type="text/css" href="tex4ht-4ht.css" /> 
<link rev="made" href="mailto:tex4ht@tug.org" /></head><body 
>
    <!--l. 10143--><div class="crosslinks"><p class="noindent">[<a 
 href="tex4ht-4htSu60.html" >next</a>] [<a 
 href="tex4ht-4htCh18.html" >prev</a>] [<a 
 href="tex4ht-4htCh18.html#tailtex4ht-4htCh18.html" >prev-tail</a>] [<a 
 href="#tailtex4ht-4htSe57.html">tail</a>] [<a 
 href="tex4ht-4htCh18.html#tex4ht-4htSe57.html" >up</a>] </p></div>
    <h3 class="SectionHead">18.1 <a 
 href="tex4ht-4htPa1.html#QQ2-157-137"  name="QQ1-157-137">Floats, Inserts, and Captions</a></h3>
    <div class="TableOfContents">
<br />    &#8212; <a 
 href="tex4ht-4htSu60.html#QQ1-158-138"  name="QQ2-158-138">Tags for Figures</a>
    </div>
<!--l. 10152--><p class="indent" >    <a 
 href="http://ctan.tug.org/ctan/tex-archive/macros/latex/base/ltfloat.dtx" >ltfloat.dtx</a>
</p>
      <!--l. 10176--><p class="indent" ><a 
 name="PrTx137001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-4htPa3.html#PrTx4047"  name="QPrTx494"><span 
class="cmtt-10">latex</span>&#x00A0;<span 
class="cmtt-10">ltfloat</span></a><a 
 name="PrTx137002"  href="#PrTx137004"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">\def\@xfloat</span>&#x00A0;<span 
class="cmtt-10">#1[#2]{%</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\def</span>&#x00A0;<span 
class="cmtt-10">\@captype</span>&#x00A0;<span 
class="cmtt-10">{#1}%</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\:clearpage</span>&#x00A0;<span 
class="cmtt-10">\bf:float</span>&#x00A0;<span 
class="cmtt-10">\:clearpage</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\begingroup</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\expandafter\ifx\csname</span>&#x00A0;<span 
class="cmtt-10">end#1\endcsname\o:end@float:</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\expandafter\let\csname</span>&#x00A0;<span 
class="cmtt-10">end#1\endcsname\float@end</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\expandafter\let\csname</span>&#x00A0;<span 
class="cmtt-10">end#1*\endcsname\float@dblend</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\fi</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\@parboxrestore</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\reset@font</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\normalsize</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\everypar{\HtmlPar}%</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\let\o:end@float:=\end@float</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\def\end@float{\endgroup\:clearpage</span>&#x00A0;<span 
class="cmtt-10">\af:float}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\let\end@dblfloat=\end@float</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 10178--><p class="noindent" >Need to fix also double float
</p><!--l. 10218--><p class="indent" >    &#8216;<span 
class="cmtt-10">#1</span>&#8217; before anchors, &#8216;<span 
class="cmtt-10">#2</span>&#8217; after anchors, &#8216;<span 
class="cmtt-10">#3</span>&#8217; after float.
</p>
      <!--l. 10226--><p class="indent" ><a 
 href="#PrTx137001"  name="PrTx137003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-4htPa3.html#PrTx4047"  name="QPrTx495"><span 
class="cmtt-10">latex</span>&#x00A0;<span 
class="cmtt-10">ltfloat</span></a><a 
 name="PrTx137004"  href="#PrTx137008"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">\Odef\c:float:[#1]#2#3#4{%</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\def\bf:float{#2</span><a 
 name="PrTx137005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="tex4ht-4htSu60.html#PrTx138005"><span 
class="cmtt-10">tags for captions</span></a><a 
 name="PrTx137006"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">#3}%</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\def\af:float{#4}}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\gHAssign\capt:cnt=0</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\Configure{float}{}{}{}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 10228--><p class="noindent" >The initialization of the counter is for degenerated cases in which the captions don&#8217;t appear within floats. Does this
work?
</p><!--l. 10232--><p class="indent" >    The anchors of the links are within the frames of the pictures, only if they are empty (or the default frame of
horizontal lines before and after the picture are used &#8216;  <span 
class="cmtt-10">\def\:tempa{\HCode{&#x003C;HR&#x003E;}}\def\:tempb{#1}% \ifx</span>
<span 
class="cmtt-10">\:tempa\:tempb \else </span>&#8217;).
</p><!--l. 10239--><p class="indent" >    The following has been changed for getting links in &#8216;<span 
class="cmtt-10">.aux</span>&#8217; files to &#8216;<span 
class="cmtt-10">.lot</span>&#8217; (list of tables) and &#8216;<span 
class="cmtt-10">lof</span>&#8217; (list of figures)
files.
</p>
      <!--l. 10250--><p class="indent" ><a 
 href="#PrTx137003"  name="PrTx137007"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-4htPa3.html#PrTx4047"  name="QPrTx496"><span 
class="cmtt-10">latex</span>&#x00A0;<span 
class="cmtt-10">ltfloat</span></a><a 
 name="PrTx137008"  href="tex4ht-4htSu60.html#PrTx138004"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">\long\def\:tempc#1[#2]#3{\par</span>&#x00A0;<span 
class="cmtt-10">\cur:lbl{}%</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<a 
 name="PrTx137009"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx137025"><span 
class="cmtt-10">write caption to toc</span></a><a 
 name="PrTx137010"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">\begingroup</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\@parboxrestore</span>&#x00A0;<span 
class="cmtt-10">\normalsize</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\@makecaption{\csname</span>&#x00A0;<span 
class="cmtt-10">fnum@#1\endcsname}{\ignorespaces</span>&#x00A0;<span 
class="cmtt-10">#3}\par</span>

      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\endgroup</span>&#x00A0;<a 
 name="PrTx137011"  href="tex4ht-4htSu3.html#PrTx15017"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="tex4ht-4htSu3.html#PrTx15025"><span 
class="cmtt-10">cancel if-label anchors</span></a><a 
 name="PrTx137012"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\def\numberline#1{\hbox</span>&#x00A0;<span 
class="cmtt-10">to\@tempdima{#1\hfil}</span>&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\HLet\@caption=\:tempc</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 10252--><p class="noindent" >The <span 
class="cmtt-10">|&#x003C;cancel if-label anchors|&#x003E; </span>request no the <span 
class="cmtt-10">\label </span>commands to avoid duplicating the anchor already set
by the <span 
class="cmtt-10">\caption </span>command.
</p>
      <!--l. 10260--><p class="indent" ><a 
 href="tex4ht-4htSe35.html#PrTx82003"  name="PrTx137013"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="tex4ht-4htCh1.html#PrTx3017"  name="QPrTx497"><span 
class="cmtt-10">config</span>&#x00A0;<span 
class="cmtt-10">book-report-article</span>&#x00A0;<span 
class="cmtt-10">utilities</span></a><a 
 name="PrTx137014"  href="tex4ht-4htSe62.html#PrTx148002"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<a 
 name="PrTx137015"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx137017"><span 
class="cmtt-10">book-report-article caption</span></a><a 
 name="PrTx137016"  href="tex4ht-4htCh38.html#PrTx231010"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\pend:def\caption{\SkipRefstepAnchor}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 10264--><p class="noindent" ><a 
 name="PrTx137017"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx137015"  name="QPrTx498"><span 
class="cmtt-10">book-report-article</span>&#x00A0;<span 
class="cmtt-10">caption</span></a><a 
 name="PrTx137018"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<a 
 name="PrTx137019"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx137021"><span 
class="cmtt-10">config makecaption</span></a><a 
 name="PrTx137020"  href="tex4ht-4htSe268.html#PrTx481020"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 10272--><p class="noindent" ><a 
 name="PrTx137021"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx137019"  name="QPrTx499"><span 
class="cmtt-10">config</span>&#x00A0;<span 
class="cmtt-10">makecaption</span></a><a 
 name="PrTx137022"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">\NewConfigure{caption}[4]{\c:def\cptA:{#1}\c:def\cptB:{#2}%</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\c:def\cptC:{#3}\c:def\cptD:{#4}}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\long\def\@makecaption#1#2{%</span>&#x00A0;&#x00A0;&#x00A0;<i><span 
class="cmtt-10">\:makecaption</span></i>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">{\cptA:</span>&#x00A0;<a 
 name="PrTx137023"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="tex4ht-4htSu60.html#PrTx138001"><span 
class="cmtt-10">caption and ref/tag</span></a><a 
 name="PrTx137024"  href="tex4ht-4htCh44.html#PrTx247012"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">\cptB:}{\cptC:{#2}\cptD:}}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 10289--><p class="noindent" ><a 
 name="PrTx137025"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx137009"  name="QPrTx500"><span 
class="cmtt-10">write</span>&#x00A0;<span 
class="cmtt-10">caption</span>&#x00A0;<span 
class="cmtt-10">to</span>&#x00A0;<span 
class="cmtt-10">toc</span></a><a 
 name="PrTx137026"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">\begingroup</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\gHAdvance\TitleCount</span>&#x00A0;<span 
class="cmtt-10">by</span>&#x00A0;<span 
class="cmtt-10">1</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\protect:wrtoc</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\edef\:temp{#2}%</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\edef\:temp{\the\:tokwrite{\string\doTocEntry</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\string\toc</span><a 
 name="PrTx137027"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx137029"><span 
class="cmtt-10">caption type</span></a><a 
 name="PrTx137028"><span 
class="cmtt-10">.&#x003E;</span></a><span 
class="cmtt-10">{\csname</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">the#1\endcsname}{\string\csname\space</span>&#x00A0;<span 
class="cmtt-10">a:TocLink\string\endcsname</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">{\FileNumber}{\cur:th</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">\:currentlabel}{}{\ifx\:temp\empty\else</span>&#x00A0;<span 
class="cmtt-10">\ignorespaces</span>&#x00A0;<span 
class="cmtt-10">#2\fi}}%</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">{#1}\relax}}\:temp</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">\endgroup</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 10294--><p class="noindent" ><a 
 name="PrTx137029"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx137027"  name="QPrTx501"><span 
class="cmtt-10">caption</span>&#x00A0;<span 
class="cmtt-10">type</span></a><a 
 name="PrTx137030"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">\expandafter\ifx\csname</span>&#x00A0;<span 
class="cmtt-10">ext@#1\endcsname\relax</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">#1\else\csname</span>&#x00A0;<span 
class="cmtt-10">ext@#1\endcsname\fi</span>
      <br /><!--x-->&#x00A0;-_-_-</span>

</p>
    <!--l. 10371--><div class="crosslinks"><p class="noindent">[<a 
 href="tex4ht-4htSu60.html" >next</a>] [<a 
 href="tex4ht-4htCh18.html" >prev</a>] [<a 
 href="tex4ht-4htCh18.html#tailtex4ht-4htCh18.html" >prev-tail</a>] [<a 
 href="tex4ht-4htSe57.html" >front</a>] [<a 
 href="tex4ht-4htCh18.html#tex4ht-4htSe57.html" >up</a>] </p></div>
<!--l. 10371--><p class="indent" >    <a 
  name="tailtex4ht-4htSe57.html"></a> </p> 
</body></html> 
