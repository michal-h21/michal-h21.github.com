<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title>Handle SAX</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<!-- xhtml,3,next,html --> 
<meta name="src" content="xtpipes.tex" /> 
<meta name="date" content="2014-05-24 12:32:00" /> 
<link rel="stylesheet" type="text/css" href="xtpipes.css" /> 
</head><body 
>
   <!--l. 2081--><div class="crosslinks"><p class="noindent">[<a 
 href="xtpipessu26.html" >next</a>] [<a 
 href="xtpipessu24.html" >prev</a>] [<a 
 href="xtpipessu24.html#tailxtpipessu24.html" >prev-tail</a>] [<a 
 href="xtpipessu21.html#tailxtpipessu23.html">tail</a>] [<a 
 href="xtpipessu16.html#xtpipessu25.html" >up</a>] </p></div>
   <h4 class="subsectionHead"><span class="titlemark">3.9   </span> <a 
  id="x31-350003.9"></a>Handle SAX</h4>
<!--l. 2086--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">3.9.1   </span> <a 
  id="x31-360003.9.1"></a>outline</h5>
<!--l. 2089--><p class="noindent" >Apply the specified content-handler and filters on the XML content.

</p>
   <div class="verbatim" id="verbatim-10">
&#x003C;sax&#x00A0;name="..."&#x00A0;xml="..."&#x00A0;content-handler="..."
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;lexical-handler="..."&#x00A0;&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x003C;script&#x00A0;element="..."&#x00A0;&#x003E;&#x00A0;...&#x00A0;&#x003C;/script&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;...
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x003C;script&#x00A0;element="..."&#x00A0;&#x003E;&#x00A0;...&#x00A0;&#x003C;/script&#x003E;
&#x00A0;<br />&#x003C;/sax&#x003E;
</div>
<!--l. 2099--><p class="nopar" >
</p><!--l. 2102--><p class="indent" >   If provided, the <span 
class="cmbx-10">name attribute </span>is associated to the outcome. If omitted, the
output file name from the command line is assumed. If such file name is not
provided, the standard I/O stream is assumed.
</p><!--l. 2106--><p class="indent" >   If the <span 
class="cmbx-10">xml attribute </span>is not internally defined (within the hash table), a file name
is assumed. If not provided, it stands for the input file name provided in the
command line.
</p><!--l. 2110--><p class="indent" >   The <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10">content-handler</span></span></span> attribute gets a comma seperated list of classes names.
The first argument refers to a content handler, the other arguments refer to filters. A
content handler gets five arguments: output stream, an HashMap refering to the
different scripts enclosed by the sax instruction, a method, log stream, and a boolean
trace indicator. A filter and a lexical-constractor gets three arguments: output
stream, log stream, and a boolean trace indicator.
</p><!--l. 2118--><p class="indent" >   The sax instruction applies the filters and the content handler on the provided
xml string. The script elements offer definitions of scripts delivered to the content
handler. The ScriptsManager content handler of the distribution (Section&#x00A0;<a 
 href="xtpipesse11.html#x67-7500011">11<!--tex4ht:ref: ScriptsManager --></a>), for
instance, invokes these scripts when their corresponding named elemets are
encountered.
</p>
           <!--l. 2128--><p class="noindent" ><a 
 href="xtpipessu22.html#PrTx31001"  id="PrTx36001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="xtpipessu11.html#PrTx14005"  id="QPrTx107"><span 
class="cmtt-10">xtpipes</span>&#x00A0;<span 
class="cmtt-10">entries</span></a><a 
 id="PrTx36002"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">|</span>&#x00A0;<span 
class="cmtt-10">sax</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 2143--><p class="noindent" ><a 
 href="xtpipessu22.html#PrTx31003"  id="PrTx36003"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx36003"  id="QPrTx108"><span 
class="cmtt-10">xtpipes.dtd</span></a><a 
 id="PrTx36004"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">&#x003C;!ELEMENT</span>&#x00A0;<span 
class="cmtt-10">sax</span>&#x00A0;<span 
class="cmtt-10">(#PCDATA</span>&#x00A0;<span 
class="cmtt-10">|</span>&#x00A0;<span 
class="cmtt-10">script)*</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">&#x003E;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">&#x003C;!ELEMENT</span>&#x00A0;<span 
class="cmtt-10">script</span>&#x00A0;<span 
class="cmtt-10">(#PCDATA</span>&#x00A0;<a 
 id="PrTx36005"  href="xtpipessu20.html#PrTx24005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="xtpipessu16.html#PrTx20001"><span 
class="cmtt-10">xtpipes entries</span></a><a 
 id="PrTx36006"><span 
class="cmtt-10">.&#x003E;</span></a>&#x00A0;<span 
class="cmtt-10">)*</span>&#x00A0;&#x00A0;<span 
class="cmtt-10">&#x003E;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">&#x003C;!ATTLIST</span>&#x00A0;<span 
class="cmtt-10">sax</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">name</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">CDATA</span>&#x00A0;<span 
class="cmtt-10">#IMPLIED</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">xml</span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">CDATA</span>&#x00A0;<span 
class="cmtt-10">#IMPLIED</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">content-handler</span>&#x00A0;<span 
class="cmtt-10">CDATA</span>&#x00A0;<span 
class="cmtt-10">#REQUIRED</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">lexical-handler</span>&#x00A0;<span 
class="cmtt-10">CDATA</span>&#x00A0;<span 
class="cmtt-10">#IMPLIED</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">&#x003E;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">&#x003C;!ATTLIST</span>&#x00A0;<span 
class="cmtt-10">script</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">element</span>&#x00A0;<span 
class="cmtt-10">CDATA</span>&#x00A0;<span 
class="cmtt-10">#REQUIRED</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">&#x003E;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>

           </p><!--l. 2183--><p class="noindent" ><a 
 id="PrTx36007"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="xtpipessu5.html#PrTx7021"  id="QPrTx109"><span 
class="cmtt-10">execute</span>&#x00A0;<span 
class="cmtt-10">sax</span></a><a 
 id="PrTx36008"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">String</span>&#x00A0;<span 
class="cmtt-10">errMsg</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">"";</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">try{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 id="PrTx36009"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="xtpipessu24.html#PrTx39001"><span 
class="cmtt-10">load xml into input source</span></a><a 
 id="PrTx36010"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 id="PrTx36011"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="xtpipessu25.html#PrTx41001"><span 
class="cmtt-10">String [] className = ...</span></a><a 
 id="PrTx36012"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 id="PrTx36013"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="xtpipessu25.html#PrTx41003"><span 
class="cmtt-10">ch := content handler</span></a><a 
 id="PrTx36014"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 id="PrTx36015"  href="xtpipessu13.html#PrTx16005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx37001"><span 
class="cmtt-10">get sax reader</span></a><a 
 id="PrTx36016"  href="xtpipessu40.html#PrTx60004"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">XMLReader</span>&#x00A0;<span 
class="cmtt-10">reader</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">saxReader;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 id="PrTx36017"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="xtpipessu26.html#PrTx42001"><span 
class="cmtt-10">insert sax filters</span></a><a 
 id="PrTx36018"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">errMsg</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">"setContentHandler(</span>&#x00A0;<span 
class="cmtt-10">"</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">className[0].trim()</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">"</span>&#x00A0;<span 
class="cmtt-10">)";</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">saxReader.setContentHandler(</span>&#x00A0;<span 
class="cmtt-10">(org.xml.sax.ContentHandler)</span>&#x00A0;<span 
class="cmtt-10">ch</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 id="PrTx36019"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="xtpipessu27.html#PrTx43001"><span 
class="cmtt-10">saxReader += lexical handler</span></a><a 
 id="PrTx36020"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 id="PrTx36021"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="xtpipessu24.html#PrTx38001"><span 
class="cmtt-10">saxReader := ignore DOCTYPE statement</span></a><a 
 id="PrTx36022"  href="#PrTx37004"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">inputSource==null</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 id="PrTx36023"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx36027"><span 
class="cmtt-10">open sax input file</span></a><a 
 id="PrTx36024"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">errMsg</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">"xtpipes</span>&#x00A0;<span 
class="cmtt-10">sax</span>&#x00A0;<span 
class="cmtt-10">parsing</span>&#x00A0;<span 
class="cmtt-10">error";</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">saxReader.parse(</span>&#x00A0;<span 
class="cmtt-10">inputSource</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 id="PrTx36025"  href="xtpipessu21.html#PrTx29005"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="xtpipessu24.html#PrTx40003"><span 
class="cmtt-10">store chars into map</span></a><a 
 id="PrTx36026"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">saxReaderStack.push(</span>&#x00A0;<span 
class="cmtt-10">reader</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">catch</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">java.io.FileNotFoundException</span>&#x00A0;<span 
class="cmtt-10">e</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">instructionErr(</span>&#x00A0;<span 
class="cmtt-10">node,</span>&#x00A0;<span 
class="cmtt-10">errMsg</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">"could</span>&#x00A0;<span 
class="cmtt-10">not</span>&#x00A0;<span 
class="cmtt-10">find</span>&#x00A0;<span 
class="cmtt-10">file:</span>&#x00A0;<span 
class="cmtt-10">"</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">e.getMessage(),</span>&#x00A0;<span 
class="cmtt-10">19</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">catch</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">ClassNotFoundException</span>&#x00A0;<span 
class="cmtt-10">e</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">instructionErr(</span>&#x00A0;<span 
class="cmtt-10">node,</span>&#x00A0;<span 
class="cmtt-10">errMsg</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">"</span>&#x00A0;<span 
class="cmtt-10">class</span>&#x00A0;<span 
class="cmtt-10">not</span>&#x00A0;<span 
class="cmtt-10">found:</span>&#x00A0;<span 
class="cmtt-10">"</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">e.getMessage()</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">"\n</span>&#x00A0;<span 
class="cmtt-10">classpath</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">"</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">System.getProperty("java.class.path")</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">"</span>&#x00A0;<span 
class="cmtt-10">---",</span>&#x00A0;<span 
class="cmtt-10">22</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">catch</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">java.lang.reflect.InvocationTargetException</span>&#x00A0;<span 
class="cmtt-10">e</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">instructionErr(</span>&#x00A0;<span 
class="cmtt-10">node,</span>&#x00A0;<span 
class="cmtt-10">errMsg</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">":</span>&#x00A0;<span 
class="cmtt-10">"</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">e.getCause(),</span>&#x00A0;<span 
class="cmtt-10">23</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">catch</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">Exception</span>&#x00A0;<span 
class="cmtt-10">e</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">Xtpipes.logWriter.flush();</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">e.printStackTrace();</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">instructionErr(</span>&#x00A0;<span 
class="cmtt-10">node,</span>&#x00A0;<span 
class="cmtt-10">errMsg</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">":</span>&#x00A0;<span 
class="cmtt-10">"</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">e.toString(),</span>&#x00A0;<span 
class="cmtt-10">29</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 2199--><p class="noindent" ><a 
 id="PrTx36027"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx36023"  id="QPrTx110"><span 
class="cmtt-10">open</span>&#x00A0;<span 
class="cmtt-10">sax</span>&#x00A0;<span 
class="cmtt-10">input</span>&#x00A0;<span 
class="cmtt-10">file</span></a><a 
 id="PrTx36028"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">errMsg</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">"While</span>&#x00A0;<span 
class="cmtt-10">parsing</span>&#x00A0;<span 
class="cmtt-10">file</span>&#x00A0;<span 
class="cmtt-10">"</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">xml</span>&#x00A0;<span 
class="cmtt-10">+</span>&#x00A0;<span 
class="cmtt-10">":</span>&#x00A0;<span 
class="cmtt-10">";</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">InputStream</span>&#x00A0;<span 
class="cmtt-10">inputStream</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">null;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">Xtpipes.ml2xml</span>&#x00A0;<span 
class="cmtt-10">==</span>&#x00A0;<span 
class="cmtt-10">null</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">Xtpipes.trace</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">Xtpipes.logWriter.println(</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">"No</span>&#x00A0;<span 
class="cmtt-10">request</span>&#x00A0;<span 
class="cmtt-10">for</span>&#x00A0;<span 
class="cmtt-10">ml2xml</span>&#x00A0;<span 
class="cmtt-10">configuration</span>&#x00A0;<span 
class="cmtt-10">(command</span>&#x00A0;<span 
class="cmtt-10">line</span>&#x00A0;<span 
class="cmtt-10">option</span>&#x00A0;<span 
class="cmtt-10">-x)"</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>

      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 id="PrTx36029"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="#PrTx36035"><span 
class="cmtt-10">inputStream := ml2xml-less imput</span></a><a 
 id="PrTx36030"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 id="PrTx36031"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="xtpipessu46.html#PrTx68005"><span 
class="cmtt-10">inputStream := (InputStream) new Ml2xml(filename, "foo.m2x")</span></a><a 
 id="PrTx36032"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">saxReader.parse(</span>&#x00A0;<span 
class="cmtt-10">new</span>&#x00A0;<span 
class="cmtt-10">InputSource(inputStream)</span>&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<a 
 id="PrTx36033"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="xtpipessu46.html#PrTx68009"><span 
class="cmtt-10">Ml2xml close files</span></a><a 
 id="PrTx36034"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 2221--><p class="noindent" ><a 
 id="PrTx36035"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="#PrTx36029"  id="QPrTx111"><span 
class="cmtt-10">inputStream</span>&#x00A0;<span 
class="cmtt-10">:=</span>&#x00A0;<span 
class="cmtt-10">ml2xml-less</span>&#x00A0;<span 
class="cmtt-10">imput</span></a><a 
 id="PrTx36036"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">try{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">inputStream</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(InputStream)</span>&#x00A0;<span 
class="cmtt-10">(new</span>&#x00A0;<span 
class="cmtt-10">File(xml).toURI().toURL().openStream());</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">catch</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">java.io.FileNotFoundException</span>&#x00A0;<span 
class="cmtt-10">ioe</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">try{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">URL</span>&#x00A0;<span 
class="cmtt-10">url</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">null;</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">try</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">url</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">new</span>&#x00A0;<span 
class="cmtt-10">URL(xml);</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">catch</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">java.net.MalformedURLException</span>&#x00A0;<span 
class="cmtt-10">fnf</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">url</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">new</span>&#x00A0;<span 
class="cmtt-10">File(xml).toURI().toURL();</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">inputStream</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(InputStream)</span>&#x00A0;<span 
class="cmtt-10">(url.openStream());</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">catch</span>&#x00A0;<span 
class="cmtt-10">(</span>&#x00A0;<span 
class="cmtt-10">java.io.FileNotFoundException</span>&#x00A0;<span 
class="cmtt-10">fnf</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">inputStream</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(InputStream)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">(</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">new</span>&#x00A0;<span 
class="cmtt-10">File(</span>&#x00A0;<span 
class="cmtt-10">new</span>&#x00A0;<span 
class="cmtt-10">File(xml).toURI().toURL().toString()</span>&#x00A0;<span 
class="cmtt-10">)</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">.</span>&#x00A0;<span 
class="cmtt-10">toURI().toURL()</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">.</span>&#x00A0;<span 
class="cmtt-10">openStream()</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">);</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">}</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
</p><!--l. 2228--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">3.9.2   </span> <a 
  id="x31-370003.9.2"></a>SAX Reader</h5>
<!--l. 2231--><p class="noindent" >The sax reader is pushed into the stack when its job is done, for use in other sax
instructions. The stack is needed because nested sax instructions need unspecified
number of readers. The filters may change the sax readers, so the readers need saving
for later storing them in the stacks.
</p>
           <!--l. 2246--><p class="noindent" ><a 
 id="PrTx37001"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="xtpipessu10.html#PrTx13003"  id="QPrTx112"><span 
class="cmtt-10">get</span>&#x00A0;<span 
class="cmtt-10">sax</span>&#x00A0;<span 
class="cmtt-10">reader</span></a><a 
 id="PrTx37002"><span 
class="cmtt-10">..&#x003E;</span></a><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">XMLReader</span>&#x00A0;<span 
class="cmtt-10">saxReader;</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">if(</span>&#x00A0;<span 
class="cmtt-10">saxReaderStack.empty()</span>&#x00A0;<span 
class="cmtt-10">){</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">SAXParser</span>&#x00A0;<span 
class="cmtt-10">saxParser</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">saxFactory.newSAXParser();</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">saxReader</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">saxParser.getXMLReader();</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<a 
 id="PrTx37003"  href="#PrTx36021"><span 
class="cmtt-10">&#x003C;.</span></a><a 
 href="xtpipessu24.html#PrTx38001"><span 
class="cmtt-10">saxReader := ignore DOCTYPE statement</span></a><a 
 id="PrTx37004"><span 
class="cmtt-10">.&#x003E;</span></a>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>&#x00A0;<span 
class="cmtt-10">else</span>&#x00A0;<span 
class="cmtt-10">{</span>
      <br /><!--x-->&#x00A0;&#x00A0;&#x00A0;&#x00A0;<span 
class="cmtt-10">saxReader</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">(XMLReader)</span>&#x00A0;<span 
class="cmtt-10">saxReaderStack.pop();</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">}</span>

      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 2254--><p class="noindent" ><a 
 href="xtpipessu22.html#PrTx32003"  id="PrTx37005"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="xtpipessu3.html#PrTx5011"  id="QPrTx113"><span 
class="cmtt-10">xtpipes</span>&#x00A0;<span 
class="cmtt-10">initialization</span></a><a 
 id="PrTx37006"  href="xtpipessu25.html#PrTx41012"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">saxFactory</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">SAXParserFactory.newInstance();</span>
      <br /><!--x-->&#x00A0;<span 
class="cmtt-10">saxFactory.setValidating(false);</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 2258--><p class="noindent" ><a 
 href="xtpipessu22.html#PrTx32005"  id="PrTx37007"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="xtpipessu1.html#PrTx3009"  id="QPrTx114"><span 
class="cmtt-10">xtpipes</span>&#x00A0;<span 
class="cmtt-10">fields</span></a><a 
 id="PrTx37008"  href="xtpipessu25.html#PrTx41014"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">private</span>&#x00A0;<span 
class="cmtt-10">static</span>&#x00A0;<span 
class="cmtt-10">Stack</span>&#x00A0;<span 
class="cmtt-10">&#x003C;XMLReader&#x003E;</span>&#x00A0;<span 
class="cmtt-10">saxReaderStack;</span>
      <br /><!--x-->&#x00A0;-_-_-</span>
           </p><!--l. 2263--><p class="noindent" ><a 
 href="xtpipessu9.html#PrTx12009"  id="PrTx37009"><span 
class="cmtt-10">&#x003C;..</span></a><a 
 href="xtpipessu2.html#PrTx4003"  id="QPrTx115"><span 
class="cmtt-10">init fields</span></a><a 
 id="PrTx37010"  href="xtpipessu41.html#PrTx61018"><span 
class="cmtt-10">..&#x003E;</span></a><span 
class="cmtt-10">+</span><br /><span class="ShowCode" style="font-family:monospace;white-space:nowrap;" ><!--x-->&#x00A0;<span 
class="cmtt-10">saxReaderStack</span>&#x00A0;<span 
class="cmtt-10">=</span>&#x00A0;<span 
class="cmtt-10">new</span>&#x00A0;<span 
class="cmtt-10">Stack</span>&#x00A0;<span 
class="cmtt-10">&#x003C;XMLReader&#x003E;</span>&#x00A0;<span 
class="cmtt-10">();</span>
      <br /><!--x-->&#x00A0;-_-_-</span>

</p>
   <!--l. 2266--><div class="crosslinks"><p class="noindent">[<a 
 href="xtpipessu26.html" >next</a>] [<a 
 href="xtpipessu24.html" >prev</a>] [<a 
 href="xtpipessu24.html#tailxtpipessu24.html" >prev-tail</a>] [<a 
 href="xtpipessu23.html" >front</a>] [<a 
 href="xtpipessu16.html#xtpipessu25.html" >up</a>] </p></div>
<!--l. 2266--><p class="indent" >   <a 
  id="tailxtpipessu23.html"></a>  </p> 
</body></html> 
